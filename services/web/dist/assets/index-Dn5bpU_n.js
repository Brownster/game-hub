var Fp=Object.defineProperty;var zp=(e,t,n)=>t in e?Fp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ye=(e,t,n)=>zp(e,typeof t!="symbol"?t+"":t,n);function Wp(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function Gp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Td={exports:{}},Cl={},Id={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var As=Symbol.for("react.element"),Vp=Symbol.for("react.portal"),Hp=Symbol.for("react.fragment"),Yp=Symbol.for("react.strict_mode"),Kp=Symbol.for("react.profiler"),qp=Symbol.for("react.provider"),Qp=Symbol.for("react.context"),Jp=Symbol.for("react.forward_ref"),Xp=Symbol.for("react.suspense"),Zp=Symbol.for("react.memo"),em=Symbol.for("react.lazy"),qc=Symbol.iterator;function tm(e){return e===null||typeof e!="object"?null:(e=qc&&e[qc]||e["@@iterator"],typeof e=="function"?e:null)}var Od={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ad=Object.assign,Ld={};function Tr(e,t,n){this.props=e,this.context=t,this.refs=Ld,this.updater=n||Od}Tr.prototype.isReactComponent={};Tr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Tr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $d(){}$d.prototype=Tr.prototype;function Ma(e,t,n){this.props=e,this.context=t,this.refs=Ld,this.updater=n||Od}var Ba=Ma.prototype=new $d;Ba.constructor=Ma;Ad(Ba,Tr.prototype);Ba.isPureReactComponent=!0;var Qc=Array.isArray,Dd=Object.prototype.hasOwnProperty,Ua={current:null},Md={key:!0,ref:!0,__self:!0,__source:!0};function Bd(e,t,n){var r,s={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Dd.call(t,r)&&!Md.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var a=Array(c),u=0;u<c;u++)a[u]=arguments[u+2];s.children=a}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:As,type:e,key:l,ref:o,props:s,_owner:Ua.current}}function nm(e,t){return{$$typeof:As,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fa(e){return typeof e=="object"&&e!==null&&e.$$typeof===As}function rm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Jc=/\/+/g;function Yl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?rm(""+e.key):t.toString(36)}function Ai(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case As:case Vp:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Yl(o,0):r,Qc(s)?(n="",e!=null&&(n=e.replace(Jc,"$&/")+"/"),Ai(s,t,n,"",function(u){return u})):s!=null&&(Fa(s)&&(s=nm(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Jc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Qc(e))for(var c=0;c<e.length;c++){l=e[c];var a=r+Yl(l,c);o+=Ai(l,t,n,a,s)}else if(a=tm(e),typeof a=="function")for(e=a.call(e),c=0;!(l=e.next()).done;)l=l.value,a=r+Yl(l,c++),o+=Ai(l,t,n,a,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ui(e,t,n){if(e==null)return e;var r=[],s=0;return Ai(e,r,"","",function(l){return t.call(n,l,s++)}),r}function sm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xe={current:null},Li={transition:null},im={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:Li,ReactCurrentOwner:Ua};function Ud(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:ui,forEach:function(e,t,n){ui(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ui(e,function(){t++}),t},toArray:function(e){return ui(e,function(t){return t})||[]},only:function(e){if(!Fa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=Tr;ce.Fragment=Hp;ce.Profiler=Kp;ce.PureComponent=Ma;ce.StrictMode=Yp;ce.Suspense=Xp;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=im;ce.act=Ud;ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ad({},e.props),s=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Ua.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(a in t)Dd.call(t,a)&&!Md.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&c!==void 0?c[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){c=Array(a);for(var u=0;u<a;u++)c[u]=arguments[u+2];r.children=c}return{$$typeof:As,type:e.type,key:s,ref:l,props:r,_owner:o}};ce.createContext=function(e){return e={$$typeof:Qp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qp,_context:e},e.Consumer=e};ce.createElement=Bd;ce.createFactory=function(e){var t=Bd.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:Jp,render:e}};ce.isValidElement=Fa;ce.lazy=function(e){return{$$typeof:em,_payload:{_status:-1,_result:e},_init:sm}};ce.memo=function(e,t){return{$$typeof:Zp,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=Li.transition;Li.transition={};try{e()}finally{Li.transition=t}};ce.unstable_act=Ud;ce.useCallback=function(e,t){return Xe.current.useCallback(e,t)};ce.useContext=function(e){return Xe.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return Xe.current.useDeferredValue(e)};ce.useEffect=function(e,t){return Xe.current.useEffect(e,t)};ce.useId=function(){return Xe.current.useId()};ce.useImperativeHandle=function(e,t,n){return Xe.current.useImperativeHandle(e,t,n)};ce.useInsertionEffect=function(e,t){return Xe.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return Xe.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return Xe.current.useMemo(e,t)};ce.useReducer=function(e,t,n){return Xe.current.useReducer(e,t,n)};ce.useRef=function(e){return Xe.current.useRef(e)};ce.useState=function(e){return Xe.current.useState(e)};ce.useSyncExternalStore=function(e,t,n){return Xe.current.useSyncExternalStore(e,t,n)};ce.useTransition=function(){return Xe.current.useTransition()};ce.version="18.3.1";Id.exports=ce;var w=Id.exports;const El=Gp(w),lm=Wp({__proto__:null,default:El},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om=w,am=Symbol.for("react.element"),cm=Symbol.for("react.fragment"),um=Object.prototype.hasOwnProperty,dm=om.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hm={key:!0,ref:!0,__self:!0,__source:!0};function Fd(e,t,n){var r,s={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)um.call(t,r)&&!hm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:am,type:e,key:l,ref:o,props:s,_owner:dm.current}}Cl.Fragment=cm;Cl.jsx=Fd;Cl.jsxs=Fd;Td.exports=Cl;var i=Td.exports,zd={exports:{}},ft={},Wd={exports:{}},Gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,I){var V=P.length;P.push(I);e:for(;0<V;){var U=V-1>>>1,W=P[U];if(0<s(W,I))P[U]=I,P[V]=W,V=U;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var I=P[0],V=P.pop();if(V!==I){P[0]=V;e:for(var U=0,W=P.length,Q=W>>>1;U<Q;){var se=2*(U+1)-1,ne=P[se],ue=se+1,oe=P[ue];if(0>s(ne,V))ue<W&&0>s(oe,ne)?(P[U]=oe,P[ue]=V,U=ue):(P[U]=ne,P[se]=V,U=se);else if(ue<W&&0>s(oe,V))P[U]=oe,P[ue]=V,U=ue;else break e}}return I}function s(P,I){var V=P.sortIndex-I.sortIndex;return V!==0?V:P.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var a=[],u=[],h=1,f=null,d=3,g=!1,m=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(P){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=P)r(u),I.sortIndex=I.expirationTime,t(a,I);else break;I=n(u)}}function x(P){if(N=!1,_(P),!m)if(n(a)!==null)m=!0,b(k);else{var I=n(u);I!==null&&$(x,I.startTime-P)}}function k(P,I){m=!1,N&&(N=!1,v(A),A=-1),g=!0;var V=d;try{for(_(I),f=n(a);f!==null&&(!(f.expirationTime>I)||P&&!F());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var W=U(f.expirationTime<=I);I=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(a)&&r(a),_(I)}else r(a);f=n(a)}if(f!==null)var Q=!0;else{var se=n(u);se!==null&&$(x,se.startTime-I),Q=!1}return Q}finally{f=null,d=V,g=!1}}var L=!1,y=null,A=-1,j=5,T=-1;function F(){return!(e.unstable_now()-T<j)}function O(){if(y!==null){var P=e.unstable_now();T=P;var I=!0;try{I=y(!0,P)}finally{I?z():(L=!1,y=null)}}else L=!1}var z;if(typeof p=="function")z=function(){p(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,S=C.port2;C.port1.onmessage=O,z=function(){S.postMessage(null)}}else z=function(){E(O,0)};function b(P){y=P,L||(L=!0,z())}function $(P,I){A=E(function(){P(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){m||g||(m=!0,b(k))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(P){switch(d){case 1:case 2:case 3:var I=3;break;default:I=d}var V=d;d=I;try{return P()}finally{d=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,I){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var V=d;d=P;try{return I()}finally{d=V}},e.unstable_scheduleCallback=function(P,I,V){var U=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?U+V:U):V=U,P){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=V+W,P={id:h++,callback:I,priorityLevel:P,startTime:V,expirationTime:W,sortIndex:-1},V>U?(P.sortIndex=V,t(u,P),n(a)===null&&P===n(u)&&(N?(v(A),A=-1):N=!0,$(x,V-U))):(P.sortIndex=W,t(a,P),m||g||(m=!0,b(k))),P},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(P){var I=d;return function(){var V=d;d=I;try{return P.apply(this,arguments)}finally{d=V}}}})(Gd);Wd.exports=Gd;var fm=Wd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm=w,ht=fm;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vd=new Set,fs={};function Jn(e,t){jr(e,t),jr(e+"Capture",t)}function jr(e,t){for(fs[e]=t,e=0;e<t.length;e++)Vd.add(t[e])}var Jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oo=Object.prototype.hasOwnProperty,mm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xc={},Zc={};function vm(e){return Oo.call(Zc,e)?!0:Oo.call(Xc,e)?!1:mm.test(e)?Zc[e]=!0:(Xc[e]=!0,!1)}function gm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ym(e,t,n,r){if(t===null||typeof t>"u"||gm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ze(e,t,n,r,s,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ze[e]=new Ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ze[t]=new Ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ze[e]=new Ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ze[e]=new Ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ze[e]=new Ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ze[e]=new Ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ze[e]=new Ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ze[e]=new Ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ze[e]=new Ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var za=/[\-:]([a-z])/g;function Wa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(za,Wa);ze[t]=new Ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(za,Wa);ze[t]=new Ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(za,Wa);ze[t]=new Ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ze[e]=new Ze(e,1,!1,e.toLowerCase(),null,!1,!1)});ze.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ze[e]=new Ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ga(e,t,n,r){var s=ze.hasOwnProperty(t)?ze[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ym(t,n,s,r)&&(n=null),r||s===null?vm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var tn=pm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,di=Symbol.for("react.element"),ir=Symbol.for("react.portal"),lr=Symbol.for("react.fragment"),Va=Symbol.for("react.strict_mode"),Ao=Symbol.for("react.profiler"),Hd=Symbol.for("react.provider"),Yd=Symbol.for("react.context"),Ha=Symbol.for("react.forward_ref"),Lo=Symbol.for("react.suspense"),$o=Symbol.for("react.suspense_list"),Ya=Symbol.for("react.memo"),on=Symbol.for("react.lazy"),Kd=Symbol.for("react.offscreen"),eu=Symbol.iterator;function Ur(e){return e===null||typeof e!="object"?null:(e=eu&&e[eu]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,Kl;function Qr(e){if(Kl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Kl=t&&t[1]||""}return`
`+Kl+e}var ql=!1;function Ql(e,t){if(!e||ql)return"";ql=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),l=r.stack.split(`
`),o=s.length-1,c=l.length-1;1<=o&&0<=c&&s[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==l[c]){var a=`
`+s[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=c);break}}}finally{ql=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Qr(e):""}function xm(e){switch(e.tag){case 5:return Qr(e.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 2:case 15:return e=Ql(e.type,!1),e;case 11:return e=Ql(e.type.render,!1),e;case 1:return e=Ql(e.type,!0),e;default:return""}}function Do(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case lr:return"Fragment";case ir:return"Portal";case Ao:return"Profiler";case Va:return"StrictMode";case Lo:return"Suspense";case $o:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yd:return(e.displayName||"Context")+".Consumer";case Hd:return(e._context.displayName||"Context")+".Provider";case Ha:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ya:return t=e.displayName||null,t!==null?t:Do(e.type)||"Memo";case on:t=e._payload,e=e._init;try{return Do(e(t))}catch{}}return null}function wm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Do(t);case 8:return t===Va?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nm(e){var t=qd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hi(e){e._valueTracker||(e._valueTracker=Nm(e))}function Qd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ji(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mo(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function tu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Cn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jd(e,t){t=t.checked,t!=null&&Ga(e,"checked",t,!1)}function Bo(e,t){Jd(e,t);var n=Cn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Uo(e,t.type,n):t.hasOwnProperty("defaultValue")&&Uo(e,t.type,Cn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function nu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Uo(e,t,n){(t!=="number"||Ji(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Jr=Array.isArray;function gr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Cn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Fo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ru(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(G(92));if(Jr(n)){if(1<n.length)throw Error(G(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Cn(n)}}function Xd(e,t){var n=Cn(t.value),r=Cn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function su(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fi,eh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fi=fi||document.createElement("div"),fi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ps(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_m=["Webkit","ms","Moz","O"];Object.keys(rs).forEach(function(e){_m.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rs[t]=rs[e]})});function th(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||rs.hasOwnProperty(e)&&rs[e]?(""+t).trim():t+"px"}function nh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=th(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var jm=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wo(e,t){if(t){if(jm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Go(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vo=null;function Ka(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ho=null,yr=null,xr=null;function iu(e){if(e=Ds(e)){if(typeof Ho!="function")throw Error(G(280));var t=e.stateNode;t&&(t=Pl(t),Ho(e.stateNode,e.type,t))}}function rh(e){yr?xr?xr.push(e):xr=[e]:yr=e}function sh(){if(yr){var e=yr,t=xr;if(xr=yr=null,iu(e),t)for(e=0;e<t.length;e++)iu(t[e])}}function ih(e,t){return e(t)}function lh(){}var Jl=!1;function oh(e,t,n){if(Jl)return e(t,n);Jl=!0;try{return ih(e,t,n)}finally{Jl=!1,(yr!==null||xr!==null)&&(lh(),sh())}}function ms(e,t){var n=e.stateNode;if(n===null)return null;var r=Pl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(G(231,t,typeof n));return n}var Yo=!1;if(Jt)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{Yo=!1}function Cm(e,t,n,r,s,l,o,c,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var ss=!1,Xi=null,Zi=!1,Ko=null,Em={onError:function(e){ss=!0,Xi=e}};function km(e,t,n,r,s,l,o,c,a){ss=!1,Xi=null,Cm.apply(Em,arguments)}function bm(e,t,n,r,s,l,o,c,a){if(km.apply(this,arguments),ss){if(ss){var u=Xi;ss=!1,Xi=null}else throw Error(G(198));Zi||(Zi=!0,Ko=u)}}function Xn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ah(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lu(e){if(Xn(e)!==e)throw Error(G(188))}function Sm(e){var t=e.alternate;if(!t){if(t=Xn(e),t===null)throw Error(G(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return lu(s),e;if(l===r)return lu(s),t;l=l.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=l;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=l;break}if(c===r){o=!0,r=s,n=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===n){o=!0,n=l,r=s;break}if(c===r){o=!0,r=l,n=s;break}c=c.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?e:t}function ch(e){return e=Sm(e),e!==null?uh(e):null}function uh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uh(e);if(t!==null)return t;e=e.sibling}return null}var dh=ht.unstable_scheduleCallback,ou=ht.unstable_cancelCallback,Rm=ht.unstable_shouldYield,Pm=ht.unstable_requestPaint,Ee=ht.unstable_now,Tm=ht.unstable_getCurrentPriorityLevel,qa=ht.unstable_ImmediatePriority,hh=ht.unstable_UserBlockingPriority,el=ht.unstable_NormalPriority,Im=ht.unstable_LowPriority,fh=ht.unstable_IdlePriority,kl=null,Bt=null;function Om(e){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(kl,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:$m,Am=Math.log,Lm=Math.LN2;function $m(e){return e>>>=0,e===0?32:31-(Am(e)/Lm|0)|0}var pi=64,mi=4194304;function Xr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Xr(c):(l&=o,l!==0&&(r=Xr(l)))}else o=n&~s,o!==0?r=Xr(o):l!==0&&(r=Xr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-It(t),s=1<<n,r|=e[n],t&=~s;return r}function Dm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-It(l),c=1<<o,a=s[o];a===-1?(!(c&n)||c&r)&&(s[o]=Dm(c,t)):a<=t&&(e.expiredLanes|=c),l&=~c}}function qo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ph(){var e=pi;return pi<<=1,!(pi&4194240)&&(pi=64),e}function Xl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ls(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-It(t),e[t]=n}function Bm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-It(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function Qa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-It(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var fe=0;function mh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vh,Ja,gh,yh,xh,Qo=!1,vi=[],mn=null,vn=null,gn=null,vs=new Map,gs=new Map,un=[],Um="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function au(e,t){switch(e){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":vs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gs.delete(t.pointerId)}}function zr(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Ds(t),t!==null&&Ja(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Fm(e,t,n,r,s){switch(t){case"focusin":return mn=zr(mn,e,t,n,r,s),!0;case"dragenter":return vn=zr(vn,e,t,n,r,s),!0;case"mouseover":return gn=zr(gn,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return vs.set(l,zr(vs.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,gs.set(l,zr(gs.get(l)||null,e,t,n,r,s)),!0}return!1}function wh(e){var t=Dn(e.target);if(t!==null){var n=Xn(t);if(n!==null){if(t=n.tag,t===13){if(t=ah(n),t!==null){e.blockedOn=t,xh(e.priority,function(){gh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $i(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Vo=r,n.target.dispatchEvent(r),Vo=null}else return t=Ds(n),t!==null&&Ja(t),e.blockedOn=n,!1;t.shift()}return!0}function cu(e,t,n){$i(e)&&n.delete(t)}function zm(){Qo=!1,mn!==null&&$i(mn)&&(mn=null),vn!==null&&$i(vn)&&(vn=null),gn!==null&&$i(gn)&&(gn=null),vs.forEach(cu),gs.forEach(cu)}function Wr(e,t){e.blockedOn===t&&(e.blockedOn=null,Qo||(Qo=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,zm)))}function ys(e){function t(s){return Wr(s,e)}if(0<vi.length){Wr(vi[0],e);for(var n=1;n<vi.length;n++){var r=vi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(mn!==null&&Wr(mn,e),vn!==null&&Wr(vn,e),gn!==null&&Wr(gn,e),vs.forEach(t),gs.forEach(t),n=0;n<un.length;n++)r=un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<un.length&&(n=un[0],n.blockedOn===null);)wh(n),n.blockedOn===null&&un.shift()}var wr=tn.ReactCurrentBatchConfig,nl=!0;function Wm(e,t,n,r){var s=fe,l=wr.transition;wr.transition=null;try{fe=1,Xa(e,t,n,r)}finally{fe=s,wr.transition=l}}function Gm(e,t,n,r){var s=fe,l=wr.transition;wr.transition=null;try{fe=4,Xa(e,t,n,r)}finally{fe=s,wr.transition=l}}function Xa(e,t,n,r){if(nl){var s=Jo(e,t,n,r);if(s===null)ao(e,t,r,rl,n),au(e,r);else if(Fm(s,e,t,n,r))r.stopPropagation();else if(au(e,r),t&4&&-1<Um.indexOf(e)){for(;s!==null;){var l=Ds(s);if(l!==null&&vh(l),l=Jo(e,t,n,r),l===null&&ao(e,t,r,rl,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else ao(e,t,r,null,n)}}var rl=null;function Jo(e,t,n,r){if(rl=null,e=Ka(r),e=Dn(e),e!==null)if(t=Xn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ah(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rl=e,null}function Nh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tm()){case qa:return 1;case hh:return 4;case el:case Im:return 16;case fh:return 536870912;default:return 16}default:return 16}}var hn=null,Za=null,Di=null;function _h(){if(Di)return Di;var e,t=Za,n=t.length,r,s="value"in hn?hn.value:hn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[l-r];r++);return Di=s.slice(e,1<r?1-r:void 0)}function Mi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gi(){return!0}function uu(){return!1}function pt(e){function t(n,r,s,l,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?gi:uu,this.isPropagationStopped=uu,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),t}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ec=pt(Ir),$s=_e({},Ir,{view:0,detail:0}),Vm=pt($s),Zl,eo,Gr,bl=_e({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gr&&(Gr&&e.type==="mousemove"?(Zl=e.screenX-Gr.screenX,eo=e.screenY-Gr.screenY):eo=Zl=0,Gr=e),Zl)},movementY:function(e){return"movementY"in e?e.movementY:eo}}),du=pt(bl),Hm=_e({},bl,{dataTransfer:0}),Ym=pt(Hm),Km=_e({},$s,{relatedTarget:0}),to=pt(Km),qm=_e({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Qm=pt(qm),Jm=_e({},Ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xm=pt(Jm),Zm=_e({},Ir,{data:0}),hu=pt(Zm),ev={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nv[e])?!!t[e]:!1}function tc(){return rv}var sv=_e({},$s,{key:function(e){if(e.key){var t=ev[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tc,charCode:function(e){return e.type==="keypress"?Mi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),iv=pt(sv),lv=_e({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fu=pt(lv),ov=_e({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tc}),av=pt(ov),cv=_e({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),uv=pt(cv),dv=_e({},bl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hv=pt(dv),fv=[9,13,27,32],nc=Jt&&"CompositionEvent"in window,is=null;Jt&&"documentMode"in document&&(is=document.documentMode);var pv=Jt&&"TextEvent"in window&&!is,jh=Jt&&(!nc||is&&8<is&&11>=is),pu=" ",mu=!1;function Ch(e,t){switch(e){case"keyup":return fv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var or=!1;function mv(e,t){switch(e){case"compositionend":return Eh(t);case"keypress":return t.which!==32?null:(mu=!0,pu);case"textInput":return e=t.data,e===pu&&mu?null:e;default:return null}}function vv(e,t){if(or)return e==="compositionend"||!nc&&Ch(e,t)?(e=_h(),Di=Za=hn=null,or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jh&&t.locale!=="ko"?null:t.data;default:return null}}var gv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gv[e.type]:t==="textarea"}function kh(e,t,n,r){rh(r),t=sl(t,"onChange"),0<t.length&&(n=new ec("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ls=null,xs=null;function yv(e){Dh(e,0)}function Sl(e){var t=ur(e);if(Qd(t))return e}function xv(e,t){if(e==="change")return t}var bh=!1;if(Jt){var no;if(Jt){var ro="oninput"in document;if(!ro){var gu=document.createElement("div");gu.setAttribute("oninput","return;"),ro=typeof gu.oninput=="function"}no=ro}else no=!1;bh=no&&(!document.documentMode||9<document.documentMode)}function yu(){ls&&(ls.detachEvent("onpropertychange",Sh),xs=ls=null)}function Sh(e){if(e.propertyName==="value"&&Sl(xs)){var t=[];kh(t,xs,e,Ka(e)),oh(yv,t)}}function wv(e,t,n){e==="focusin"?(yu(),ls=t,xs=n,ls.attachEvent("onpropertychange",Sh)):e==="focusout"&&yu()}function Nv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sl(xs)}function _v(e,t){if(e==="click")return Sl(t)}function jv(e,t){if(e==="input"||e==="change")return Sl(t)}function Cv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:Cv;function ws(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Oo.call(t,s)||!At(e[s],t[s]))return!1}return!0}function xu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wu(e,t){var n=xu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xu(n)}}function Rh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Rh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ph(){for(var e=window,t=Ji();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ji(e.document)}return t}function rc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ev(e){var t=Ph(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Rh(n.ownerDocument.documentElement,n)){if(r!==null&&rc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=wu(n,l);var o=wu(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kv=Jt&&"documentMode"in document&&11>=document.documentMode,ar=null,Xo=null,os=null,Zo=!1;function Nu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zo||ar==null||ar!==Ji(r)||(r=ar,"selectionStart"in r&&rc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),os&&ws(os,r)||(os=r,r=sl(Xo,"onSelect"),0<r.length&&(t=new ec("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function yi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionend:yi("Transition","TransitionEnd")},so={},Th={};Jt&&(Th=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);function Rl(e){if(so[e])return so[e];if(!cr[e])return e;var t=cr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Th)return so[e]=t[n];return e}var Ih=Rl("animationend"),Oh=Rl("animationiteration"),Ah=Rl("animationstart"),Lh=Rl("transitionend"),$h=new Map,_u="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(e,t){$h.set(e,t),Jn(t,[e])}for(var io=0;io<_u.length;io++){var lo=_u[io],bv=lo.toLowerCase(),Sv=lo[0].toUpperCase()+lo.slice(1);kn(bv,"on"+Sv)}kn(Ih,"onAnimationEnd");kn(Oh,"onAnimationIteration");kn(Ah,"onAnimationStart");kn("dblclick","onDoubleClick");kn("focusin","onFocus");kn("focusout","onBlur");kn(Lh,"onTransitionEnd");jr("onMouseEnter",["mouseout","mouseover"]);jr("onMouseLeave",["mouseout","mouseover"]);jr("onPointerEnter",["pointerout","pointerover"]);jr("onPointerLeave",["pointerout","pointerover"]);Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zr));function ju(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,bm(r,t,void 0,e),e.currentTarget=null}function Dh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],a=c.instance,u=c.currentTarget;if(c=c.listener,a!==l&&s.isPropagationStopped())break e;ju(s,c,u),l=a}else for(o=0;o<r.length;o++){if(c=r[o],a=c.instance,u=c.currentTarget,c=c.listener,a!==l&&s.isPropagationStopped())break e;ju(s,c,u),l=a}}}if(Zi)throw e=Ko,Zi=!1,Ko=null,e}function me(e,t){var n=t[sa];n===void 0&&(n=t[sa]=new Set);var r=e+"__bubble";n.has(r)||(Mh(t,e,2,!1),n.add(r))}function oo(e,t,n){var r=0;t&&(r|=4),Mh(n,e,r,t)}var xi="_reactListening"+Math.random().toString(36).slice(2);function Ns(e){if(!e[xi]){e[xi]=!0,Vd.forEach(function(n){n!=="selectionchange"&&(Rv.has(n)||oo(n,!1,e),oo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xi]||(t[xi]=!0,oo("selectionchange",!1,t))}}function Mh(e,t,n,r){switch(Nh(t)){case 1:var s=Wm;break;case 4:s=Gm;break;default:s=Xa}n=s.bind(null,t,n,e),s=void 0,!Yo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ao(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Dn(c),o===null)return;if(a=o.tag,a===5||a===6){r=l=o;continue e}c=c.parentNode}}r=r.return}oh(function(){var u=l,h=Ka(n),f=[];e:{var d=$h.get(e);if(d!==void 0){var g=ec,m=e;switch(e){case"keypress":if(Mi(n)===0)break e;case"keydown":case"keyup":g=iv;break;case"focusin":m="focus",g=to;break;case"focusout":m="blur",g=to;break;case"beforeblur":case"afterblur":g=to;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Ym;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=av;break;case Ih:case Oh:case Ah:g=Qm;break;case Lh:g=uv;break;case"scroll":g=Vm;break;case"wheel":g=hv;break;case"copy":case"cut":case"paste":g=Xm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=fu}var N=(t&4)!==0,E=!N&&e==="scroll",v=N?d!==null?d+"Capture":null:d;N=[];for(var p=u,_;p!==null;){_=p;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,v!==null&&(x=ms(p,v),x!=null&&N.push(_s(p,x,_)))),E)break;p=p.return}0<N.length&&(d=new g(d,m,null,n,h),f.push({event:d,listeners:N}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",d&&n!==Vo&&(m=n.relatedTarget||n.fromElement)&&(Dn(m)||m[Xt]))break e;if((g||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,g?(m=n.relatedTarget||n.toElement,g=u,m=m?Dn(m):null,m!==null&&(E=Xn(m),m!==E||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=u),g!==m)){if(N=du,x="onMouseLeave",v="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(N=fu,x="onPointerLeave",v="onPointerEnter",p="pointer"),E=g==null?d:ur(g),_=m==null?d:ur(m),d=new N(x,p+"leave",g,n,h),d.target=E,d.relatedTarget=_,x=null,Dn(h)===u&&(N=new N(v,p+"enter",m,n,h),N.target=_,N.relatedTarget=E,x=N),E=x,g&&m)t:{for(N=g,v=m,p=0,_=N;_;_=rr(_))p++;for(_=0,x=v;x;x=rr(x))_++;for(;0<p-_;)N=rr(N),p--;for(;0<_-p;)v=rr(v),_--;for(;p--;){if(N===v||v!==null&&N===v.alternate)break t;N=rr(N),v=rr(v)}N=null}else N=null;g!==null&&Cu(f,d,g,N,!1),m!==null&&E!==null&&Cu(f,E,m,N,!0)}}e:{if(d=u?ur(u):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var k=xv;else if(vu(d))if(bh)k=jv;else{k=Nv;var L=wv}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(k=_v);if(k&&(k=k(e,u))){kh(f,k,n,h);break e}L&&L(e,d,u),e==="focusout"&&(L=d._wrapperState)&&L.controlled&&d.type==="number"&&Uo(d,"number",d.value)}switch(L=u?ur(u):window,e){case"focusin":(vu(L)||L.contentEditable==="true")&&(ar=L,Xo=u,os=null);break;case"focusout":os=Xo=ar=null;break;case"mousedown":Zo=!0;break;case"contextmenu":case"mouseup":case"dragend":Zo=!1,Nu(f,n,h);break;case"selectionchange":if(kv)break;case"keydown":case"keyup":Nu(f,n,h)}var y;if(nc)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else or?Ch(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(jh&&n.locale!=="ko"&&(or||A!=="onCompositionStart"?A==="onCompositionEnd"&&or&&(y=_h()):(hn=h,Za="value"in hn?hn.value:hn.textContent,or=!0)),L=sl(u,A),0<L.length&&(A=new hu(A,e,null,n,h),f.push({event:A,listeners:L}),y?A.data=y:(y=Eh(n),y!==null&&(A.data=y)))),(y=pv?mv(e,n):vv(e,n))&&(u=sl(u,"onBeforeInput"),0<u.length&&(h=new hu("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=y))}Dh(f,t)})}function _s(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=ms(e,n),l!=null&&r.unshift(_s(e,l,s)),l=ms(e,t),l!=null&&r.push(_s(e,l,s))),e=e.return}return r}function rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cu(e,t,n,r,s){for(var l=t._reactName,o=[];n!==null&&n!==r;){var c=n,a=c.alternate,u=c.stateNode;if(a!==null&&a===r)break;c.tag===5&&u!==null&&(c=u,s?(a=ms(n,l),a!=null&&o.unshift(_s(n,a,c))):s||(a=ms(n,l),a!=null&&o.push(_s(n,a,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Pv=/\r\n?/g,Tv=/\u0000|\uFFFD/g;function Eu(e){return(typeof e=="string"?e:""+e).replace(Pv,`
`).replace(Tv,"")}function wi(e,t,n){if(t=Eu(t),Eu(e)!==t&&n)throw Error(G(425))}function il(){}var ea=null,ta=null;function na(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ra=typeof setTimeout=="function"?setTimeout:void 0,Iv=typeof clearTimeout=="function"?clearTimeout:void 0,ku=typeof Promise=="function"?Promise:void 0,Ov=typeof queueMicrotask=="function"?queueMicrotask:typeof ku<"u"?function(e){return ku.resolve(null).then(e).catch(Av)}:ra;function Av(e){setTimeout(function(){throw e})}function co(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ys(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ys(t)}function yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Or=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Or,js="__reactProps$"+Or,Xt="__reactContainer$"+Or,sa="__reactEvents$"+Or,Lv="__reactListeners$"+Or,$v="__reactHandles$"+Or;function Dn(e){var t=e[Mt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xt]||n[Mt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bu(e);e!==null;){if(n=e[Mt])return n;e=bu(e)}return t}e=n,n=e.parentNode}return null}function Ds(e){return e=e[Mt]||e[Xt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ur(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function Pl(e){return e[js]||null}var ia=[],dr=-1;function bn(e){return{current:e}}function ve(e){0>dr||(e.current=ia[dr],ia[dr]=null,dr--)}function pe(e,t){dr++,ia[dr]=e.current,e.current=t}var En={},Ke=bn(En),st=bn(!1),Vn=En;function Cr(e,t){var n=e.type.contextTypes;if(!n)return En;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function it(e){return e=e.childContextTypes,e!=null}function ll(){ve(st),ve(Ke)}function Su(e,t,n){if(Ke.current!==En)throw Error(G(168));pe(Ke,t),pe(st,n)}function Bh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(G(108,wm(e)||"Unknown",s));return _e({},n,r)}function ol(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||En,Vn=Ke.current,pe(Ke,e),pe(st,st.current),!0}function Ru(e,t,n){var r=e.stateNode;if(!r)throw Error(G(169));n?(e=Bh(e,t,Vn),r.__reactInternalMemoizedMergedChildContext=e,ve(st),ve(Ke),pe(Ke,e)):ve(st),pe(st,n)}var Yt=null,Tl=!1,uo=!1;function Uh(e){Yt===null?Yt=[e]:Yt.push(e)}function Dv(e){Tl=!0,Uh(e)}function Sn(){if(!uo&&Yt!==null){uo=!0;var e=0,t=fe;try{var n=Yt;for(fe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yt=null,Tl=!1}catch(s){throw Yt!==null&&(Yt=Yt.slice(e+1)),dh(qa,Sn),s}finally{fe=t,uo=!1}}return null}var hr=[],fr=0,al=null,cl=0,yt=[],xt=0,Hn=null,Kt=1,qt="";function Ln(e,t){hr[fr++]=cl,hr[fr++]=al,al=e,cl=t}function Fh(e,t,n){yt[xt++]=Kt,yt[xt++]=qt,yt[xt++]=Hn,Hn=e;var r=Kt;e=qt;var s=32-It(r)-1;r&=~(1<<s),n+=1;var l=32-It(t)+s;if(30<l){var o=s-s%5;l=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Kt=1<<32-It(t)+s|n<<s|r,qt=l+e}else Kt=1<<l|n<<s|r,qt=e}function sc(e){e.return!==null&&(Ln(e,1),Fh(e,1,0))}function ic(e){for(;e===al;)al=hr[--fr],hr[fr]=null,cl=hr[--fr],hr[fr]=null;for(;e===Hn;)Hn=yt[--xt],yt[xt]=null,qt=yt[--xt],yt[xt]=null,Kt=yt[--xt],yt[xt]=null}var dt=null,ut=null,xe=!1,Tt=null;function zh(e,t){var n=Nt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Pu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dt=e,ut=yn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dt=e,ut=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Hn!==null?{id:Kt,overflow:qt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Nt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,dt=e,ut=null,!0):!1;default:return!1}}function la(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oa(e){if(xe){var t=ut;if(t){var n=t;if(!Pu(e,t)){if(la(e))throw Error(G(418));t=yn(n.nextSibling);var r=dt;t&&Pu(e,t)?zh(r,n):(e.flags=e.flags&-4097|2,xe=!1,dt=e)}}else{if(la(e))throw Error(G(418));e.flags=e.flags&-4097|2,xe=!1,dt=e}}}function Tu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dt=e}function Ni(e){if(e!==dt)return!1;if(!xe)return Tu(e),xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!na(e.type,e.memoizedProps)),t&&(t=ut)){if(la(e))throw Wh(),Error(G(418));for(;t;)zh(e,t),t=yn(t.nextSibling)}if(Tu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ut=yn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ut=null}}else ut=dt?yn(e.stateNode.nextSibling):null;return!0}function Wh(){for(var e=ut;e;)e=yn(e.nextSibling)}function Er(){ut=dt=null,xe=!1}function lc(e){Tt===null?Tt=[e]:Tt.push(e)}var Mv=tn.ReactCurrentBatchConfig;function Vr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=s.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,e))}return e}function _i(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Iu(e){var t=e._init;return t(e._payload)}function Gh(e){function t(v,p){if(e){var _=v.deletions;_===null?(v.deletions=[p],v.flags|=16):_.push(p)}}function n(v,p){if(!e)return null;for(;p!==null;)t(v,p),p=p.sibling;return null}function r(v,p){for(v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function s(v,p){return v=_n(v,p),v.index=0,v.sibling=null,v}function l(v,p,_){return v.index=_,e?(_=v.alternate,_!==null?(_=_.index,_<p?(v.flags|=2,p):_):(v.flags|=2,p)):(v.flags|=1048576,p)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function c(v,p,_,x){return p===null||p.tag!==6?(p=yo(_,v.mode,x),p.return=v,p):(p=s(p,_),p.return=v,p)}function a(v,p,_,x){var k=_.type;return k===lr?h(v,p,_.props.children,x,_.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===on&&Iu(k)===p.type)?(x=s(p,_.props),x.ref=Vr(v,p,_),x.return=v,x):(x=Vi(_.type,_.key,_.props,null,v.mode,x),x.ref=Vr(v,p,_),x.return=v,x)}function u(v,p,_,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==_.containerInfo||p.stateNode.implementation!==_.implementation?(p=xo(_,v.mode,x),p.return=v,p):(p=s(p,_.children||[]),p.return=v,p)}function h(v,p,_,x,k){return p===null||p.tag!==7?(p=Fn(_,v.mode,x,k),p.return=v,p):(p=s(p,_),p.return=v,p)}function f(v,p,_){if(typeof p=="string"&&p!==""||typeof p=="number")return p=yo(""+p,v.mode,_),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case di:return _=Vi(p.type,p.key,p.props,null,v.mode,_),_.ref=Vr(v,null,p),_.return=v,_;case ir:return p=xo(p,v.mode,_),p.return=v,p;case on:var x=p._init;return f(v,x(p._payload),_)}if(Jr(p)||Ur(p))return p=Fn(p,v.mode,_,null),p.return=v,p;_i(v,p)}return null}function d(v,p,_,x){var k=p!==null?p.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return k!==null?null:c(v,p,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case di:return _.key===k?a(v,p,_,x):null;case ir:return _.key===k?u(v,p,_,x):null;case on:return k=_._init,d(v,p,k(_._payload),x)}if(Jr(_)||Ur(_))return k!==null?null:h(v,p,_,x,null);_i(v,_)}return null}function g(v,p,_,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(_)||null,c(p,v,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case di:return v=v.get(x.key===null?_:x.key)||null,a(p,v,x,k);case ir:return v=v.get(x.key===null?_:x.key)||null,u(p,v,x,k);case on:var L=x._init;return g(v,p,_,L(x._payload),k)}if(Jr(x)||Ur(x))return v=v.get(_)||null,h(p,v,x,k,null);_i(p,x)}return null}function m(v,p,_,x){for(var k=null,L=null,y=p,A=p=0,j=null;y!==null&&A<_.length;A++){y.index>A?(j=y,y=null):j=y.sibling;var T=d(v,y,_[A],x);if(T===null){y===null&&(y=j);break}e&&y&&T.alternate===null&&t(v,y),p=l(T,p,A),L===null?k=T:L.sibling=T,L=T,y=j}if(A===_.length)return n(v,y),xe&&Ln(v,A),k;if(y===null){for(;A<_.length;A++)y=f(v,_[A],x),y!==null&&(p=l(y,p,A),L===null?k=y:L.sibling=y,L=y);return xe&&Ln(v,A),k}for(y=r(v,y);A<_.length;A++)j=g(y,v,A,_[A],x),j!==null&&(e&&j.alternate!==null&&y.delete(j.key===null?A:j.key),p=l(j,p,A),L===null?k=j:L.sibling=j,L=j);return e&&y.forEach(function(F){return t(v,F)}),xe&&Ln(v,A),k}function N(v,p,_,x){var k=Ur(_);if(typeof k!="function")throw Error(G(150));if(_=k.call(_),_==null)throw Error(G(151));for(var L=k=null,y=p,A=p=0,j=null,T=_.next();y!==null&&!T.done;A++,T=_.next()){y.index>A?(j=y,y=null):j=y.sibling;var F=d(v,y,T.value,x);if(F===null){y===null&&(y=j);break}e&&y&&F.alternate===null&&t(v,y),p=l(F,p,A),L===null?k=F:L.sibling=F,L=F,y=j}if(T.done)return n(v,y),xe&&Ln(v,A),k;if(y===null){for(;!T.done;A++,T=_.next())T=f(v,T.value,x),T!==null&&(p=l(T,p,A),L===null?k=T:L.sibling=T,L=T);return xe&&Ln(v,A),k}for(y=r(v,y);!T.done;A++,T=_.next())T=g(y,v,A,T.value,x),T!==null&&(e&&T.alternate!==null&&y.delete(T.key===null?A:T.key),p=l(T,p,A),L===null?k=T:L.sibling=T,L=T);return e&&y.forEach(function(O){return t(v,O)}),xe&&Ln(v,A),k}function E(v,p,_,x){if(typeof _=="object"&&_!==null&&_.type===lr&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case di:e:{for(var k=_.key,L=p;L!==null;){if(L.key===k){if(k=_.type,k===lr){if(L.tag===7){n(v,L.sibling),p=s(L,_.props.children),p.return=v,v=p;break e}}else if(L.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===on&&Iu(k)===L.type){n(v,L.sibling),p=s(L,_.props),p.ref=Vr(v,L,_),p.return=v,v=p;break e}n(v,L);break}else t(v,L);L=L.sibling}_.type===lr?(p=Fn(_.props.children,v.mode,x,_.key),p.return=v,v=p):(x=Vi(_.type,_.key,_.props,null,v.mode,x),x.ref=Vr(v,p,_),x.return=v,v=x)}return o(v);case ir:e:{for(L=_.key;p!==null;){if(p.key===L)if(p.tag===4&&p.stateNode.containerInfo===_.containerInfo&&p.stateNode.implementation===_.implementation){n(v,p.sibling),p=s(p,_.children||[]),p.return=v,v=p;break e}else{n(v,p);break}else t(v,p);p=p.sibling}p=xo(_,v.mode,x),p.return=v,v=p}return o(v);case on:return L=_._init,E(v,p,L(_._payload),x)}if(Jr(_))return m(v,p,_,x);if(Ur(_))return N(v,p,_,x);_i(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,p!==null&&p.tag===6?(n(v,p.sibling),p=s(p,_),p.return=v,v=p):(n(v,p),p=yo(_,v.mode,x),p.return=v,v=p),o(v)):n(v,p)}return E}var kr=Gh(!0),Vh=Gh(!1),ul=bn(null),dl=null,pr=null,oc=null;function ac(){oc=pr=dl=null}function cc(e){var t=ul.current;ve(ul),e._currentValue=t}function aa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Nr(e,t){dl=e,oc=pr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rt=!0),e.firstContext=null)}function jt(e){var t=e._currentValue;if(oc!==e)if(e={context:e,memoizedValue:t,next:null},pr===null){if(dl===null)throw Error(G(308));pr=e,dl.dependencies={lanes:0,firstContext:e}}else pr=pr.next=e;return t}var Mn=null;function uc(e){Mn===null?Mn=[e]:Mn.push(e)}function Hh(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,uc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Zt(e,r)}function Zt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var an=!1;function dc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Zt(e,n)}return s=r.interleaved,s===null?(t.next=t,uc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Zt(e,n)}function Bi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Qa(e,n)}}function Ou(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function hl(e,t,n,r){var s=e.updateQueue;an=!1;var l=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var a=c,u=a.next;a.next=null,o===null?l=u:o.next=u,o=a;var h=e.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==o&&(c===null?h.firstBaseUpdate=u:c.next=u,h.lastBaseUpdate=a))}if(l!==null){var f=s.baseState;o=0,h=u=a=null,c=l;do{var d=c.lane,g=c.eventTime;if((r&d)===d){h!==null&&(h=h.next={eventTime:g,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var m=e,N=c;switch(d=t,g=n,N.tag){case 1:if(m=N.payload,typeof m=="function"){f=m.call(g,f,d);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=N.payload,d=typeof m=="function"?m.call(g,f,d):m,d==null)break e;f=_e({},f,d);break e;case 2:an=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,d=s.effects,d===null?s.effects=[c]:d.push(c))}else g={eventTime:g,lane:d,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(u=h=g,a=f):h=h.next=g,o|=d;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;d=c,c=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(h===null&&(a=f),s.baseState=a,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Kn|=o,e.lanes=o,e.memoizedState=f}}function Au(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var Ms={},Ut=bn(Ms),Cs=bn(Ms),Es=bn(Ms);function Bn(e){if(e===Ms)throw Error(G(174));return e}function hc(e,t){switch(pe(Es,t),pe(Cs,e),pe(Ut,Ms),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zo(t,e)}ve(Ut),pe(Ut,t)}function br(){ve(Ut),ve(Cs),ve(Es)}function Kh(e){Bn(Es.current);var t=Bn(Ut.current),n=zo(t,e.type);t!==n&&(pe(Cs,e),pe(Ut,n))}function fc(e){Cs.current===e&&(ve(Ut),ve(Cs))}var we=bn(0);function fl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ho=[];function pc(){for(var e=0;e<ho.length;e++)ho[e]._workInProgressVersionPrimary=null;ho.length=0}var Ui=tn.ReactCurrentDispatcher,fo=tn.ReactCurrentBatchConfig,Yn=0,Ne=null,Ie=null,De=null,pl=!1,as=!1,ks=0,Bv=0;function Ge(){throw Error(G(321))}function mc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!At(e[n],t[n]))return!1;return!0}function vc(e,t,n,r,s,l){if(Yn=l,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ui.current=e===null||e.memoizedState===null?Wv:Gv,e=n(r,s),as){l=0;do{if(as=!1,ks=0,25<=l)throw Error(G(301));l+=1,De=Ie=null,t.updateQueue=null,Ui.current=Vv,e=n(r,s)}while(as)}if(Ui.current=ml,t=Ie!==null&&Ie.next!==null,Yn=0,De=Ie=Ne=null,pl=!1,t)throw Error(G(300));return e}function gc(){var e=ks!==0;return ks=0,e}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?Ne.memoizedState=De=e:De=De.next=e,De}function Ct(){if(Ie===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=De===null?Ne.memoizedState:De.next;if(t!==null)De=t,Ie=e;else{if(e===null)throw Error(G(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},De===null?Ne.memoizedState=De=e:De=De.next=e}return De}function bs(e,t){return typeof t=="function"?t(e):t}function po(e){var t=Ct(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=Ie,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var o=s.next;s.next=l.next,l.next=o}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var c=o=null,a=null,u=l;do{var h=u.lane;if((Yn&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(c=a=f,o=r):a=a.next=f,Ne.lanes|=h,Kn|=h}u=u.next}while(u!==null&&u!==l);a===null?o=r:a.next=c,At(r,t.memoizedState)||(rt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Ne.lanes|=l,Kn|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function mo(e){var t=Ct(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do l=e(l,o.action),o=o.next;while(o!==s);At(l,t.memoizedState)||(rt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function qh(){}function Qh(e,t){var n=Ne,r=Ct(),s=t(),l=!At(r.memoizedState,s);if(l&&(r.memoizedState=s,rt=!0),r=r.queue,yc(Zh.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||De!==null&&De.memoizedState.tag&1){if(n.flags|=2048,Ss(9,Xh.bind(null,n,r,s,t),void 0,null),Me===null)throw Error(G(349));Yn&30||Jh(n,t,s)}return s}function Jh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Xh(e,t,n,r){t.value=n,t.getSnapshot=r,ef(t)&&tf(e)}function Zh(e,t,n){return n(function(){ef(t)&&tf(e)})}function ef(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!At(e,n)}catch{return!0}}function tf(e){var t=Zt(e,1);t!==null&&Ot(t,e,1,-1)}function Lu(e){var t=Dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=zv.bind(null,Ne,e),[t.memoizedState,e]}function Ss(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function nf(){return Ct().memoizedState}function Fi(e,t,n,r){var s=Dt();Ne.flags|=e,s.memoizedState=Ss(1|t,n,void 0,r===void 0?null:r)}function Il(e,t,n,r){var s=Ct();r=r===void 0?null:r;var l=void 0;if(Ie!==null){var o=Ie.memoizedState;if(l=o.destroy,r!==null&&mc(r,o.deps)){s.memoizedState=Ss(t,n,l,r);return}}Ne.flags|=e,s.memoizedState=Ss(1|t,n,l,r)}function $u(e,t){return Fi(8390656,8,e,t)}function yc(e,t){return Il(2048,8,e,t)}function rf(e,t){return Il(4,2,e,t)}function sf(e,t){return Il(4,4,e,t)}function lf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function of(e,t,n){return n=n!=null?n.concat([e]):null,Il(4,4,lf.bind(null,t,e),n)}function xc(){}function af(e,t){var n=Ct();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cf(e,t){var n=Ct();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function uf(e,t,n){return Yn&21?(At(n,t)||(n=ph(),Ne.lanes|=n,Kn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rt=!0),e.memoizedState=n)}function Uv(e,t){var n=fe;fe=n!==0&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{fe=n,fo.transition=r}}function df(){return Ct().memoizedState}function Fv(e,t,n){var r=Nn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hf(e))ff(t,n);else if(n=Hh(e,t,n,r),n!==null){var s=Je();Ot(n,e,r,s),pf(n,t,r)}}function zv(e,t,n){var r=Nn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hf(e))ff(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,n);if(s.hasEagerState=!0,s.eagerState=c,At(c,o)){var a=t.interleaved;a===null?(s.next=s,uc(t)):(s.next=a.next,a.next=s),t.interleaved=s;return}}catch{}finally{}n=Hh(e,t,s,r),n!==null&&(s=Je(),Ot(n,e,r,s),pf(n,t,r))}}function hf(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function ff(e,t){as=pl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Qa(e,n)}}var ml={readContext:jt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},Wv={readContext:jt,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:$u,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Fi(4194308,4,lf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fi(4,2,e,t)},useMemo:function(e,t){var n=Dt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Fv.bind(null,Ne,e),[r.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:Lu,useDebugValue:xc,useDeferredValue:function(e){return Dt().memoizedState=e},useTransition:function(){var e=Lu(!1),t=e[0];return e=Uv.bind(null,e[1]),Dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ne,s=Dt();if(xe){if(n===void 0)throw Error(G(407));n=n()}else{if(n=t(),Me===null)throw Error(G(349));Yn&30||Jh(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,$u(Zh.bind(null,r,l,e),[e]),r.flags|=2048,Ss(9,Xh.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Dt(),t=Me.identifierPrefix;if(xe){var n=qt,r=Kt;n=(r&~(1<<32-It(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ks++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Bv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Gv={readContext:jt,useCallback:af,useContext:jt,useEffect:yc,useImperativeHandle:of,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:cf,useReducer:po,useRef:nf,useState:function(){return po(bs)},useDebugValue:xc,useDeferredValue:function(e){var t=Ct();return uf(t,Ie.memoizedState,e)},useTransition:function(){var e=po(bs)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:qh,useSyncExternalStore:Qh,useId:df,unstable_isNewReconciler:!1},Vv={readContext:jt,useCallback:af,useContext:jt,useEffect:yc,useImperativeHandle:of,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:cf,useReducer:mo,useRef:nf,useState:function(){return mo(bs)},useDebugValue:xc,useDeferredValue:function(e){var t=Ct();return Ie===null?t.memoizedState=e:uf(t,Ie.memoizedState,e)},useTransition:function(){var e=mo(bs)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:qh,useSyncExternalStore:Qh,useId:df,unstable_isNewReconciler:!1};function St(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ca(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ol={isMounted:function(e){return(e=e._reactInternals)?Xn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Je(),s=Nn(e),l=Qt(r,s);l.payload=t,n!=null&&(l.callback=n),t=xn(e,l,s),t!==null&&(Ot(t,e,s,r),Bi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Je(),s=Nn(e),l=Qt(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=xn(e,l,s),t!==null&&(Ot(t,e,s,r),Bi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Je(),r=Nn(e),s=Qt(n,r);s.tag=2,t!=null&&(s.callback=t),t=xn(e,s,r),t!==null&&(Ot(t,e,r,n),Bi(t,e,r))}};function Du(e,t,n,r,s,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!ws(n,r)||!ws(s,l):!0}function mf(e,t,n){var r=!1,s=En,l=t.contextType;return typeof l=="object"&&l!==null?l=jt(l):(s=it(t)?Vn:Ke.current,r=t.contextTypes,l=(r=r!=null)?Cr(e,s):En),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ol,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Mu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ol.enqueueReplaceState(t,t.state,null)}function ua(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},dc(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=jt(l):(l=it(t)?Vn:Ke.current,s.context=Cr(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ca(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ol.enqueueReplaceState(s,s.state,null),hl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Sr(e,t){try{var n="",r=t;do n+=xm(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function vo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Hv=typeof WeakMap=="function"?WeakMap:Map;function vf(e,t,n){n=Qt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){gl||(gl=!0,Na=r),da(e,t)},n}function gf(e,t,n){n=Qt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){da(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){da(e,t),typeof r!="function"&&(wn===null?wn=new Set([this]):wn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Bu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Hv;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=lg.bind(null,e,t,n),t.then(e,e))}function Uu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qt(-1,1),t.tag=2,xn(n,t,1))),n.lanes|=1),e)}var Yv=tn.ReactCurrentOwner,rt=!1;function Qe(e,t,n,r){t.child=e===null?Vh(t,null,n,r):kr(t,e.child,n,r)}function zu(e,t,n,r,s){n=n.render;var l=t.ref;return Nr(t,s),r=vc(e,t,n,r,l,s),n=gc(),e!==null&&!rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,en(e,t,s)):(xe&&n&&sc(t),t.flags|=1,Qe(e,t,r,s),t.child)}function Wu(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!bc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,yf(e,t,l,r,s)):(e=Vi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:ws,n(o,r)&&e.ref===t.ref)return en(e,t,s)}return t.flags|=1,e=_n(l,r),e.ref=t.ref,e.return=t,t.child=e}function yf(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(ws(l,r)&&e.ref===t.ref)if(rt=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(rt=!0);else return t.lanes=e.lanes,en(e,t,s)}return ha(e,t,n,r,s)}function xf(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(vr,ct),ct|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pe(vr,ct),ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,pe(vr,ct),ct|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,pe(vr,ct),ct|=r;return Qe(e,t,s,n),t.child}function wf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ha(e,t,n,r,s){var l=it(n)?Vn:Ke.current;return l=Cr(t,l),Nr(t,s),n=vc(e,t,n,r,l,s),r=gc(),e!==null&&!rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,en(e,t,s)):(xe&&r&&sc(t),t.flags|=1,Qe(e,t,n,s),t.child)}function Gu(e,t,n,r,s){if(it(n)){var l=!0;ol(t)}else l=!1;if(Nr(t,s),t.stateNode===null)zi(e,t),mf(t,n,r),ua(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=jt(u):(u=it(n)?Vn:Ke.current,u=Cr(t,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||a!==u)&&Mu(t,o,r,u),an=!1;var d=t.memoizedState;o.state=d,hl(t,r,o,s),a=t.memoizedState,c!==r||d!==a||st.current||an?(typeof h=="function"&&(ca(t,n,h,r),a=t.memoizedState),(c=an||Du(t,n,c,r,d,a,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Yh(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:St(t.type,c),o.props=u,f=t.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=jt(a):(a=it(n)?Vn:Ke.current,a=Cr(t,a));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==f||d!==a)&&Mu(t,o,r,a),an=!1,d=t.memoizedState,o.state=d,hl(t,r,o,s);var m=t.memoizedState;c!==f||d!==m||st.current||an?(typeof g=="function"&&(ca(t,n,g,r),m=t.memoizedState),(u=an||Du(t,n,u,r,d,m,a)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return fa(e,t,n,r,l,s)}function fa(e,t,n,r,s,l){wf(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Ru(t,n,!1),en(e,t,l);r=t.stateNode,Yv.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=kr(t,e.child,null,l),t.child=kr(t,null,c,l)):Qe(e,t,c,l),t.memoizedState=r.state,s&&Ru(t,n,!0),t.child}function Nf(e){var t=e.stateNode;t.pendingContext?Su(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Su(e,t.context,!1),hc(e,t.containerInfo)}function Vu(e,t,n,r,s){return Er(),lc(s),t.flags|=256,Qe(e,t,n,r),t.child}var pa={dehydrated:null,treeContext:null,retryLane:0};function ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function _f(e,t,n){var r=t.pendingProps,s=we.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),pe(we,s&1),e===null)return oa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=$l(o,r,0,null),e=Fn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ma(n),t.memoizedState=pa,e):wc(t,o));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return Kv(e,t,o,r,c,s,n);if(l){l=r.fallback,o=t.mode,s=e.child,c=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=_n(s,a),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?l=_n(c,l):(l=Fn(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?ma(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=pa,r}return l=e.child,e=l.sibling,r=_n(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function wc(e,t){return t=$l({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ji(e,t,n,r){return r!==null&&lc(r),kr(t,e.child,null,n),e=wc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kv(e,t,n,r,s,l,o){if(n)return t.flags&256?(t.flags&=-257,r=vo(Error(G(422))),ji(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=$l({mode:"visible",children:r.children},s,0,null),l=Fn(l,s,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&kr(t,e.child,null,o),t.child.memoizedState=ma(o),t.memoizedState=pa,l);if(!(t.mode&1))return ji(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,l=Error(G(419)),r=vo(l,r,void 0),ji(e,t,o,r)}if(c=(o&e.childLanes)!==0,rt||c){if(r=Me,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,Zt(e,s),Ot(r,e,s,-1))}return kc(),r=vo(Error(G(421))),ji(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=og.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,ut=yn(s.nextSibling),dt=t,xe=!0,Tt=null,e!==null&&(yt[xt++]=Kt,yt[xt++]=qt,yt[xt++]=Hn,Kt=e.id,qt=e.overflow,Hn=t),t=wc(t,r.children),t.flags|=4096,t)}function Hu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),aa(e.return,t,n)}function go(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function jf(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(Qe(e,t,r.children,n),r=we.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hu(e,n,t);else if(e.tag===19)Hu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pe(we,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&fl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),go(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&fl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}go(t,!0,n,null,l);break;case"together":go(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function en(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,n=_n(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=_n(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function qv(e,t,n){switch(t.tag){case 3:Nf(t),Er();break;case 5:Kh(t);break;case 1:it(t.type)&&ol(t);break;case 4:hc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;pe(ul,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(pe(we,we.current&1),t.flags|=128,null):n&t.child.childLanes?_f(e,t,n):(pe(we,we.current&1),e=en(e,t,n),e!==null?e.sibling:null);pe(we,we.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return jf(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pe(we,we.current),r)break;return null;case 22:case 23:return t.lanes=0,xf(e,t,n)}return en(e,t,n)}var Cf,va,Ef,kf;Cf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};va=function(){};Ef=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Bn(Ut.current);var l=null;switch(n){case"input":s=Mo(e,s),r=Mo(e,r),l=[];break;case"select":s=_e({},s,{value:void 0}),r=_e({},r,{value:void 0}),l=[];break;case"textarea":s=Fo(e,s),r=Fo(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=il)}Wo(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var c=s[u];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fs.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var a=r[u];if(c=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&a!==c&&(a!=null||c!=null))if(u==="style")if(c){for(o in c)!c.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&c[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(l||(l=[]),l.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,c=c?c.__html:void 0,a!=null&&c!==a&&(l=l||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(l=l||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fs.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&me("scroll",e),l||c===a||(l=[])):(l=l||[]).push(u,a))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};kf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Hr(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ve(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qv(e,t,n){var r=t.pendingProps;switch(ic(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(t),null;case 1:return it(t.type)&&ll(),Ve(t),null;case 3:return r=t.stateNode,br(),ve(st),ve(Ke),pc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ni(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tt!==null&&(Ca(Tt),Tt=null))),va(e,t),Ve(t),null;case 5:fc(t);var s=Bn(Es.current);if(n=t.type,e!==null&&t.stateNode!=null)Ef(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(G(166));return Ve(t),null}if(e=Bn(Ut.current),Ni(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Mt]=t,r[js]=l,e=(t.mode&1)!==0,n){case"dialog":me("cancel",r),me("close",r);break;case"iframe":case"object":case"embed":me("load",r);break;case"video":case"audio":for(s=0;s<Zr.length;s++)me(Zr[s],r);break;case"source":me("error",r);break;case"img":case"image":case"link":me("error",r),me("load",r);break;case"details":me("toggle",r);break;case"input":tu(r,l),me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},me("invalid",r);break;case"textarea":ru(r,l),me("invalid",r)}Wo(n,l),s=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?r.textContent!==c&&(l.suppressHydrationWarning!==!0&&wi(r.textContent,c,e),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&wi(r.textContent,c,e),s=["children",""+c]):fs.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&me("scroll",r)}switch(n){case"input":hi(r),nu(r,l,!0);break;case"textarea":hi(r),su(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=il)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Mt]=t,e[js]=r,Cf(e,t,!1,!1),t.stateNode=e;e:{switch(o=Go(n,r),n){case"dialog":me("cancel",e),me("close",e),s=r;break;case"iframe":case"object":case"embed":me("load",e),s=r;break;case"video":case"audio":for(s=0;s<Zr.length;s++)me(Zr[s],e);s=r;break;case"source":me("error",e),s=r;break;case"img":case"image":case"link":me("error",e),me("load",e),s=r;break;case"details":me("toggle",e),s=r;break;case"input":tu(e,r),s=Mo(e,r),me("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=_e({},r,{value:void 0}),me("invalid",e);break;case"textarea":ru(e,r),s=Fo(e,r),me("invalid",e);break;default:s=r}Wo(n,s),c=s;for(l in c)if(c.hasOwnProperty(l)){var a=c[l];l==="style"?nh(e,a):l==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&eh(e,a)):l==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ps(e,a):typeof a=="number"&&ps(e,""+a):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(fs.hasOwnProperty(l)?a!=null&&l==="onScroll"&&me("scroll",e):a!=null&&Ga(e,l,a,o))}switch(n){case"input":hi(e),nu(e,r,!1);break;case"textarea":hi(e),su(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Cn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?gr(e,!!r.multiple,l,!1):r.defaultValue!=null&&gr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=il)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ve(t),null;case 6:if(e&&t.stateNode!=null)kf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(G(166));if(n=Bn(Es.current),Bn(Ut.current),Ni(t)){if(r=t.stateNode,n=t.memoizedProps,r[Mt]=t,(l=r.nodeValue!==n)&&(e=dt,e!==null))switch(e.tag){case 3:wi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wi(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mt]=t,t.stateNode=r}return Ve(t),null;case 13:if(ve(we),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xe&&ut!==null&&t.mode&1&&!(t.flags&128))Wh(),Er(),t.flags|=98560,l=!1;else if(l=Ni(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(G(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(G(317));l[Mt]=t}else Er(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ve(t),l=!1}else Tt!==null&&(Ca(Tt),Tt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||we.current&1?Oe===0&&(Oe=3):kc())),t.updateQueue!==null&&(t.flags|=4),Ve(t),null);case 4:return br(),va(e,t),e===null&&Ns(t.stateNode.containerInfo),Ve(t),null;case 10:return cc(t.type._context),Ve(t),null;case 17:return it(t.type)&&ll(),Ve(t),null;case 19:if(ve(we),l=t.memoizedState,l===null)return Ve(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)Hr(l,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=fl(e),o!==null){for(t.flags|=128,Hr(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return pe(we,we.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ee()>Rr&&(t.flags|=128,r=!0,Hr(l,!1),t.lanes=4194304)}else{if(!r)if(e=fl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!xe)return Ve(t),null}else 2*Ee()-l.renderingStartTime>Rr&&n!==1073741824&&(t.flags|=128,r=!0,Hr(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ee(),t.sibling=null,n=we.current,pe(we,r?n&1|2:n&1),t):(Ve(t),null);case 22:case 23:return Ec(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ct&1073741824&&(Ve(t),t.subtreeFlags&6&&(t.flags|=8192)):Ve(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function Jv(e,t){switch(ic(t),t.tag){case 1:return it(t.type)&&ll(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return br(),ve(st),ve(Ke),pc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fc(t),null;case 13:if(ve(we),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));Er()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ve(we),null;case 4:return br(),null;case 10:return cc(t.type._context),null;case 22:case 23:return Ec(),null;case 24:return null;default:return null}}var Ci=!1,Ye=!1,Xv=typeof WeakSet=="function"?WeakSet:Set,Y=null;function mr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(e,t,r)}else n.current=null}function ga(e,t,n){try{n()}catch(r){Ce(e,t,r)}}var Yu=!1;function Zv(e,t){if(ea=nl,e=Ph(),rc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,c=-1,a=-1,u=0,h=0,f=e,d=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(c=o+s),f!==l||r!==0&&f.nodeType!==3||(a=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)d=f,f=g;for(;;){if(f===e)break t;if(d===n&&++u===s&&(c=o),d===l&&++h===r&&(a=o),(g=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=g}n=c===-1||a===-1?null:{start:c,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},nl=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var N=m.memoizedProps,E=m.memoizedState,v=t.stateNode,p=v.getSnapshotBeforeUpdate(t.elementType===t.type?N:St(t.type,N),E);v.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(x){Ce(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return m=Yu,Yu=!1,m}function cs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&ga(t,n,l)}s=s.next}while(s!==r)}}function Al(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ya(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bf(e){var t=e.alternate;t!==null&&(e.alternate=null,bf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mt],delete t[js],delete t[sa],delete t[Lv],delete t[$v])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sf(e){return e.tag===5||e.tag===3||e.tag===4}function Ku(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=il));else if(r!==4&&(e=e.child,e!==null))for(xa(e,t,n),e=e.sibling;e!==null;)xa(e,t,n),e=e.sibling}function wa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(wa(e,t,n),e=e.sibling;e!==null;)wa(e,t,n),e=e.sibling}var Ue=null,Rt=!1;function rn(e,t,n){for(n=n.child;n!==null;)Rf(e,t,n),n=n.sibling}function Rf(e,t,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(kl,n)}catch{}switch(n.tag){case 5:Ye||mr(n,t);case 6:var r=Ue,s=Rt;Ue=null,rn(e,t,n),Ue=r,Rt=s,Ue!==null&&(Rt?(e=Ue,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(Rt?(e=Ue,n=n.stateNode,e.nodeType===8?co(e.parentNode,n):e.nodeType===1&&co(e,n),ys(e)):co(Ue,n.stateNode));break;case 4:r=Ue,s=Rt,Ue=n.stateNode.containerInfo,Rt=!0,rn(e,t,n),Ue=r,Rt=s;break;case 0:case 11:case 14:case 15:if(!Ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&ga(n,t,o),s=s.next}while(s!==r)}rn(e,t,n);break;case 1:if(!Ye&&(mr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ce(n,t,c)}rn(e,t,n);break;case 21:rn(e,t,n);break;case 22:n.mode&1?(Ye=(r=Ye)||n.memoizedState!==null,rn(e,t,n),Ye=r):rn(e,t,n);break;default:rn(e,t,n)}}function qu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Xv),t.forEach(function(r){var s=ag.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function bt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Ue=c.stateNode,Rt=!1;break e;case 3:Ue=c.stateNode.containerInfo,Rt=!0;break e;case 4:Ue=c.stateNode.containerInfo,Rt=!0;break e}c=c.return}if(Ue===null)throw Error(G(160));Rf(l,o,s),Ue=null,Rt=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(u){Ce(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pf(t,e),t=t.sibling}function Pf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bt(t,e),$t(e),r&4){try{cs(3,e,e.return),Al(3,e)}catch(N){Ce(e,e.return,N)}try{cs(5,e,e.return)}catch(N){Ce(e,e.return,N)}}break;case 1:bt(t,e),$t(e),r&512&&n!==null&&mr(n,n.return);break;case 5:if(bt(t,e),$t(e),r&512&&n!==null&&mr(n,n.return),e.flags&32){var s=e.stateNode;try{ps(s,"")}catch(N){Ce(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,c=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&Jd(s,l),Go(c,o);var u=Go(c,l);for(o=0;o<a.length;o+=2){var h=a[o],f=a[o+1];h==="style"?nh(s,f):h==="dangerouslySetInnerHTML"?eh(s,f):h==="children"?ps(s,f):Ga(s,h,f,u)}switch(c){case"input":Bo(s,l);break;case"textarea":Xd(s,l);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var g=l.value;g!=null?gr(s,!!l.multiple,g,!1):d!==!!l.multiple&&(l.defaultValue!=null?gr(s,!!l.multiple,l.defaultValue,!0):gr(s,!!l.multiple,l.multiple?[]:"",!1))}s[js]=l}catch(N){Ce(e,e.return,N)}}break;case 6:if(bt(t,e),$t(e),r&4){if(e.stateNode===null)throw Error(G(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(N){Ce(e,e.return,N)}}break;case 3:if(bt(t,e),$t(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ys(t.containerInfo)}catch(N){Ce(e,e.return,N)}break;case 4:bt(t,e),$t(e);break;case 13:bt(t,e),$t(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(jc=Ee())),r&4&&qu(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Ye=(u=Ye)||h,bt(t,e),Ye=u):bt(t,e),$t(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(Y=e,h=e.child;h!==null;){for(f=Y=h;Y!==null;){switch(d=Y,g=d.child,d.tag){case 0:case 11:case 14:case 15:cs(4,d,d.return);break;case 1:mr(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(N){Ce(r,n,N)}}break;case 5:mr(d,d.return);break;case 22:if(d.memoizedState!==null){Ju(f);continue}}g!==null?(g.return=d,Y=g):Ju(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=f.stateNode,a=f.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,c.style.display=th("display",o))}catch(N){Ce(e,e.return,N)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(N){Ce(e,e.return,N)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:bt(t,e),$t(e),r&4&&qu(e);break;case 21:break;default:bt(t,e),$t(e)}}function $t(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Sf(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ps(s,""),r.flags&=-33);var l=Ku(e);wa(e,l,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Ku(e);xa(e,c,o);break;default:throw Error(G(161))}}catch(a){Ce(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eg(e,t,n){Y=e,Tf(e)}function Tf(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,l=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ci;if(!o){var c=s.alternate,a=c!==null&&c.memoizedState!==null||Ye;c=Ci;var u=Ye;if(Ci=o,(Ye=a)&&!u)for(Y=s;Y!==null;)o=Y,a=o.child,o.tag===22&&o.memoizedState!==null?Xu(s):a!==null?(a.return=o,Y=a):Xu(s);for(;l!==null;)Y=l,Tf(l),l=l.sibling;Y=s,Ci=c,Ye=u}Qu(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,Y=l):Qu(e)}}function Qu(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ye||Al(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ye)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:St(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Au(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Au(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ys(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Ye||t.flags&512&&ya(t)}catch(d){Ce(t,t.return,d)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function Ju(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function Xu(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Al(4,t)}catch(a){Ce(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(a){Ce(t,s,a)}}var l=t.return;try{ya(t)}catch(a){Ce(t,l,a)}break;case 5:var o=t.return;try{ya(t)}catch(a){Ce(t,o,a)}}}catch(a){Ce(t,t.return,a)}if(t===e){Y=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Y=c;break}Y=t.return}}var tg=Math.ceil,vl=tn.ReactCurrentDispatcher,Nc=tn.ReactCurrentOwner,_t=tn.ReactCurrentBatchConfig,de=0,Me=null,be=null,Fe=0,ct=0,vr=bn(0),Oe=0,Rs=null,Kn=0,Ll=0,_c=0,us=null,nt=null,jc=0,Rr=1/0,Ht=null,gl=!1,Na=null,wn=null,Ei=!1,fn=null,yl=0,ds=0,_a=null,Wi=-1,Gi=0;function Je(){return de&6?Ee():Wi!==-1?Wi:Wi=Ee()}function Nn(e){return e.mode&1?de&2&&Fe!==0?Fe&-Fe:Mv.transition!==null?(Gi===0&&(Gi=ph()),Gi):(e=fe,e!==0||(e=window.event,e=e===void 0?16:Nh(e.type)),e):1}function Ot(e,t,n,r){if(50<ds)throw ds=0,_a=null,Error(G(185));Ls(e,n,r),(!(de&2)||e!==Me)&&(e===Me&&(!(de&2)&&(Ll|=n),Oe===4&&dn(e,Fe)),lt(e,r),n===1&&de===0&&!(t.mode&1)&&(Rr=Ee()+500,Tl&&Sn()))}function lt(e,t){var n=e.callbackNode;Mm(e,t);var r=tl(e,e===Me?Fe:0);if(r===0)n!==null&&ou(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ou(n),t===1)e.tag===0?Dv(Zu.bind(null,e)):Uh(Zu.bind(null,e)),Ov(function(){!(de&6)&&Sn()}),n=null;else{switch(mh(r)){case 1:n=qa;break;case 4:n=hh;break;case 16:n=el;break;case 536870912:n=fh;break;default:n=el}n=Bf(n,If.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function If(e,t){if(Wi=-1,Gi=0,de&6)throw Error(G(327));var n=e.callbackNode;if(_r()&&e.callbackNode!==n)return null;var r=tl(e,e===Me?Fe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xl(e,r);else{t=r;var s=de;de|=2;var l=Af();(Me!==e||Fe!==t)&&(Ht=null,Rr=Ee()+500,Un(e,t));do try{sg();break}catch(c){Of(e,c)}while(!0);ac(),vl.current=l,de=s,be!==null?t=0:(Me=null,Fe=0,t=Oe)}if(t!==0){if(t===2&&(s=qo(e),s!==0&&(r=s,t=ja(e,s))),t===1)throw n=Rs,Un(e,0),dn(e,r),lt(e,Ee()),n;if(t===6)dn(e,r);else{if(s=e.current.alternate,!(r&30)&&!ng(s)&&(t=xl(e,r),t===2&&(l=qo(e),l!==0&&(r=l,t=ja(e,l))),t===1))throw n=Rs,Un(e,0),dn(e,r),lt(e,Ee()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(G(345));case 2:$n(e,nt,Ht);break;case 3:if(dn(e,r),(r&130023424)===r&&(t=jc+500-Ee(),10<t)){if(tl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Je(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ra($n.bind(null,e,nt,Ht),t);break}$n(e,nt,Ht);break;case 4:if(dn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-It(r);l=1<<o,o=t[o],o>s&&(s=o),r&=~l}if(r=s,r=Ee()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tg(r/1960))-r,10<r){e.timeoutHandle=ra($n.bind(null,e,nt,Ht),r);break}$n(e,nt,Ht);break;case 5:$n(e,nt,Ht);break;default:throw Error(G(329))}}}return lt(e,Ee()),e.callbackNode===n?If.bind(null,e):null}function ja(e,t){var n=us;return e.current.memoizedState.isDehydrated&&(Un(e,t).flags|=256),e=xl(e,t),e!==2&&(t=nt,nt=n,t!==null&&Ca(t)),e}function Ca(e){nt===null?nt=e:nt.push.apply(nt,e)}function ng(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!At(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dn(e,t){for(t&=~_c,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-It(t),r=1<<n;e[n]=-1,t&=~r}}function Zu(e){if(de&6)throw Error(G(327));_r();var t=tl(e,0);if(!(t&1))return lt(e,Ee()),null;var n=xl(e,t);if(e.tag!==0&&n===2){var r=qo(e);r!==0&&(t=r,n=ja(e,r))}if(n===1)throw n=Rs,Un(e,0),dn(e,t),lt(e,Ee()),n;if(n===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$n(e,nt,Ht),lt(e,Ee()),null}function Cc(e,t){var n=de;de|=1;try{return e(t)}finally{de=n,de===0&&(Rr=Ee()+500,Tl&&Sn())}}function qn(e){fn!==null&&fn.tag===0&&!(de&6)&&_r();var t=de;de|=1;var n=_t.transition,r=fe;try{if(_t.transition=null,fe=1,e)return e()}finally{fe=r,_t.transition=n,de=t,!(de&6)&&Sn()}}function Ec(){ct=vr.current,ve(vr)}function Un(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Iv(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(ic(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ll();break;case 3:br(),ve(st),ve(Ke),pc();break;case 5:fc(r);break;case 4:br();break;case 13:ve(we);break;case 19:ve(we);break;case 10:cc(r.type._context);break;case 22:case 23:Ec()}n=n.return}if(Me=e,be=e=_n(e.current,null),Fe=ct=t,Oe=0,Rs=null,_c=Ll=Kn=0,nt=us=null,Mn!==null){for(t=0;t<Mn.length;t++)if(n=Mn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=s,r.next=o}n.pending=r}Mn=null}return e}function Of(e,t){do{var n=be;try{if(ac(),Ui.current=ml,pl){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}pl=!1}if(Yn=0,De=Ie=Ne=null,as=!1,ks=0,Nc.current=null,n===null||n.return===null){Oe=1,Rs=t,be=null;break}e:{var l=e,o=n.return,c=n,a=t;if(t=Fe,c.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=c,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Uu(o);if(g!==null){g.flags&=-257,Fu(g,o,c,l,t),g.mode&1&&Bu(l,u,t),t=g,a=u;var m=t.updateQueue;if(m===null){var N=new Set;N.add(a),t.updateQueue=N}else m.add(a);break e}else{if(!(t&1)){Bu(l,u,t),kc();break e}a=Error(G(426))}}else if(xe&&c.mode&1){var E=Uu(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Fu(E,o,c,l,t),lc(Sr(a,c));break e}}l=a=Sr(a,c),Oe!==4&&(Oe=2),us===null?us=[l]:us.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var v=vf(l,a,t);Ou(l,v);break e;case 1:c=a;var p=l.type,_=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(wn===null||!wn.has(_)))){l.flags|=65536,t&=-t,l.lanes|=t;var x=gf(l,c,t);Ou(l,x);break e}}l=l.return}while(l!==null)}$f(n)}catch(k){t=k,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function Af(){var e=vl.current;return vl.current=ml,e===null?ml:e}function kc(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Me===null||!(Kn&268435455)&&!(Ll&268435455)||dn(Me,Fe)}function xl(e,t){var n=de;de|=2;var r=Af();(Me!==e||Fe!==t)&&(Ht=null,Un(e,t));do try{rg();break}catch(s){Of(e,s)}while(!0);if(ac(),de=n,vl.current=r,be!==null)throw Error(G(261));return Me=null,Fe=0,Oe}function rg(){for(;be!==null;)Lf(be)}function sg(){for(;be!==null&&!Rm();)Lf(be)}function Lf(e){var t=Mf(e.alternate,e,ct);e.memoizedProps=e.pendingProps,t===null?$f(e):be=t,Nc.current=null}function $f(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Jv(n,t),n!==null){n.flags&=32767,be=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,be=null;return}}else if(n=Qv(n,t,ct),n!==null){be=n;return}if(t=t.sibling,t!==null){be=t;return}be=t=e}while(t!==null);Oe===0&&(Oe=5)}function $n(e,t,n){var r=fe,s=_t.transition;try{_t.transition=null,fe=1,ig(e,t,n,r)}finally{_t.transition=s,fe=r}return null}function ig(e,t,n,r){do _r();while(fn!==null);if(de&6)throw Error(G(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Bm(e,l),e===Me&&(be=Me=null,Fe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ei||(Ei=!0,Bf(el,function(){return _r(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=_t.transition,_t.transition=null;var o=fe;fe=1;var c=de;de|=4,Nc.current=null,Zv(e,n),Pf(n,e),Ev(ta),nl=!!ea,ta=ea=null,e.current=n,eg(n),Pm(),de=c,fe=o,_t.transition=l}else e.current=n;if(Ei&&(Ei=!1,fn=e,yl=s),l=e.pendingLanes,l===0&&(wn=null),Om(n.stateNode),lt(e,Ee()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(gl)throw gl=!1,e=Na,Na=null,e;return yl&1&&e.tag!==0&&_r(),l=e.pendingLanes,l&1?e===_a?ds++:(ds=0,_a=e):ds=0,Sn(),null}function _r(){if(fn!==null){var e=mh(yl),t=_t.transition,n=fe;try{if(_t.transition=null,fe=16>e?16:e,fn===null)var r=!1;else{if(e=fn,fn=null,yl=0,de&6)throw Error(G(331));var s=de;for(de|=4,Y=e.current;Y!==null;){var l=Y,o=l.child;if(Y.flags&16){var c=l.deletions;if(c!==null){for(var a=0;a<c.length;a++){var u=c[a];for(Y=u;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:cs(8,h,l)}var f=h.child;if(f!==null)f.return=h,Y=f;else for(;Y!==null;){h=Y;var d=h.sibling,g=h.return;if(bf(h),h===u){Y=null;break}if(d!==null){d.return=g,Y=d;break}Y=g}}}var m=l.alternate;if(m!==null){var N=m.child;if(N!==null){m.child=null;do{var E=N.sibling;N.sibling=null,N=E}while(N!==null)}}Y=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,Y=o;else e:for(;Y!==null;){if(l=Y,l.flags&2048)switch(l.tag){case 0:case 11:case 15:cs(9,l,l.return)}var v=l.sibling;if(v!==null){v.return=l.return,Y=v;break e}Y=l.return}}var p=e.current;for(Y=p;Y!==null;){o=Y;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Y=_;else e:for(o=p;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Al(9,c)}}catch(k){Ce(c,c.return,k)}if(c===o){Y=null;break e}var x=c.sibling;if(x!==null){x.return=c.return,Y=x;break e}Y=c.return}}if(de=s,Sn(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(kl,e)}catch{}r=!0}return r}finally{fe=n,_t.transition=t}}return!1}function ed(e,t,n){t=Sr(n,t),t=vf(e,t,1),e=xn(e,t,1),t=Je(),e!==null&&(Ls(e,1,t),lt(e,t))}function Ce(e,t,n){if(e.tag===3)ed(e,e,n);else for(;t!==null;){if(t.tag===3){ed(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wn===null||!wn.has(r))){e=Sr(n,e),e=gf(t,e,1),t=xn(t,e,1),e=Je(),t!==null&&(Ls(t,1,e),lt(t,e));break}}t=t.return}}function lg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Je(),e.pingedLanes|=e.suspendedLanes&n,Me===e&&(Fe&n)===n&&(Oe===4||Oe===3&&(Fe&130023424)===Fe&&500>Ee()-jc?Un(e,0):_c|=n),lt(e,t)}function Df(e,t){t===0&&(e.mode&1?(t=mi,mi<<=1,!(mi&130023424)&&(mi=4194304)):t=1);var n=Je();e=Zt(e,t),e!==null&&(Ls(e,t,n),lt(e,n))}function og(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Df(e,n)}function ag(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(t),Df(e,n)}var Mf;Mf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||st.current)rt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return rt=!1,qv(e,t,n);rt=!!(e.flags&131072)}else rt=!1,xe&&t.flags&1048576&&Fh(t,cl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zi(e,t),e=t.pendingProps;var s=Cr(t,Ke.current);Nr(t,n),s=vc(null,t,r,e,s,n);var l=gc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,it(r)?(l=!0,ol(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dc(t),s.updater=Ol,t.stateNode=s,s._reactInternals=t,ua(t,r,e,n),t=fa(null,t,r,!0,l,n)):(t.tag=0,xe&&l&&sc(t),Qe(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zi(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=ug(r),e=St(r,e),s){case 0:t=ha(null,t,r,e,n);break e;case 1:t=Gu(null,t,r,e,n);break e;case 11:t=zu(null,t,r,e,n);break e;case 14:t=Wu(null,t,r,St(r.type,e),n);break e}throw Error(G(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),ha(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),Gu(e,t,r,s,n);case 3:e:{if(Nf(t),e===null)throw Error(G(387));r=t.pendingProps,l=t.memoizedState,s=l.element,Yh(e,t),hl(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Sr(Error(G(423)),t),t=Vu(e,t,r,n,s);break e}else if(r!==s){s=Sr(Error(G(424)),t),t=Vu(e,t,r,n,s);break e}else for(ut=yn(t.stateNode.containerInfo.firstChild),dt=t,xe=!0,Tt=null,n=Vh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Er(),r===s){t=en(e,t,n);break e}Qe(e,t,r,n)}t=t.child}return t;case 5:return Kh(t),e===null&&oa(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,o=s.children,na(r,s)?o=null:l!==null&&na(r,l)&&(t.flags|=32),wf(e,t),Qe(e,t,o,n),t.child;case 6:return e===null&&oa(t),null;case 13:return _f(e,t,n);case 4:return hc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=kr(t,null,r,n):Qe(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),zu(e,t,r,s,n);case 7:return Qe(e,t,t.pendingProps,n),t.child;case 8:return Qe(e,t,t.pendingProps.children,n),t.child;case 12:return Qe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,o=s.value,pe(ul,r._currentValue),r._currentValue=o,l!==null)if(At(l.value,o)){if(l.children===s.children&&!st.current){t=en(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var a=c.firstContext;a!==null;){if(a.context===r){if(l.tag===1){a=Qt(-1,n&-n),a.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),aa(l.return,n,t),c.lanes|=n;break}a=a.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(G(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),aa(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Qe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Nr(t,n),s=jt(s),r=r(s),t.flags|=1,Qe(e,t,r,n),t.child;case 14:return r=t.type,s=St(r,t.pendingProps),s=St(r.type,s),Wu(e,t,r,s,n);case 15:return yf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),zi(e,t),t.tag=1,it(r)?(e=!0,ol(t)):e=!1,Nr(t,n),mf(t,r,s),ua(t,r,s,n),fa(null,t,r,!0,e,n);case 19:return jf(e,t,n);case 22:return xf(e,t,n)}throw Error(G(156,t.tag))};function Bf(e,t){return dh(e,t)}function cg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(e,t,n,r){return new cg(e,t,n,r)}function bc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ug(e){if(typeof e=="function")return bc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ha)return 11;if(e===Ya)return 14}return 2}function _n(e,t){var n=e.alternate;return n===null?(n=Nt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vi(e,t,n,r,s,l){var o=2;if(r=e,typeof e=="function")bc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case lr:return Fn(n.children,s,l,t);case Va:o=8,s|=8;break;case Ao:return e=Nt(12,n,t,s|2),e.elementType=Ao,e.lanes=l,e;case Lo:return e=Nt(13,n,t,s),e.elementType=Lo,e.lanes=l,e;case $o:return e=Nt(19,n,t,s),e.elementType=$o,e.lanes=l,e;case Kd:return $l(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Hd:o=10;break e;case Yd:o=9;break e;case Ha:o=11;break e;case Ya:o=14;break e;case on:o=16,r=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Nt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Fn(e,t,n,r){return e=Nt(7,e,r,t),e.lanes=n,e}function $l(e,t,n,r){return e=Nt(22,e,r,t),e.elementType=Kd,e.lanes=n,e.stateNode={isHidden:!1},e}function yo(e,t,n){return e=Nt(6,e,null,t),e.lanes=n,e}function xo(e,t,n){return t=Nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sc(e,t,n,r,s,l,o,c,a){return e=new dg(e,t,n,c,a),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Nt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dc(l),e}function hg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ir,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Uf(e){if(!e)return En;e=e._reactInternals;e:{if(Xn(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(it(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var n=e.type;if(it(n))return Bh(e,n,t)}return t}function Ff(e,t,n,r,s,l,o,c,a){return e=Sc(n,r,!0,e,s,l,o,c,a),e.context=Uf(null),n=e.current,r=Je(),s=Nn(n),l=Qt(r,s),l.callback=t??null,xn(n,l,s),e.current.lanes=s,Ls(e,s,r),lt(e,r),e}function Dl(e,t,n,r){var s=t.current,l=Je(),o=Nn(s);return n=Uf(n),t.context===null?t.context=n:t.pendingContext=n,t=Qt(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=xn(s,t,o),e!==null&&(Ot(e,s,o,l),Bi(e,s,o)),o}function wl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function td(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Rc(e,t){td(e,t),(e=e.alternate)&&td(e,t)}function fg(){return null}var zf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Pc(e){this._internalRoot=e}Ml.prototype.render=Pc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));Dl(e,t,null,null)};Ml.prototype.unmount=Pc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qn(function(){Dl(null,e,null,null)}),t[Xt]=null}};function Ml(e){this._internalRoot=e}Ml.prototype.unstable_scheduleHydration=function(e){if(e){var t=yh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<un.length&&t!==0&&t<un[n].priority;n++);un.splice(n,0,e),n===0&&wh(e)}};function Tc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nd(){}function pg(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var u=wl(o);l.call(u)}}var o=Ff(t,r,e,0,null,!1,!1,"",nd);return e._reactRootContainer=o,e[Xt]=o.current,Ns(e.nodeType===8?e.parentNode:e),qn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var u=wl(a);c.call(u)}}var a=Sc(e,0,!1,null,null,!1,!1,"",nd);return e._reactRootContainer=a,e[Xt]=a.current,Ns(e.nodeType===8?e.parentNode:e),qn(function(){Dl(t,a,n,r)}),a}function Ul(e,t,n,r,s){var l=n._reactRootContainer;if(l){var o=l;if(typeof s=="function"){var c=s;s=function(){var a=wl(o);c.call(a)}}Dl(t,o,e,s)}else o=pg(n,t,e,s,r);return wl(o)}vh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Xr(t.pendingLanes);n!==0&&(Qa(t,n|1),lt(t,Ee()),!(de&6)&&(Rr=Ee()+500,Sn()))}break;case 13:qn(function(){var r=Zt(e,1);if(r!==null){var s=Je();Ot(r,e,1,s)}}),Rc(e,1)}};Ja=function(e){if(e.tag===13){var t=Zt(e,134217728);if(t!==null){var n=Je();Ot(t,e,134217728,n)}Rc(e,134217728)}};gh=function(e){if(e.tag===13){var t=Nn(e),n=Zt(e,t);if(n!==null){var r=Je();Ot(n,e,t,r)}Rc(e,t)}};yh=function(){return fe};xh=function(e,t){var n=fe;try{return fe=e,t()}finally{fe=n}};Ho=function(e,t,n){switch(t){case"input":if(Bo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Pl(r);if(!s)throw Error(G(90));Qd(r),Bo(r,s)}}}break;case"textarea":Xd(e,n);break;case"select":t=n.value,t!=null&&gr(e,!!n.multiple,t,!1)}};ih=Cc;lh=qn;var mg={usingClientEntryPoint:!1,Events:[Ds,ur,Pl,rh,sh,Cc]},Yr={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vg={bundleType:Yr.bundleType,version:Yr.version,rendererPackageName:Yr.rendererPackageName,rendererConfig:Yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ch(e),e===null?null:e.stateNode},findFiberByHostInstance:Yr.findFiberByHostInstance||fg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ki=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ki.isDisabled&&ki.supportsFiber)try{kl=ki.inject(vg),Bt=ki}catch{}}ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mg;ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tc(t))throw Error(G(200));return hg(e,t,null,n)};ft.createRoot=function(e,t){if(!Tc(e))throw Error(G(299));var n=!1,r="",s=zf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Sc(e,1,!1,null,null,n,!1,r,s),e[Xt]=t.current,Ns(e.nodeType===8?e.parentNode:e),new Pc(t)};ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=ch(t),e=e===null?null:e.stateNode,e};ft.flushSync=function(e){return qn(e)};ft.hydrate=function(e,t,n){if(!Bl(t))throw Error(G(200));return Ul(null,e,t,!0,n)};ft.hydrateRoot=function(e,t,n){if(!Tc(e))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",o=zf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Ff(t,null,e,1,n??null,s,!1,l,o),e[Xt]=t.current,Ns(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ml(t)};ft.render=function(e,t,n){if(!Bl(t))throw Error(G(200));return Ul(null,e,t,!1,n)};ft.unmountComponentAtNode=function(e){if(!Bl(e))throw Error(G(40));return e._reactRootContainer?(qn(function(){Ul(null,null,e,!1,function(){e._reactRootContainer=null,e[Xt]=null})}),!0):!1};ft.unstable_batchedUpdates=Cc;ft.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bl(n))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return Ul(e,t,n,!1,r)};ft.version="18.3.1-next-f1338f8080-20240426";function Wf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wf)}catch(e){console.error(e)}}Wf(),zd.exports=ft;var gg=zd.exports,Gf,rd=gg;Gf=rd.createRoot,rd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ps(){return Ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ps.apply(this,arguments)}var pn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(pn||(pn={}));const sd="popstate";function yg(e){e===void 0&&(e={});function t(r,s){let{pathname:l,search:o,hash:c}=r.location;return Ea("",{pathname:l,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vf(s)}return wg(t,n,null,e)}function Re(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ic(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xg(){return Math.random().toString(36).substr(2,8)}function id(e,t){return{usr:e.state,key:e.key,idx:t}}function Ea(e,t,n,r){return n===void 0&&(n=null),Ps({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ar(t):t,{state:n,key:t&&t.key||r||xg()})}function Vf(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ar(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function wg(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,o=s.history,c=pn.Pop,a=null,u=h();u==null&&(u=0,o.replaceState(Ps({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){c=pn.Pop;let E=h(),v=E==null?null:E-u;u=E,a&&a({action:c,location:N.location,delta:v})}function d(E,v){c=pn.Push;let p=Ea(N.location,E,v);u=h()+1;let _=id(p,u),x=N.createHref(p);try{o.pushState(_,"",x)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(x)}l&&a&&a({action:c,location:N.location,delta:1})}function g(E,v){c=pn.Replace;let p=Ea(N.location,E,v);u=h();let _=id(p,u),x=N.createHref(p);o.replaceState(_,"",x),l&&a&&a({action:c,location:N.location,delta:0})}function m(E){let v=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof E=="string"?E:Vf(E);return p=p.replace(/ $/,"%20"),Re(v,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,v)}let N={get action(){return c},get location(){return e(s,o)},listen(E){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(sd,f),a=E,()=>{s.removeEventListener(sd,f),a=null}},createHref(E){return t(s,E)},createURL:m,encodeLocation(E){let v=m(E);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:g,go(E){return o.go(E)}};return N}var ld;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ld||(ld={}));function Ng(e,t,n){return n===void 0&&(n="/"),_g(e,t,n)}function _g(e,t,n,r){let s=typeof t=="string"?Ar(t):t,l=Kf(s.pathname||"/",n);if(l==null)return null;let o=Hf(e);jg(o);let c=null;for(let a=0;c==null&&a<o.length;++a){let u=Lg(l);c=Ig(o[a],u)}return c}function Hf(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,o,c)=>{let a={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};a.relativePath.startsWith("/")&&(Re(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=zn([r,a.relativePath]),h=n.concat(a);l.children&&l.children.length>0&&(Re(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Hf(l.children,t,h,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:Pg(u,l.index),routesMeta:h})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))s(l,o);else for(let a of Yf(l.path))s(l,o,a)}),t}function Yf(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let o=Yf(r.join("/")),c=[];return c.push(...o.map(a=>a===""?l:[l,a].join("/"))),s&&c.push(...o),c.map(a=>e.startsWith("/")&&a===""?"/":a)}function jg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Tg(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Cg=/^:[\w-]+$/,Eg=3,kg=2,bg=1,Sg=10,Rg=-2,od=e=>e==="*";function Pg(e,t){let n=e.split("/"),r=n.length;return n.some(od)&&(r+=Rg),t&&(r+=kg),n.filter(s=>!od(s)).reduce((s,l)=>s+(Cg.test(l)?Eg:l===""?bg:Sg),r)}function Tg(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Ig(e,t,n){let{routesMeta:r}=e,s={},l="/",o=[];for(let c=0;c<r.length;++c){let a=r[c],u=c===r.length-1,h=l==="/"?t:t.slice(l.length)||"/",f=Og({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},h),d=a.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:zn([l,f.pathname]),pathnameBase:Ug(zn([l,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(l=zn([l,f.pathnameBase]))}return o}function Og(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Ag(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],o=l.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:d,isOptional:g}=h;if(d==="*"){let N=c[f]||"";o=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const m=c[f];return g&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:o,pattern:e}}function Ag(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ic(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,a)=>(r.push({paramName:c,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Lg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ic(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Kf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const $g=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dg=e=>$g.test(e);function Mg(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Ar(e):e,l;if(n)if(Dg(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ic(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=ad(n.substring(1),"/"):l=ad(n,t)}else l=t;return{pathname:l,search:Fg(r),hash:zg(s)}}function ad(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function wo(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Bg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function qf(e,t){let n=Bg(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Qf(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Ar(e):(s=Ps({},e),Re(!s.pathname||!s.pathname.includes("?"),wo("?","pathname","search",s)),Re(!s.pathname||!s.pathname.includes("#"),wo("#","pathname","hash",s)),Re(!s.search||!s.search.includes("#"),wo("#","search","hash",s)));let l=e===""||s.pathname==="",o=l?"/":s.pathname,c;if(o==null)c=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;s.pathname=d.join("/")}c=f>=0?t[f]:"/"}let a=Mg(s,c),u=o&&o!=="/"&&o.endsWith("/"),h=(l||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||h)&&(a.pathname+="/"),a}const zn=e=>e.join("/").replace(/\/\/+/g,"/"),Ug=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Fg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Wg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Jf=["post","put","patch","delete"];new Set(Jf);const Gg=["get",...Jf];new Set(Gg);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ts(){return Ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ts.apply(this,arguments)}const Oc=w.createContext(null),Vg=w.createContext(null),Bs=w.createContext(null),Fl=w.createContext(null),Rn=w.createContext({outlet:null,matches:[],isDataRoute:!1}),Xf=w.createContext(null);function Us(){return w.useContext(Fl)!=null}function Ac(){return Us()||Re(!1),w.useContext(Fl).location}function Zf(e){w.useContext(Bs).static||w.useLayoutEffect(e)}function et(){let{isDataRoute:e}=w.useContext(Rn);return e?sy():Hg()}function Hg(){Us()||Re(!1);let e=w.useContext(Oc),{basename:t,future:n,navigator:r}=w.useContext(Bs),{matches:s}=w.useContext(Rn),{pathname:l}=Ac(),o=JSON.stringify(qf(s,n.v7_relativeSplatPath)),c=w.useRef(!1);return Zf(()=>{c.current=!0}),w.useCallback(function(u,h){if(h===void 0&&(h={}),!c.current)return;if(typeof u=="number"){r.go(u);return}let f=Qf(u,JSON.parse(o),l,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:zn([t,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[t,r,o,l,e])}function Zn(){let{matches:e}=w.useContext(Rn),t=e[e.length-1];return t?t.params:{}}function Yg(e,t){return Kg(e,t)}function Kg(e,t,n,r){Us()||Re(!1);let{navigator:s}=w.useContext(Bs),{matches:l}=w.useContext(Rn),o=l[l.length-1],c=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let u=Ac(),h;if(t){var f;let E=typeof t=="string"?Ar(t):t;a==="/"||(f=E.pathname)!=null&&f.startsWith(a)||Re(!1),h=E}else h=u;let d=h.pathname||"/",g=d;if(a!=="/"){let E=a.replace(/^\//,"").split("/");g="/"+d.replace(/^\//,"").split("/").slice(E.length).join("/")}let m=Ng(e,{pathname:g}),N=Zg(m&&m.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:zn([a,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?a:zn([a,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),l,n,r);return t&&N?w.createElement(Fl.Provider,{value:{location:Ts({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:pn.Pop}},N):N}function qg(){let e=ry(),t=Wg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:s},n):null,null)}const Qg=w.createElement(qg,null);class Jg extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(Rn.Provider,{value:this.props.routeContext},w.createElement(Xf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xg(e){let{routeContext:t,match:n,children:r}=e,s=w.useContext(Oc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Rn.Provider,{value:t},r)}function Zg(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(s=n)==null?void 0:s.errors;if(c!=null){let h=o.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);h>=0||Re(!1),o=o.slice(0,Math.min(o.length,h+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:d,errors:g}=n,m=f.route.loader&&d[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||m){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,d)=>{let g,m=!1,N=null,E=null;n&&(g=c&&f.route.id?c[f.route.id]:void 0,N=f.route.errorElement||Qg,a&&(u<0&&d===0?(iy("route-fallback"),m=!0,E=null):u===d&&(m=!0,E=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,d+1)),p=()=>{let _;return g?_=N:m?_=E:f.route.Component?_=w.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,w.createElement(Xg,{match:f,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?w.createElement(Jg,{location:n.location,revalidation:n.revalidation,component:N,error:g,children:p(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):p()},null)}var ep=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ep||{}),tp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(tp||{});function ey(e){let t=w.useContext(Oc);return t||Re(!1),t}function ty(e){let t=w.useContext(Vg);return t||Re(!1),t}function ny(e){let t=w.useContext(Rn);return t||Re(!1),t}function np(e){let t=ny(),n=t.matches[t.matches.length-1];return n.route.id||Re(!1),n.route.id}function ry(){var e;let t=w.useContext(Xf),n=ty(),r=np();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function sy(){let{router:e}=ey(ep.UseNavigateStable),t=np(tp.UseNavigateStable),n=w.useRef(!1);return Zf(()=>{n.current=!0}),w.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ts({fromRouteId:t},l)))},[e,t])}const cd={};function iy(e,t,n){cd[e]||(cd[e]=!0)}function ly(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function oy(e){let{to:t,replace:n,state:r,relative:s}=e;Us()||Re(!1);let{future:l,static:o}=w.useContext(Bs),{matches:c}=w.useContext(Rn),{pathname:a}=Ac(),u=et(),h=Qf(t,qf(c,l.v7_relativeSplatPath),a,s==="path"),f=JSON.stringify(h);return w.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function Le(e){Re(!1)}function ay(e){let{basename:t="/",children:n=null,location:r,navigationType:s=pn.Pop,navigator:l,static:o=!1,future:c}=e;Us()&&Re(!1);let a=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:a,navigator:l,static:o,future:Ts({v7_relativeSplatPath:!1},c)}),[a,c,l,o]);typeof r=="string"&&(r=Ar(r));let{pathname:h="/",search:f="",hash:d="",state:g=null,key:m="default"}=r,N=w.useMemo(()=>{let E=Kf(h,a);return E==null?null:{location:{pathname:E,search:f,hash:d,state:g,key:m},navigationType:s}},[a,h,f,d,g,m,s]);return N==null?null:w.createElement(Bs.Provider,{value:u},w.createElement(Fl.Provider,{children:n,value:N}))}function cy(e){let{children:t,location:n}=e;return Yg(ka(t),n)}new Promise(()=>{});function ka(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(r,s)=>{if(!w.isValidElement(r))return;let l=[...t,s];if(r.type===w.Fragment){n.push.apply(n,ka(r.props.children,l));return}r.type!==Le&&Re(!1),!r.props.index||!r.props.children||Re(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ka(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const uy="6";try{window.__reactRouterVersion=uy}catch{}const dy="startTransition",ud=lm[dy];function hy(e){let{basename:t,children:n,future:r,window:s}=e,l=w.useRef();l.current==null&&(l.current=yg({window:s,v5Compat:!0}));let o=l.current,[c,a]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=w.useCallback(f=>{u&&ud?ud(()=>a(f)):a(f)},[a,u]);return w.useLayoutEffect(()=>o.listen(h),[o,h]),w.useEffect(()=>ly(r),[r]),w.createElement(ay,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}var dd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(dd||(dd={}));var hd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(hd||(hd={}));const rp="gamehub:sound",Qn={beep:new Audio("/audio/beep.mp3"),place:new Audio("/audio/place.mp3"),invalid:new Audio("/audio/invalid.mp3"),silence:new Audio("/audio/silence.mp3"),bgm:new Audio("/audio/bgm.mp3")};Qn.bgm.loop=!0;let ba=!1,Fs=!0;function sp(){try{localStorage.getItem(rp)==="off"&&(Fs=!1)}catch{}}sp();function ip(){return Fs}function lp(e){Fs=e;try{localStorage.setItem(rp,e?"on":"off")}catch{}e?ba&&op():Qn.bgm.pause()}function ee(){ba||(sp(),ba=!0,Fs&&(Qn.silence.volume=0,Qn.silence.play().catch(()=>{}),op()))}function q(e){if(!Fs)return;const t=Qn[e];t&&(t.currentTime=0,t.play().catch(()=>{}))}function op(){Qn.bgm.volume=.08,Qn.bgm.play().catch(()=>{})}const fy="";function py(){const e=et(),[t,n]=w.useState(""),[r,s]=w.useState(!1),l=()=>{const g=t.trim().toUpperCase();g&&(ee(),q("beep"),e(`/room/${g}`))},o=async()=>{if(!r){s(!0),ee(),q("beep");try{const m=await(await fetch(`${fy}/api/rooms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({maxPlayers:12})})).json();m.joinCode&&e(`/room/${m.joinCode}`)}catch(g){console.error("Failed to create room:",g)}finally{s(!1)}}},c=()=>{ee(),q("beep"),e("/reversi")},a=()=>{ee(),q("beep"),e("/slither")},u=()=>{ee(),q("beep"),e("/wordle")},h=()=>{ee(),q("beep"),e("/draw")},f=()=>{ee(),q("beep"),e("/connect4")},d=()=>{ee(),q("beep"),e("/charades")};return i.jsxs("div",{className:"app-shell",children:[i.jsx("header",{className:"reversi-title",children:"GAME HUB".split("").map((g,m)=>i.jsx("span",{className:m%2===0?"dark":"light",children:g},`${g}-${m}`))}),i.jsxs("section",{className:"panel highlight",children:[i.jsx("div",{className:"panel-title",children:"Multiplayer Room"}),i.jsxs("div",{className:"menu",children:[i.jsx("button",{className:"button primary",onClick:o,disabled:r,children:r?"Creating...":"Create Room"}),i.jsx("div",{className:"subtle",children:"Create a room and invite friends to play multiple games together with chat!"})]})]}),i.jsxs("section",{className:"panel",children:[i.jsx("div",{className:"panel-title",children:"Join Existing Room"}),i.jsxs("div",{className:"menu",children:[i.jsx("input",{className:"input",value:t,onChange:g=>n(g.target.value),placeholder:"Enter room code",onKeyDown:g=>{g.key==="Enter"&&l()}}),i.jsx("button",{className:"button secondary",onClick:l,children:"Join Room"})]})]}),i.jsxs("section",{className:"panel",children:[i.jsx("div",{className:"panel-title",children:"Quick Play"}),i.jsxs("div",{className:"menu",children:[i.jsx("button",{className:"button",onClick:c,children:"Reversi (Othello)"}),i.jsx("button",{className:"button",onClick:f,children:"Connect 4"}),i.jsx("button",{className:"button",onClick:u,children:"Wordle (Daily / Free / VS)"}),i.jsx("button",{className:"button",onClick:h,children:"Draw & Guess (Party)"}),i.jsx("button",{className:"button",onClick:d,children:"Charades (Party)"}),i.jsx("button",{className:"button",onClick:a,children:"SERPENT.IO Arena"}),i.jsx("div",{className:"subtle",children:"Quick play uses legacy game modes without the unified room system."})]})]})]})}const Lc="gamehub:session";function my(){const e=localStorage.getItem(Lc);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function mt(){const e=my();if(e!=null&&e.playerId&&(e!=null&&e.displayName))return e;const t={playerId:crypto.randomUUID(),displayName:"Player"};return localStorage.setItem(Lc,JSON.stringify(t)),t}function zs(e){const n={...mt(),displayName:e};return localStorage.setItem(Lc,JSON.stringify(n)),n}const Gt=Object.create(null);Gt.open="0";Gt.close="1";Gt.ping="2";Gt.pong="3";Gt.message="4";Gt.upgrade="5";Gt.noop="6";const Hi=Object.create(null);Object.keys(Gt).forEach(e=>{Hi[Gt[e]]=e});const Sa={type:"error",data:"parser error"},ap=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",cp=typeof ArrayBuffer=="function",up=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,$c=({type:e,data:t},n,r)=>ap&&t instanceof Blob?n?r(t):fd(t,r):cp&&(t instanceof ArrayBuffer||up(t))?n?r(t):fd(new Blob([t]),r):r(Gt[e]+(t||"")),fd=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function pd(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let No;function vy(e,t){if(ap&&e.data instanceof Blob)return e.data.arrayBuffer().then(pd).then(t);if(cp&&(e.data instanceof ArrayBuffer||up(e.data)))return t(pd(e.data));$c(e,!1,n=>{No||(No=new TextEncoder),t(No.encode(n))})}const md="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",es=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<md.length;e++)es[md.charCodeAt(e)]=e;const gy=e=>{let t=e.length*.75,n=e.length,r,s=0,l,o,c,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),h=new Uint8Array(u);for(r=0;r<n;r+=4)l=es[e.charCodeAt(r)],o=es[e.charCodeAt(r+1)],c=es[e.charCodeAt(r+2)],a=es[e.charCodeAt(r+3)],h[s++]=l<<2|o>>4,h[s++]=(o&15)<<4|c>>2,h[s++]=(c&3)<<6|a&63;return u},yy=typeof ArrayBuffer=="function",Dc=(e,t)=>{if(typeof e!="string")return{type:"message",data:dp(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:xy(e.substring(1),t)}:Hi[n]?e.length>1?{type:Hi[n],data:e.substring(1)}:{type:Hi[n]}:Sa},xy=(e,t)=>{if(yy){const n=gy(e);return dp(n,t)}else return{base64:!0,data:e}},dp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},hp="",wy=(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((l,o)=>{$c(l,!1,c=>{r[o]=c,++s===n&&t(r.join(hp))})})},Ny=(e,t)=>{const n=e.split(hp),r=[];for(let s=0;s<n.length;s++){const l=Dc(n[s],t);if(r.push(l),l.type==="error")break}return r};function _y(){return new TransformStream({transform(e,t){vy(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const l=new DataView(s.buffer);l.setUint8(0,126),l.setUint16(1,r)}else{s=new Uint8Array(9);const l=new DataView(s.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let _o;function bi(e){return e.reduce((t,n)=>t+n.length,0)}function Si(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function jy(e,t){_o||(_o=new TextDecoder);const n=[];let r=0,s=-1,l=!1;return new TransformStream({transform(o,c){for(n.push(o);;){if(r===0){if(bi(n)<1)break;const a=Si(n,1);l=(a[0]&128)===128,s=a[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(bi(n)<2)break;const a=Si(n,2);s=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(bi(n)<8)break;const a=Si(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),h=u.getUint32(0);if(h>Math.pow(2,21)-1){c.enqueue(Sa);break}s=h*Math.pow(2,32)+u.getUint32(4),r=3}else{if(bi(n)<s)break;const a=Si(n,s);c.enqueue(Dc(l?a:_o.decode(a),t)),r=0}if(s===0||s>e){c.enqueue(Sa);break}}}})}const fp=4;function Se(e){if(e)return Cy(e)}function Cy(e){for(var t in Se.prototype)e[t]=Se.prototype[t];return e}Se.prototype.on=Se.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Se.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Se.prototype.off=Se.prototype.removeListener=Se.prototype.removeAllListeners=Se.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Se.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,t)}return this};Se.prototype.emitReserved=Se.prototype.emit;Se.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Se.prototype.hasListeners=function(e){return!!this.listeners(e).length};const zl=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),wt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ey="arraybuffer";function pp(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const ky=wt.setTimeout,by=wt.clearTimeout;function Wl(e,t){t.useNativeTimers?(e.setTimeoutFn=ky.bind(wt),e.clearTimeoutFn=by.bind(wt)):(e.setTimeoutFn=wt.setTimeout.bind(wt),e.clearTimeoutFn=wt.clearTimeout.bind(wt))}const Sy=1.33;function Ry(e){return typeof e=="string"?Py(e):Math.ceil((e.byteLength||e.size)*Sy)}function Py(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function mp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ty(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Iy(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let l=n[r].split("=");t[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return t}class Oy extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Mc extends Se{constructor(t){super(),this.writable=!1,Wl(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new Oy(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Dc(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=Ty(t);return n.length?"?"+n:""}}class Ay extends Mc{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Ny(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,wy(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=mp()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let vp=!1;try{vp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ly=vp;function $y(){}class Dy extends Ay{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(s,l)=>{this.onError("xhr post error",s,l)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Ft extends Se{constructor(t,n,r){super(),this.createRequest=t,Wl(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=pp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Ft.requestsCount++,Ft.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=$y,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ft.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ft.requestsCount=0;Ft.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",vd);else if(typeof addEventListener=="function"){const e="onpagehide"in wt?"pagehide":"unload";addEventListener(e,vd,!1)}}function vd(){for(let e in Ft.requests)Ft.requests.hasOwnProperty(e)&&Ft.requests[e].abort()}const My=function(){const e=gp({xdomain:!1});return e&&e.responseType!==null}();class By extends Dy{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=My&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ft(gp,this.uri(),t)}}function gp(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Ly))return new XMLHttpRequest}catch{}if(!t)try{return new wt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const yp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Uy extends Mc{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=yp?{}:pp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;$c(r,this.supportsBinary,l=>{try{this.doWrite(r,l)}catch{}s&&zl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=mp()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const jo=wt.WebSocket||wt.MozWebSocket;class Fy extends Uy{createSocket(t,n,r){return yp?new jo(t,n,r):n?new jo(t,n):new jo(t)}doWrite(t,n){this.ws.send(n)}}class zy extends Mc{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=jy(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),s=_y();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const l=()=>{r.read().then(({done:c,value:a})=>{c||(this.onPacket(a),l())}).catch(c=>{})};l();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;this._writer.write(r).then(()=>{s&&zl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Wy={websocket:Fy,webtransport:zy,polling:By},Gy=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Vy=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ra(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=Gy.exec(e||""),l={},o=14;for(;o--;)l[Vy[o]]=s[o]||"";return n!=-1&&r!=-1&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=Hy(l,l.path),l.queryKey=Yy(l,l.query),l}function Hy(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Yy(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,l){s&&(n[s]=l)}),n}const Pa=typeof addEventListener=="function"&&typeof removeEventListener=="function",Yi=[];Pa&&addEventListener("offline",()=>{Yi.forEach(e=>e())},!1);class jn extends Se{constructor(t,n){if(super(),this.binaryType=Ey,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=Ra(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Ra(n.host).host);Wl(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Iy(this.opts.query)),Pa&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Yi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=fp,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&jn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",jn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=Ry(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,zl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const l={type:t,data:n,options:r};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(jn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Pa&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Yi.indexOf(this._offlineEventListener);r!==-1&&Yi.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}jn.protocol=fp;class Ky extends jn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;jn.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;jn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(h(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function l(){r||(r=!0,h(),n.close(),n=null)}const o=f=>{const d=new Error("probe error: "+f);d.transport=n.name,l(),this.emitReserved("upgradeError",d)};function c(){o("transport closed")}function a(){o("socket closed")}function u(f){n&&f.name!==n.name&&l()}const h=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",c),this.off("close",a),this.off("upgrading",u)};n.once("open",s),n.once("error",o),n.once("close",c),this.once("close",a),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let qy=class extends Ky{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>Wy[s]).filter(s=>!!s)),super(t,r)}};function Qy(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=Ra(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const l=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+l+":"+r.port+t,r.href=r.protocol+"://"+l+(n&&n.port===r.port?"":":"+r.port),r}const Jy=typeof ArrayBuffer=="function",Xy=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,xp=Object.prototype.toString,Zy=typeof Blob=="function"||typeof Blob<"u"&&xp.call(Blob)==="[object BlobConstructor]",e0=typeof File=="function"||typeof File<"u"&&xp.call(File)==="[object FileConstructor]";function Bc(e){return Jy&&(e instanceof ArrayBuffer||Xy(e))||Zy&&e instanceof Blob||e0&&e instanceof File}function Ki(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Ki(e[n]))return!0;return!1}if(Bc(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ki(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Ki(e[n]))return!0;return!1}function t0(e){const t=[],n=e.data,r=e;return r.data=Ta(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Ta(e,t){if(!e)return e;if(Bc(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Ta(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Ta(e[r],t));return n}return e}function n0(e,t){return e.data=Ia(e.data,t),delete e.attachments,e}function Ia(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Ia(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Ia(e[n],t));return e}const wp=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],r0=5;var le;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(le||(le={}));class s0{constructor(t){this.replacer=t}encode(t){return(t.type===le.EVENT||t.type===le.ACK)&&Ki(t)?this.encodeAsBinary({type:t.type===le.EVENT?le.BINARY_EVENT:le.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===le.BINARY_EVENT||t.type===le.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=t0(t),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}class Uc extends Se{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===le.BINARY_EVENT;r||n.type===le.BINARY_ACK?(n.type=r?le.EVENT:le.ACK,this.reconstructor=new i0(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Bc(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(le[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===le.BINARY_EVENT||r.type===le.BINARY_ACK){const l=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(l,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const l=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(l,n)}else r.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const l=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(l,n+1))}if(t.charAt(++n)){const l=this.tryParse(t.substr(n));if(Uc.isPayloadValid(r.type,l))r.data=l;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case le.CONNECT:return Nl(n);case le.DISCONNECT:return n===void 0;case le.CONNECT_ERROR:return typeof n=="string"||Nl(n);case le.EVENT:case le.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&wp.indexOf(n[0])===-1);case le.ACK:case le.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class i0{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=n0(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function l0(e){return typeof e=="string"}const o0=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function a0(e){return e===void 0||o0(e)}function Nl(e){return Object.prototype.toString.call(e)==="[object Object]"}function c0(e,t){switch(e){case le.CONNECT:return t===void 0||Nl(t);case le.DISCONNECT:return t===void 0;case le.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&wp.indexOf(t[0])===-1);case le.ACK:return Array.isArray(t);case le.CONNECT_ERROR:return typeof t=="string"||Nl(t);default:return!1}}function u0(e){return l0(e.nsp)&&a0(e.id)&&c0(e.type,e.data)}const d0=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Uc,Encoder:s0,get PacketType(){return le},isPacketValid:u0,protocol:r0},Symbol.toStringTag,{value:"Module"}));function Pt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const h0=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Np extends Se{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Pt(t,"open",this.onopen.bind(this)),Pt(t,"packet",this.onpacket.bind(this)),Pt(t,"error",this.onerror.bind(this)),Pt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,s,l;if(h0.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:le.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const h=this.ids++,f=n.pop();this._registerAckCallback(h,f),o.id=h}const c=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,a=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!c||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},s),o=(...c)=>{this.io.clearTimeoutFn(l),n.apply(this,c)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,s)=>{const l=(o,c)=>o?s(o):r(c);l.withError=!0,n.push(l),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...l)=>(this._queue[0],s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...l)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:le.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case le.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case le.EVENT:case le.BINARY_EVENT:this.onevent(t);break;case le.ACK:case le.BINARY_ACK:this.onack(t);break;case le.DISCONNECT:this.ondisconnect();break;case le.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:le.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:le.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Lr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Lr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Lr.prototype.reset=function(){this.attempts=0};Lr.prototype.setMin=function(e){this.ms=e};Lr.prototype.setMax=function(e){this.max=e};Lr.prototype.setJitter=function(e){this.jitter=e};class Oa extends Se{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Wl(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Lr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||d0;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new qy(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Pt(n,"open",function(){r.onopen(),t&&t()}),l=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},o=Pt(n,"error",l);if(this._timeout!==!1){const c=this._timeout,a=this.setTimeoutFn(()=>{s(),l(new Error("timeout")),n.close()},c);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(s),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Pt(t,"ping",this.onping.bind(this)),Pt(t,"data",this.ondata.bind(this)),Pt(t,"error",this.onerror.bind(this)),Pt(t,"close",this.onclose.bind(this)),Pt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){zl(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Np(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Kr={};function hs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Qy(e,t.path||"/socket.io"),r=n.source,s=n.id,l=n.path,o=Kr[s]&&l in Kr[s].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return c?a=new Oa(r,t):(Kr[s]||(Kr[s]=new Oa(r,t)),a=Kr[s]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(hs,{Manager:Oa,Socket:Np,io:hs,connect:hs});let sr=null;function zt(){return sr||(sr=hs({transports:["websocket"],autoConnect:!0}),sr.on("connect",()=>{const e=mt();sr.emit("session:hello",e)}),sr)}function f0(e,t){const[n,r]=w.useState(!1),[s,l]=w.useState(!1),[o,c]=w.useState([]),[a,u]=w.useState(null),h=w.useRef(null),f=w.useRef(new Map),d=w.useRef(new Map),g=w.useRef(null),m=w.useRef(new Map),N=w.useCallback(j=>{const T=f.current.get(j);T&&(T.close(),f.current.delete(j));const F=d.current.get(j);F&&(F.pause(),F.srcObject=null,F.remove(),d.current.delete(j)),m.current.delete(j)},[]),E=w.useCallback(()=>{f.current.forEach((j,T)=>{N(T)}),h.current&&(h.current.getTracks().forEach(j=>j.stop()),h.current=null)},[N]),v=w.useCallback((j,T)=>{var S;const F=e==null?void 0:e.current;if(!F)return null;const O={iceServers:((S=g.current)==null?void 0:S.iceServers)||[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]},z=new RTCPeerConnection(O);return f.current.set(j,z),h.current&&h.current.getTracks().forEach(b=>{z.addTrack(b,h.current)}),z.ontrack=b=>{let $=d.current.get(j);$||($=document.createElement("audio"),$.autoplay=!0,$.playsInline=!0,d.current.set(j,$)),$.srcObject=b.streams[0]},z.onicecandidate=b=>{b.candidate&&F.emit("voice:ice-candidate",{targetPlayerId:j,candidate:b.candidate})},z.onconnectionstatechange=()=>{(z.connectionState==="failed"||z.connectionState==="disconnected")&&N(j)},(m.current.get(j)||[]).forEach(b=>{z.addIceCandidate(new RTCIceCandidate(b)).catch(()=>{})}),m.current.delete(j),z},[e,N]),p=w.useCallback(async j=>{const T=e==null?void 0:e.current;if(!T)return;const F=v(j,!0);if(F)try{const O=await F.createOffer();await F.setLocalDescription(O),T.emit("voice:offer",{targetPlayerId:j,sdp:F.localDescription})}catch(O){console.error("Failed to create offer:",O),N(j)}},[e,v,N]),_=w.useCallback(async(j,T)=>{const F=e==null?void 0:e.current;if(!F)return;let O=f.current.get(j);if(O||(O=v(j,!1)),!!O)try{await O.setRemoteDescription(new RTCSessionDescription(T));const z=await O.createAnswer();await O.setLocalDescription(z),F.emit("voice:answer",{targetPlayerId:j,sdp:O.localDescription})}catch(z){console.error("Failed to handle offer:",z),N(j)}},[e,v,N]),x=w.useCallback(async(j,T)=>{const F=f.current.get(j);if(F)try{await F.setRemoteDescription(new RTCSessionDescription(T))}catch(O){console.error("Failed to handle answer:",O)}},[]),k=w.useCallback(async(j,T)=>{const F=f.current.get(j);if(!F){const O=m.current.get(j)||[];O.push(T),m.current.set(j,O);return}try{await F.addIceCandidate(new RTCIceCandidate(T))}catch(O){console.error("Failed to add ICE candidate:",O)}},[]),L=w.useCallback(async()=>{const j=e==null?void 0:e.current;if(!(!j||n)){u(null);try{const T=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1});h.current=T,j.emit("voice:get-ice-servers"),j.emit("voice:join"),r(!0)}catch(T){console.error("Failed to join voice:",T),T.name==="NotAllowedError"?u("Microphone access denied"):T.name==="NotFoundError"?u("No microphone found"):u("Failed to join voice chat")}}},[e,n]),y=w.useCallback(()=>{const j=e==null?void 0:e.current;j&&(j.emit("voice:leave"),E(),r(!1),l(!1))},[e,E]),A=w.useCallback(()=>{if(!h.current)return;const j=h.current.getAudioTracks()[0];j&&(j.enabled=!j.enabled,l(!j.enabled))},[]);return w.useEffect(()=>{const j=e==null?void 0:e.current;if(!j)return;const T=$=>{g.current=$},F=({peers:$})=>{const P=$.filter(I=>I.playerId!==(t==null?void 0:t.playerId));c(P)},O=({playerId:$,displayName:P})=>{n&&p($)},z=({playerId:$})=>{N($),c(P=>P.filter(I=>I.playerId!==$))},C=({fromPlayerId:$,sdp:P})=>{n&&_($,P)},S=({fromPlayerId:$,sdp:P})=>{x($,P)},b=({fromPlayerId:$,candidate:P})=>{k($,P)};return j.on("voice:ice-servers",T),j.on("voice:peers",F),j.on("voice:peer-joined",O),j.on("voice:peer-left",z),j.on("voice:offer",C),j.on("voice:answer",S),j.on("voice:ice-candidate",b),()=>{j.off("voice:ice-servers",T),j.off("voice:peers",F),j.off("voice:peer-joined",O),j.off("voice:peer-left",z),j.off("voice:offer",C),j.off("voice:answer",S),j.off("voice:ice-candidate",b)}},[e,t==null?void 0:t.playerId,n,p,_,x,k,N]),w.useEffect(()=>()=>{E()},[E]),{isInVoice:n,isMuted:s,voicePeers:o,error:a,joinVoice:L,leaveVoice:y,toggleMute:A}}function p0({open:e,messages:t,onSend:n,session:r,socketRef:s,typingUsers:l}){const[o,c]=w.useState(""),a=w.useRef(null),u=w.useRef(0);w.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[t]);const h=()=>{const N=s==null?void 0:s.current;if(!N)return;const E=Date.now();E-u.current>=2500&&(N.emit("room:typing"),u.current=E)},f=N=>{c(N.target.value),N.target.value.trim()&&h()},d=N=>{N.preventDefault(),o.trim()&&(n(o),c(""))};if(!e)return null;const g=Array.from((l==null?void 0:l.values())||[]);let m="";return g.length===1?m=`${g[0]} is typing...`:g.length===2?m=`${g[0]} and ${g[1]} are typing...`:g.length>2&&(m=`${g.length} people are typing...`),i.jsxs("aside",{className:"chat-panel",children:[i.jsx("div",{className:"chat-header",children:"Chat"}),i.jsxs("div",{className:"chat-messages",ref:a,children:[t.length===0&&i.jsx("div",{className:"chat-empty",children:"No messages yet"}),t.map(N=>i.jsxs("div",{className:`chat-message ${N.playerId===r.playerId?"own":""}`,children:[i.jsxs("span",{className:"chat-author",children:[N.displayName,":"]}),i.jsx("span",{className:"chat-text",children:N.message})]},N.id))]}),m&&i.jsx("div",{className:"chat-typing",children:m}),i.jsxs("form",{className:"chat-input-form",onSubmit:d,children:[i.jsx("input",{type:"text",className:"chat-input",value:o,onChange:f,placeholder:"Type a message...",maxLength:500}),i.jsx("button",{type:"submit",className:"chat-send-btn",children:"Send"})]})]})}const m0=[{key:"reversi",name:"Reversi",description:"Classic strategy game. Flip your opponent's pieces!",minPlayers:2,maxPlayers:2,modes:[{value:"PVP",label:"Player vs Player"},{value:"AI",label:"vs Computer"}],rules:["Players alternate placing discs.","You must flip at least one opponent disc each move.","Any discs bracketed in a line flip to your color.","Game ends when no moves remain; most discs wins."]},{key:"connect4",name:"Connect 4",description:"Drop pieces to connect four in a row!",minPlayers:2,maxPlayers:2,modes:[{value:"PVP",label:"Player vs Player"},{value:"AI",label:"vs Computer"}],rules:["Players drop a piece into a column each turn.","First to connect four in a row wins.","Lines can be vertical, horizontal, or diagonal."]},{key:"draw",name:"Draw & Guess",description:"Draw and guess words in turns!",minPlayers:2,maxPlayers:12,modes:[{value:"PARTY",label:"Party Mode"}],rules:["One player draws; others guess the word.","Correct guess ends the round and awards points.","Drawer also earns a smaller bonus."]},{key:"charades",name:"Charades",description:"Act out prompts for others to guess!",minPlayers:2,maxPlayers:12,modes:[{value:"PARTY",label:"Party Mode"}],rules:["One player performs a prompt silently.","Others guess before time runs out.","Correct guess ends the round."]},{key:"cribbage",name:"Cribbage",description:"Classic card game. First to 121 points wins!",minPlayers:2,maxPlayers:2,modes:[{value:"2P",label:"2 Player"}],rules:["Each player discards to the dealers crib.","Pegging scores runs, pairs, fifteens, and 31.","Hands and crib are scored after pegging.","First to 121 points wins."]},{key:"catan",name:"Catan",description:"Build settlements, trade resources, conquer the island!",minPlayers:3,maxPlayers:4,modes:[{value:"4P",label:"4 Players"},{value:"3P",label:"3 Players"}],rules:["Roll dice to collect resources from tiles.","Build roads, settlements, and cities.","Trade with players or the bank.","First to 10 victory points wins."]},{key:"uno",name:"UNO",description:"Match colors or numbers, play wilds, be the first to finish!",minPlayers:2,maxPlayers:8,modes:[{value:"STANDARD",label:"Standard"}],rules:["Match color, number, or symbol.","Wilds change color; draw cards when required.","Call UNO when you reach one card.","First to zero cards wins."]},{key:"crazy_eights",name:"Crazy Eights",description:"Match suits or ranks, play 8s as wilds, and empty your hand!",minPlayers:2,maxPlayers:6,modes:[{value:"STANDARD",label:"Standard"}],rules:["Match suit or rank of the discard.","Eights are wild; declare the next suit.","Draw when you have no playable card.","First to empty your hand wins."]},{key:"chess",name:"Chess",description:"Classic chess. Checkmate the opponent to win.",minPlayers:2,maxPlayers:2,modes:[{value:"PVP",label:"Player vs Player"},{value:"AI",label:"vs Computer (WIP)"}],rules:["White moves first; players alternate turns.","Checkmate ends the game immediately.","Stalemate or repetition is a draw.","You can offer or accept a draw at any time."]},{key:"fibbage",name:"Fibbage",description:"Write fake answers to fool others. Spot the truth!",minPlayers:3,maxPlayers:8,modes:[{value:"PARTY",label:"Party Mode"}],rules:["Write a believable lie for the prompt.","Vote for the truth among the choices.","Score for guessing right and fooling others."]},{key:"wordle",name:"Wordle",description:"Guess the 5-letter word! Race against others.",minPlayers:2,maxPlayers:8,modes:[{value:"STANDARD",label:"Standard (3 rounds)"},{value:"QUICK",label:"Quick (1 round)"},{value:"LONG",label:"Long (5 rounds)"}],rules:["Everyone guesses the same secret word.","Green = correct letter and position.","Yellow = correct letter, wrong position.","Gray = letter not in the word.","First to solve wins the round!"]}];function v0({onSelect:e,playerCount:t,isHost:n}){const[r,s]=w.useState(null),[l,o]=w.useState(null),[c,a]=w.useState(null),u=(d,g)=>{if(d.key==="catan"){if(g==="4P")return t>=4;if(g==="3P")return t>=3}return t>=d.minPlayers},h=d=>{s(d);const g=d.modes.find(m=>u(d,m.value));o((g==null?void 0:g.value)||null)},f=()=>{!r||!l||e(r.key,l)};return n?i.jsxs("div",{className:"game-selector",children:[i.jsx("h2",{className:"game-selector-title",children:"Choose a Game"}),i.jsxs("p",{className:"game-selector-subtitle",children:[t," player",t!==1?"s":""," in room"]}),i.jsx("div",{className:"game-grid",children:m0.map(d=>{const g=t>=d.minPlayers,m=(r==null?void 0:r.key)===d.key;return i.jsxs("div",{className:`game-card ${m?"selected":""} ${g?"":"disabled"}`,onClick:()=>g&&h(d),role:"button",tabIndex:g?0:-1,"aria-disabled":!g,onKeyDown:N=>{g&&(N.key==="Enter"||N.key===" ")&&h(d)},children:[i.jsx("div",{className:"game-card-name",children:d.name}),i.jsx("div",{className:"game-card-desc",children:d.description}),i.jsx("div",{className:"game-card-players",children:d.minPlayers===d.maxPlayers?`${d.minPlayers} players`:`${d.minPlayers}-${d.maxPlayers} players`}),!g&&i.jsxs("div",{className:"game-card-warning",children:["Need ",d.minPlayers," players"]}),i.jsx("div",{className:"game-card-actions",children:i.jsx("button",{className:"game-card-rules",onClick:N=>{N.stopPropagation(),a(d)},children:"Rules"})})]},d.key)})}),r&&i.jsxs("div",{className:"game-mode-select",children:[i.jsx("div",{className:"mode-label",children:"Game Mode:"}),i.jsx("div",{className:"mode-options",children:r.modes.map(d=>i.jsx("button",{className:`mode-btn ${l===d.value?"active":""}`,onClick:()=>u(r,d.value)&&o(d.value),disabled:!u(r,d.value),children:d.label},d.value))}),i.jsxs("button",{className:"room-btn primary confirm-btn",onClick:f,disabled:!l,children:["Select ",r.name]})]}),c&&i.jsx("div",{className:"rules-modal-overlay",onClick:()=>a(null),children:i.jsxs("div",{className:"rules-modal",onClick:d=>d.stopPropagation(),children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h3",{children:[c.name," Rules"]}),i.jsx("button",{className:"close-btn",onClick:()=>a(null),children:""})]}),i.jsx("ul",{className:"rules-list",children:c.rules.map(d=>i.jsx("li",{children:d},d))})]})})]}):i.jsx("div",{className:"game-selector",children:i.jsxs("div",{className:"game-selector-waiting",children:[i.jsx("h2",{children:"Waiting for Host"}),i.jsx("p",{children:"The host will select a game to play."}),i.jsxs("p",{className:"player-count",children:[t," player",t!==1?"s":""," in room"]})]})})}function g0({isInVoice:e,isMuted:t,voicePeers:n,error:r,onJoin:s,onLeave:l,onToggleMute:o,players:c,session:a}){const u=h=>{const f=c.find(d=>d.playerId===h);return(f==null?void 0:f.displayName)||"Unknown"};return i.jsxs("div",{className:"voice-panel",children:[i.jsx("div",{className:"voice-panel-title",children:"Voice Chat"}),r&&i.jsx("div",{className:"voice-error",children:r}),i.jsx("div",{className:"voice-controls",children:e?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:`room-btn voice-mute-btn ${t?"muted":""}`,onClick:o,children:t?"Unmute":"Mute"}),i.jsx("button",{className:"room-btn secondary voice-leave-btn",onClick:l,children:"Leave"})]}):i.jsx("button",{className:"room-btn primary voice-join-btn",onClick:s,children:"Join Voice"})}),e&&i.jsxs("div",{className:"voice-peer-list",children:[i.jsxs("div",{className:"voice-peer you",children:[i.jsx("span",{className:"voice-peer-icon",children:t?"":""}),i.jsxs("span",{className:"voice-peer-name",children:[a==null?void 0:a.displayName," (You)"]})]}),n.map(h=>i.jsxs("div",{className:"voice-peer",children:[i.jsx("span",{className:"voice-peer-icon",children:""}),i.jsx("span",{className:"voice-peer-name",children:u(h.playerId)})]},h.playerId)),n.length===0&&i.jsx("div",{className:"voice-empty",children:"Waiting for others to join..."})]}),!e&&n.length>0&&i.jsxs("div",{className:"voice-active-hint",children:[n.length," ",n.length===1?"person":"people"," in voice"]}),c.length>6&&!e&&i.jsx("div",{className:"voice-warning",children:"Voice works best with 6 or fewer players"})]})}function y0({room:e,gameState:t,session:n,players:r,isHost:s,gameFinished:l,onAction:o,onRematch:c,onSwitchGame:a}){var v,p,_,x,k;const u=(t==null?void 0:t.board)||[],h=new Set(((t==null?void 0:t.legalMoves)||[]).map(L=>`${L.r}-${L.c}`)),f=r.findIndex(L=>L.playerId===n.playerId),d=f===0?"B":f===1?"W":null,g=d&&(t==null?void 0:t.turn)===d&&!l,m=(v=t==null?void 0:t.ai)==null?void 0:v.enabled,N=(L,y)=>{g&&h.has(`${L}-${y}`)&&(ee(),q("place"),o({type:"MOVE",payload:{row:L,col:y}}))},E=()=>{if(l){const L=t==null?void 0:t.winner;return L==="DRAW"?"Game ended in a draw!":L===d?"You won!":m&&L==="W"?"Computer wins!":`${L==="B"?"Black":"White"} wins!`}return!r.length||r.length<2?"Waiting for opponent...":g?"Your turn":m&&(t==null?void 0:t.turn)==="W"?"Computer is thinking...":"Waiting for opponent..."};return i.jsxs("div",{className:"reversi-game-area",children:[i.jsxs("div",{className:"reversi-scoreboard",children:[i.jsxs("div",{className:`reversi-score-card ${(t==null?void 0:t.turn)==="B"&&!l?"active":""} ${(t==null?void 0:t.winner)==="B"?"winner":""}`,children:[i.jsx("div",{className:"piece black"}),i.jsxs("div",{className:"score-info",children:[i.jsx("span",{className:"score-label",children:"Black"}),i.jsx("span",{className:"score-name",children:((p=r[0])==null?void 0:p.displayName)||"Waiting..."})]}),i.jsx("span",{className:"score-count",children:((_=t==null?void 0:t.counts)==null?void 0:_.B)??0})]}),i.jsx("div",{className:"score-vs",children:"VS"}),i.jsxs("div",{className:`reversi-score-card ${(t==null?void 0:t.turn)==="W"&&!l?"active":""} ${(t==null?void 0:t.winner)==="W"?"winner":""}`,children:[i.jsx("div",{className:"piece white"}),i.jsxs("div",{className:"score-info",children:[i.jsx("span",{className:"score-label",children:"White"}),i.jsx("span",{className:"score-name",children:m?"Computer":((x=r[1])==null?void 0:x.displayName)||"Waiting..."})]}),i.jsx("span",{className:"score-count",children:((k=t==null?void 0:t.counts)==null?void 0:k.W)??0})]})]}),i.jsx("div",{className:"reversi-status",children:E()}),i.jsx("div",{className:"reversi-board-wrap",children:i.jsx("div",{className:"reversi-board",children:u.map((L,y)=>L.map((A,j)=>{var z,C;const T=`${y}-${j}`,F=g&&h.has(T),O=((z=t==null?void 0:t.lastMove)==null?void 0:z.r)===y&&((C=t==null?void 0:t.lastMove)==null?void 0:C.c)===j;return i.jsxs("div",{className:`reversi-cell ${F?"legal":""} ${O?"last-move":""}`,onClick:()=>N(y,j),children:[A==="B"&&i.jsx("div",{className:"piece black"}),A==="W"&&i.jsx("div",{className:"piece white"})]},T)}))})}),l&&s&&i.jsxs("div",{className:"game-end-actions",children:[i.jsx("button",{className:"room-btn primary",onClick:c,children:"Play Again"}),i.jsx("button",{className:"room-btn secondary",onClick:a,children:"Switch Game"})]})]})}const x0=6,gd=7;function w0({room:e,gameState:t,session:n,players:r,isHost:s,gameFinished:l,onAction:o,onRematch:c,onSwitchGame:a}){var L,y,A;const[u,h]=w.useState(-1),f=(t==null?void 0:t.board)||Array(gd).fill([]),d=new Set((t==null?void 0:t.legalMoves)||[]),g=(t==null?void 0:t.winningCells)||[],m=new Set(g.map(j=>`${j.col}-${j.row}`)),N=r.findIndex(j=>j.playerId===n.playerId),E=N===0?"red":N===1?"yellow":null,v=E&&(t==null?void 0:t.turn)===E&&!l,p=(L=t==null?void 0:t.ai)==null?void 0:L.enabled,_=j=>{v&&d.has(j)&&(ee(),q("place"),o({type:"MOVE",payload:{col:j}}))},x=()=>l?(t==null?void 0:t.winner)==="draw"?"Game ended in a draw!":(t==null?void 0:t.winner)===E?"You won!":p&&(t==null?void 0:t.winner)==="yellow"?"Computer wins!":`${(t==null?void 0:t.winner)==="red"?"Red":"Yellow"} wins!`:r.length<2&&!p?"Waiting for opponent...":v?"Your turn - drop a piece!":p&&(t==null?void 0:t.turn)==="yellow"?"Computer is thinking...":"Waiting for opponent...",k=()=>{var T;const j=[];for(let F=x0-1;F>=0;F--)for(let O=0;O<gd;O++){const z=((T=f[O])==null?void 0:T[F])||null,C=m.has(`${O}-${F}`),S=u===O&&!z&&v;j.push(i.jsx("div",{className:`c4-cell ${S?"hovered":""}`,onClick:()=>_(O),onMouseEnter:()=>h(O),onMouseLeave:()=>h(-1),children:i.jsxs("div",{className:"c4-hole",children:[z&&i.jsx("div",{className:`c4-piece ${z} ${C?"winning":""}`}),S&&!z&&i.jsx("div",{className:`c4-piece ${E} preview`})]})},`${O}-${F}`))}return j};return i.jsxs("div",{className:"connect4-game-area",children:[i.jsxs("div",{className:"c4-scoreboard",children:[i.jsxs("div",{className:`c4-player-card ${(t==null?void 0:t.turn)==="red"&&!l?"active":""} ${(t==null?void 0:t.winner)==="red"?"winner":""}`,children:[i.jsx("div",{className:"c4-piece red small"}),i.jsxs("div",{className:"c4-player-info",children:[i.jsx("span",{className:"c4-player-name",children:((y=r[0])==null?void 0:y.displayName)||"Waiting..."}),i.jsx("span",{className:"c4-player-label",children:"Red"})]})]}),i.jsx("div",{className:"c4-vs",children:"VS"}),i.jsxs("div",{className:`c4-player-card ${(t==null?void 0:t.turn)==="yellow"&&!l?"active":""} ${(t==null?void 0:t.winner)==="yellow"?"winner":""}`,children:[i.jsx("div",{className:"c4-piece yellow small"}),i.jsxs("div",{className:"c4-player-info",children:[i.jsx("span",{className:"c4-player-name",children:p?"Computer":((A=r[1])==null?void 0:A.displayName)||"Waiting..."}),i.jsx("span",{className:"c4-player-label",children:"Yellow"})]})]})]}),i.jsx("div",{className:"c4-status",children:x()}),i.jsx("div",{className:"c4-board-container",children:i.jsx("div",{className:"c4-board",children:k()})}),l&&s&&i.jsxs("div",{className:"game-end-actions",children:[i.jsx("button",{className:"room-btn primary",onClick:c,children:"Play Again"}),i.jsx("button",{className:"room-btn secondary",onClick:a,children:"Switch Game"})]})]})}const yd=["#101820","#F94144","#F3722C","#F9C74F","#43AA8B","#577590","#4D4DFF"];function N0({room:e,gameState:t,session:n,players:r,isHost:s,gameFinished:l,onAction:o,onRematch:c,onSwitchGame:a,timeLeft:u,socketRef:h}){const f=w.useRef(null),d=w.useRef(!1),g=w.useRef(null),[m,N]=w.useState(""),[E,v]=w.useState(yd[0]),[p,_]=w.useState(6),x=(t==null?void 0:t.drawerId)===n.playerId,k=(t==null?void 0:t.phase)||"LOBBY",L=k==="REVEAL"||x?t==null?void 0:t.word:null;w.useEffect(()=>{const b=h==null?void 0:h.current;if(!b)return;const $=I=>{A(I)},P=()=>{j()};return b.on("game:stroke",$),b.on("game:clear",P),()=>{b.off("game:stroke",$),b.off("game:clear",P)}},[h]),w.useEffect(()=>{t!=null&&t.strokes&&T(t.strokes)},[t==null?void 0:t.round]);const y=b=>{const $=f.current,P=$.getBoundingClientRect();return{x:(b.clientX-P.left)/P.width*$.width,y:(b.clientY-P.top)/P.height*$.height}},A=b=>{const $=f.current;if(!$)return;const P=$.getContext("2d");if(!P)return;const{points:I,color:V,size:U}=b;!I||I.length<2||(P.strokeStyle=V,P.lineWidth=U,P.lineCap="round",P.beginPath(),P.moveTo(I[0].x,I[0].y),P.lineTo(I[1].x,I[1].y),P.stroke())},j=()=>{const b=f.current;if(!b)return;const $=b.getContext("2d");$&&$.clearRect(0,0,b.width,b.height)},T=b=>{j(),b.forEach(A)},F=b=>{!x||k!=="DRAWING"||(d.current=!0,g.current=y(b))},O=b=>{if(!d.current||!x)return;const $=y(b),P={points:[g.current,$],color:E,size:p};g.current=$,A(P),o({type:"STROKE",payload:P})},z=()=>{d.current=!1,g.current=null},C=()=>{const b=m.trim();b&&(ee(),q("beep"),o({type:"GUESS",payload:b}),N(""))},S=(t==null?void 0:t.players)||[];return i.jsxs("div",{className:"draw-game-area",children:[i.jsxs("div",{className:"draw-header",children:[i.jsxs("div",{className:"draw-info",children:[i.jsxs("span",{className:"draw-round",children:["Round ",(t==null?void 0:t.round)||0]}),i.jsx("span",{className:"draw-phase",children:k}),u>0&&i.jsxs("span",{className:"draw-timer",children:[u,"s"]})]}),L&&i.jsx("div",{className:"draw-word",children:L}),!L&&k==="DRAWING"&&i.jsx("div",{className:"draw-word-hidden",children:"????"})]}),i.jsxs("div",{className:"draw-content",children:[i.jsxs("div",{className:"draw-player-sidebar",children:[i.jsx("div",{className:"draw-panel-title",children:"Scores"}),S.map(b=>{var $;return i.jsxs("div",{className:`draw-player-item ${b.playerId===(t==null?void 0:t.drawerId)?"active":""}`,children:[i.jsx("span",{className:"draw-player-name",children:b.displayName}),i.jsx("span",{className:"draw-player-score",children:(($=t==null?void 0:t.scores)==null?void 0:$[b.playerId])||0})]},b.playerId)})]}),i.jsxs("div",{className:"draw-main",children:[k==="LOBBY"?i.jsxs("div",{className:"draw-lobby",children:[i.jsx("h3",{children:"Draw & Guess"}),i.jsxs("p",{children:[S.length," players ready"]}),i.jsx("p",{className:"draw-waiting",children:s?S.length>=2?"Use the Start Game button in the sidebar":"Need at least 2 players":"Waiting for host to start..."})]}):i.jsx("canvas",{ref:f,className:"draw-canvas",width:800,height:500,onPointerDown:F,onPointerMove:O,onPointerUp:z,onPointerLeave:z}),x&&k==="DRAWING"&&i.jsxs("div",{className:"draw-tools",children:[i.jsx("div",{className:"draw-colors",children:yd.map(b=>i.jsx("button",{className:`draw-swatch ${b===E?"active":""}`,style:{backgroundColor:b},onClick:()=>v(b)},b))}),i.jsxs("label",{className:"draw-size",children:[i.jsx("span",{children:"Brush"}),i.jsx("input",{type:"range",min:"2",max:"16",value:p,onChange:b=>_(Number(b.target.value))})]})]})]}),i.jsxs("div",{className:"draw-feed-sidebar",children:[i.jsx("div",{className:"draw-panel-title",children:"Guesses"}),i.jsx("div",{className:"draw-feed",children:((t==null?void 0:t.feed)||[]).map((b,$)=>i.jsx("div",{className:`draw-feed-item ${b.type}`,children:b.message},`${b.timestamp}-${$}`))}),!x&&k==="DRAWING"&&i.jsxs("div",{className:"draw-guess-input",children:[i.jsx("input",{value:m,onChange:b=>N(b.target.value),placeholder:"Type your guess",onKeyDown:b=>{b.key==="Enter"&&C()}}),i.jsx("button",{className:"room-btn primary",onClick:C,children:"Guess"})]}),x&&k==="DRAWING"&&i.jsx("div",{className:"draw-drawer-msg",children:"You are drawing!"})]})]}),l&&s&&i.jsxs("div",{className:"game-end-actions",children:[i.jsx("button",{className:"room-btn primary",onClick:c,children:"Play Again"}),i.jsx("button",{className:"room-btn secondary",onClick:a,children:"Switch Game"})]})]})}function _0({room:e,gameState:t,session:n,players:r,isHost:s,gameFinished:l,onAction:o,onRematch:c,onSwitchGame:a,timeLeft:u}){const[h,f]=w.useState(""),d=(t==null?void 0:t.performerId)===n.playerId,g=(t==null?void 0:t.phase)||"LOBBY",m=t==null?void 0:t.prompt,N=(t==null?void 0:t.guesses)||[],E=()=>{const x=h.trim();x&&(ee(),q("beep"),o({type:"GUESS",payload:x}),f(""))},v=(t==null?void 0:t.players)||[],p=v.find(x=>x.playerId===(t==null?void 0:t.performerId)),_=x=>({MOVIES:"Movie",ACTIONS:"Action",ANIMALS:"Animal",OCCUPATIONS:"Job",SPORTS:"Sport",OBJECTS:"Object",FAMOUS:"Famous Person",PHRASES:"Phrase"})[x]||x;return i.jsxs("div",{className:"charades-game-area",children:[i.jsxs("div",{className:"charades-header",children:[i.jsxs("div",{className:"charades-info",children:[i.jsxs("span",{className:"charades-round",children:["Round ",(t==null?void 0:t.round)||0]}),i.jsx("span",{className:"charades-phase",children:g}),u>0&&i.jsxs("span",{className:"charades-timer",children:[u,"s"]})]}),g!=="LOBBY"&&p&&i.jsx("div",{className:"charades-performer",children:d?"You are performing!":`${p.displayName} is performing`})]}),i.jsxs("div",{className:"charades-content",children:[i.jsxs("div",{className:"charades-player-sidebar",children:[i.jsx("div",{className:"charades-panel-title",children:"Scores"}),v.map(x=>{var k;return i.jsxs("div",{className:`charades-player-item ${x.playerId===(t==null?void 0:t.performerId)?"active":""}`,children:[i.jsx("span",{className:"charades-player-name",children:x.displayName}),i.jsx("span",{className:"charades-player-score",children:((k=t==null?void 0:t.scores)==null?void 0:k[x.playerId])||0})]},x.playerId)})]}),i.jsxs("div",{className:"charades-main",children:[g==="LOBBY"&&i.jsxs("div",{className:"charades-lobby",children:[i.jsx("h3",{children:"Charades"}),i.jsxs("p",{children:[v.length," players ready"]}),i.jsx("p",{className:"charades-waiting",children:s?v.length>=2?"Use the Start Game button in the sidebar":"Need at least 2 players":"Waiting for host to start..."})]}),g==="PERFORMING"&&d&&i.jsxs("div",{className:"charades-prompt-card",children:[i.jsx("div",{className:"charades-prompt-label",children:"Act out:"}),i.jsx("div",{className:"charades-prompt-text",children:m==null?void 0:m.text}),i.jsxs("div",{className:"charades-prompt-category",children:["Category: ",_(m==null?void 0:m.category)]}),i.jsx("p",{className:"charades-performer-tip",children:"Act it out! No speaking or pointing at objects."})]}),g==="PERFORMING"&&!d&&i.jsxs("div",{className:"charades-guess-area",children:[i.jsxs("div",{className:"charades-category-hint",children:["Category: ",_(m==null?void 0:m.category)]}),i.jsx("p",{className:"charades-guess-tip",children:"Watch the performer and type your guess!"}),i.jsxs("div",{className:"charades-guess-input",children:[i.jsx("input",{value:h,onChange:x=>f(x.target.value),placeholder:"Type your guess",onKeyDown:x=>{x.key==="Enter"&&E()}}),i.jsx("button",{className:"room-btn primary",onClick:E,children:"Guess"})]})]}),g==="REVEAL"&&i.jsxs("div",{className:"charades-reveal",children:[i.jsx("div",{className:"charades-reveal-label",children:"The answer was:"}),i.jsx("div",{className:"charades-reveal-text",children:m==null?void 0:m.text}),i.jsxs("div",{className:"charades-reveal-category",children:["Category: ",_(m==null?void 0:m.category)]})]})]}),i.jsxs("div",{className:"charades-guesses-sidebar",children:[i.jsx("div",{className:"charades-panel-title",children:"Wrong Guesses"}),i.jsxs("div",{className:"charades-guesses-list",children:[N.length===0&&g==="PERFORMING"&&i.jsx("div",{className:"charades-no-guesses",children:"No guesses yet"}),N.map((x,k)=>i.jsxs("div",{className:"charades-guess-item",children:[i.jsxs("span",{className:"charades-guess-author",children:[x.displayName,":"]}),i.jsx("span",{className:"charades-guess-text",children:x.text})]},`${x.timestamp}-${k}`))]}),i.jsx("div",{className:"charades-feed",children:((t==null?void 0:t.feed)||[]).slice(-5).map((x,k)=>i.jsx("div",{className:`charades-feed-item ${x.type}`,children:x.message},`${x.timestamp}-${k}`))})]})]}),l&&s&&i.jsxs("div",{className:"game-end-actions",children:[i.jsx("button",{className:"room-btn primary",onClick:c,children:"Play Again"}),i.jsx("button",{className:"room-btn secondary",onClick:a,children:"Switch Game"})]})]})}function _p({children:e,className:t=""}){return i.jsx("div",{className:`table-surface ${t}`,children:e})}const j0={C:"clubs",D:"diamonds",H:"hearts",S:"spades"},C0={A:"ace",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",J:"jack",Q:"queen",K:"king"};function E0(e){const t=e.slice(-1);return{rank:e.slice(0,-1),suit:t}}function k0(e){const{rank:t,suit:n}=E0(e),r=C0[t],s=j0[n];return`/cards/${r}_of_${s}.png`}function Wn({cardId:e,faceUp:t=!0,selected:n=!1,onClick:r,disabled:s=!1,size:l="md",className:o=""}){const c={sm:{width:48,height:67},md:{width:72,height:101},lg:{width:96,height:134}},{width:a,height:u}=c[l]||c.md,h=t&&e?k0(e):"/cards/back.png",f=()=>{!s&&r&&r(e)};return i.jsx("div",{className:`card ${n?"card--selected":""} ${s?"card--disabled":""} ${r&&!s?"card--clickable":""} ${o}`,style:{width:a,height:u},onClick:f,role:r?"button":void 0,tabIndex:r&&!s?0:void 0,onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&f()},children:i.jsx("img",{src:h,alt:t&&e?e:"Card back",className:"card__image",draggable:!1})})}function Aa({cards:e=[],faceUp:t=!0,selectedIds:n=[],onCardClick:r,disabledIds:s=[],size:l="md",overlap:o=.5,fanAngle:c=0,className:a=""}){const u={sm:48,md:72,lg:96},h=u[l]||u.md,f=h*(1-o),d=e.length>0?h+(e.length-1)*f:0;return i.jsx("div",{className:`hand ${a}`,style:{position:"relative",width:d,display:"inline-flex"},children:e.map((g,m)=>{const N=n.includes(g),E=s.includes(g),v=(e.length-1)/2,p=c>0?(m-v)*(c/Math.max(1,e.length-1)):0,_={position:"absolute",left:m*f,transform:`
            translateY(${N?-12:0}px)
            rotate(${p}deg)
          `,transformOrigin:"bottom center",transition:"transform 0.15s ease",zIndex:m};return i.jsx("div",{style:_,children:i.jsx(Wn,{cardId:g,faceUp:t,selected:N,disabled:E,onClick:r,size:l})},g)})})}function b0({cards:e=[],faceUp:t=!1,size:n="md",maxVisible:r=4,offsetX:s=2,offsetY:l=1,label:o=null,className:c=""}){const a=e.slice(-r),u=Math.max(0,e.length-r),h={sm:{width:48,height:67},md:{width:72,height:101},lg:{width:96,height:134}},{width:f,height:d}=h[n]||h.md,g=f+(a.length-1)*s,m=d+(a.length-1)*l;return i.jsxs("div",{className:`card-stack ${c}`,children:[i.jsx("div",{className:"card-stack__cards",style:{position:"relative",width:g,height:m},children:a.length===0?i.jsx("div",{className:"card-stack__empty",style:{width:f,height:d,border:"2px dashed rgba(255,255,255,0.3)",borderRadius:6}}):a.map((N,E)=>i.jsx("div",{style:{position:"absolute",left:E*s,top:E*l,zIndex:E},children:i.jsx(Wn,{cardId:N,faceUp:t,size:n})},N||`hidden-${E}`))}),o&&i.jsx("div",{className:"card-stack__label",children:o}),u>0&&i.jsxs("div",{className:"card-stack__count",children:["+",u]})]})}function S0({scores:e=[0,0],previousScores:t=[0,0],playerNames:n=["Player 1","Player 2"],targetScore:r=121,compact:s=!1}){const l=["#3b82f6","#ef4444"],o=a=>{const u=Math.min(e[a],r),h=Math.min(t[a],r),f=l[a],d=[];for(let g=0;g<=r;g++){const m=g===u&&u>0,N=g===h&&h>0&&h!==u;d.push(i.jsx("div",{className:`score-track__hole ${g%5===0?"score-track__hole--fifth":""}`,title:`${g}`,children:(m||N)&&i.jsx("div",{className:`score-track__peg ${m?"score-track__peg--front":"score-track__peg--back"}`,style:{backgroundColor:f}})},g))}return d},c=a=>{var d,g;const u=e[a],h=Math.max(0,r-u),f=l[a];return i.jsxs("div",{className:"score-track__player-score",children:[i.jsx("div",{className:"score-track__player-badge",style:{backgroundColor:f},children:i.jsx("span",{className:"score-track__player-initial",children:((g=(d=n[a])==null?void 0:d[0])==null?void 0:g.toUpperCase())||a+1})}),i.jsxs("div",{className:"score-track__score-info",children:[i.jsx("div",{className:"score-track__score-value",children:u}),h>0&&i.jsxs("div",{className:"score-track__to-go",children:[h," to go"]}),h===0&&i.jsx("div",{className:"score-track__winner",children:"Winner!"})]})]})};return s?i.jsx("div",{className:"score-track score-track--compact",children:[0,1].map(a=>{var u,h;return i.jsxs("div",{className:"score-track__compact-row",children:[i.jsx("div",{className:"score-track__compact-badge",style:{backgroundColor:l[a]},children:((h=(u=n[a])==null?void 0:u[0])==null?void 0:h.toUpperCase())||a+1}),i.jsx("div",{className:"score-track__compact-bar",children:i.jsx("div",{className:"score-track__compact-fill",style:{width:`${e[a]/r*100}%`,backgroundColor:l[a]}})}),i.jsx("div",{className:"score-track__compact-score",children:e[a]})]},a)})}):i.jsxs("div",{className:"score-track",children:[i.jsxs("div",{className:"score-track__header",children:[c(0),i.jsx("div",{className:"score-track__vs",children:"vs"}),c(1)]}),i.jsxs("div",{className:"score-track__board",children:[i.jsx("div",{className:"score-track__lane score-track__lane--1",children:o(0)}),i.jsx("div",{className:"score-track__lane score-track__lane--2",children:o(1)})]}),i.jsxs("div",{className:"score-track__labels",children:[i.jsx("span",{children:"0"}),i.jsx("span",{children:"30"}),i.jsx("span",{children:"60"}),i.jsx("span",{children:"90"}),i.jsx("span",{children:"121"})]})]})}function R0({gameState:e,playerId:t,players:n,onAction:r,isHost:s}){var tt,Pn,Tn,In;const[l,o]=w.useState([]),{phase:c="LOBBY",round:a=0,dealerIndex:u=0,turnIndex:h=0,hands:f=[],pegHands:d=[],crib:g=[],starter:m=null,playStack:N=[],playCount:E=0,goFlags:v=[],scores:p=[0,0],previousScores:_=[0,0],targetScore:x=121,lastPeggingScore:k=null,showingHand:L=null,discardedFlags:y=[]}=e||{},A=n.findIndex(ge=>ge.playerId===t),j=A===0?1:0,T=[((tt=n[0])==null?void 0:tt.displayName)||"Player 1",((Pn=n[1])==null?void 0:Pn.displayName)||"Player 2"],F=f[A]||[],O=d[A]||[],z=((Tn=f[j])==null?void 0:Tn.length)||0,C=((In=d[j])==null?void 0:In.length)||0,S=h===A,b=u===A,$=w.useMemo(()=>c!=="PEGGING"||!S?[]:O.filter(ge=>{const Pe=ge.slice(0,-1),Et=["J","Q","K"].includes(Pe)?10:Pe==="A"?1:parseInt(Pe);return E+Et<=31}),[c,S,O,E]),P=c==="PEGGING"&&S&&$.length===0&&O.length>0,I=ge=>{c==="DISCARD"&&(y!=null&&y[A]||o(Pe=>Pe.includes(ge)?Pe.filter(Et=>Et!==ge):Pe.length>=2?Pe:[...Pe,ge]))},V=()=>{l.length===2&&(r({type:"DISCARD",payload:{cardIds:l}}),o([]))},U=()=>{r({type:"CUT"})},W=ge=>{$.includes(ge)&&r({type:"PLAY_CARD",payload:{cardId:ge}})},Q=()=>{r({type:"GO"})},se=()=>{r({type:"CONFIRM_SHOW"})},ne=()=>{r({type:"NEXT_ROUND"})},ue=()=>{switch(c){case"LOBBY":return i.jsxs("div",{className:"cribbage__lobby",children:[i.jsx("h2",{children:"Cribbage"}),i.jsx("p",{children:"Waiting for players..."}),i.jsxs("p",{children:[n.length,"/2 players"]}),s&&n.length>=2&&i.jsx("p",{className:"cribbage__hint",children:"Press Start Game when ready"})]});case"DEAL":return i.jsxs("div",{className:"cribbage__dealing",children:[i.jsx("h3",{children:"Dealing cards..."}),i.jsxs("p",{children:["Round ",a]}),i.jsxs("p",{children:[T[u]," is dealing"]})]});case"DISCARD":return i.jsxs("div",{className:"cribbage__discard-phase",children:[i.jsxs("div",{className:"cribbage__phase-info",children:[i.jsx("h3",{children:"Discard Phase"}),i.jsxs("p",{children:["Select 2 cards to discard to ",b?"your":`${T[u]}'s`," crib"]})]}),y!=null&&y[A]?i.jsx("p",{className:"cribbage__waiting",children:"Waiting for opponent to discard..."}):i.jsxs("button",{className:"cribbage__action-btn",onClick:V,disabled:l.length!==2,children:["Discard (",l.length,"/2)"]})]});case"CUT":return i.jsxs("div",{className:"cribbage__cut-phase",children:[i.jsx("h3",{children:"Cut the Deck"}),b?i.jsx("p",{className:"cribbage__waiting",children:"Waiting for opponent to cut..."}):i.jsx("button",{className:"cribbage__action-btn",onClick:U,children:"Cut Deck"})]});case"PEGGING":return i.jsxs("div",{className:"cribbage__pegging-phase",children:[i.jsxs("div",{className:"cribbage__phase-info",children:[i.jsxs("h3",{children:["Pegging - Count: ",E]}),S?$.length>0?i.jsx("p",{children:"Play a card (click one below)"}):P?i.jsx("p",{children:'No playable cards - say "Go"'}):i.jsx("p",{children:"Calculating..."}):i.jsxs("p",{children:["Waiting for ",T[j],"..."]})]}),P&&i.jsx("button",{className:"cribbage__action-btn cribbage__go-btn",onClick:Q,children:"Go!"}),k&&i.jsxs("div",{className:"cribbage__pegging-score",children:["+",k.points," (",k.reason,")"]})]});case"SHOW":return i.jsxs("div",{className:"cribbage__show-phase",children:[i.jsx("h3",{children:"Showing Hands"}),L!==null&&i.jsxs("p",{children:[T[L]," is showing their hand"]}),i.jsx("button",{className:"cribbage__action-btn",onClick:se,children:"Continue"})]});case"CRIB_SHOW":return i.jsxs("div",{className:"cribbage__crib-show-phase",children:[i.jsx("h3",{children:"Counting the Crib"}),i.jsxs("p",{children:[T[u],"'s crib"]}),i.jsx("button",{className:"cribbage__action-btn",onClick:se,children:"Continue"})]});case"ROUND_END":return i.jsxs("div",{className:"cribbage__round-end",children:[i.jsxs("h3",{children:["Round ",a," Complete!"]}),i.jsxs("div",{className:"cribbage__round-scores",children:[i.jsxs("p",{children:[T[0],": ",p[0]," points"]}),i.jsxs("p",{children:[T[1],": ",p[1]," points"]})]}),s&&i.jsx("button",{className:"cribbage__action-btn",onClick:ne,children:"Next Round"})]});case"GAME_END":const ge=p[0]>=x?0:1,Pe=ge===A;return i.jsxs("div",{className:"cribbage__game-end",children:[i.jsx("h2",{children:Pe?"You Win!":"You Lose"}),i.jsxs("p",{children:[T[ge]," wins with ",p[ge]," points!"]}),i.jsxs("div",{className:"cribbage__final-scores",children:[i.jsxs("p",{children:[T[0],": ",p[0]]}),i.jsxs("p",{children:[T[1],": ",p[1]]})]})]});default:return i.jsxs("div",{children:["Unknown phase: ",c]})}},oe=()=>{const ge=c==="PEGGING"?C:z;return i.jsxs("div",{className:"cribbage__opponent-area",children:[i.jsxs("div",{className:"cribbage__opponent-info",children:[i.jsx("span",{className:"cribbage__player-name",children:T[j]}),u===j&&i.jsx("span",{className:"cribbage__dealer-badge",children:"Dealer"}),h===j&&c==="PEGGING"&&i.jsx("span",{className:"cribbage__turn-indicator",children:"Their turn"})]}),i.jsx("div",{className:"cribbage__opponent-hand",children:Array.from({length:ge}).map((Pe,Et)=>i.jsx(Wn,{faceUp:!1,size:"sm"},Et))})]})},We=()=>i.jsxs("div",{className:"cribbage__play-area",children:[i.jsx("div",{className:"cribbage__crib-area",children:i.jsx(b0,{cards:c==="CRIB_SHOW"?g:Array(g.length).fill(null),faceUp:c==="CRIB_SHOW",size:"sm",label:`Crib (${b?"yours":"theirs"})`})}),i.jsxs("div",{className:"cribbage__starter-area",children:[m?i.jsx(Wn,{cardId:m,faceUp:!0,size:"md"}):i.jsx("div",{className:"cribbage__deck-placeholder",children:i.jsx(Wn,{faceUp:!1,size:"md"})}),m&&i.jsx("div",{className:"cribbage__starter-label",children:"Starter"})]}),c==="PEGGING"&&N.length>0&&i.jsxs("div",{className:"cribbage__play-stack",children:[i.jsx(Aa,{cards:N,faceUp:!0,size:"sm",overlap:.3}),i.jsxs("div",{className:"cribbage__count-display",children:["Count: ",E]})]})]}),ot=()=>{const ge=c==="PEGGING"?O:F,Pe=c==="PEGGING"?ge.filter(Et=>!$.includes(Et)):[];return i.jsxs("div",{className:"cribbage__my-area",children:[i.jsxs("div",{className:"cribbage__my-info",children:[i.jsxs("span",{className:"cribbage__player-name",children:[T[A]," (You)"]}),b&&i.jsx("span",{className:"cribbage__dealer-badge",children:"Dealer"}),S&&c==="PEGGING"&&i.jsx("span",{className:"cribbage__turn-indicator",children:"Your turn"})]}),i.jsx("div",{className:"cribbage__my-hand",children:i.jsx(Aa,{cards:ge,faceUp:!0,selectedIds:c==="DISCARD"?l:[],onCardClick:c==="DISCARD"?I:c==="PEGGING"&&S?W:void 0,disabledIds:Pe,size:"lg",overlap:.4})})]})};return i.jsx(_p,{className:"cribbage",children:i.jsxs("div",{className:"cribbage__layout",children:[i.jsx("div",{className:"cribbage__sidebar",children:i.jsx(S0,{scores:p,previousScores:_,playerNames:T,targetScore:x,compact:!0})}),i.jsxs("div",{className:"cribbage__main",children:[oe(),We(),ue(),ot()]})]})})}const xd=Math.sqrt(3);function _l(e,t,n){const r=n*(xd*e+xd/2*t),s=n*(3/2*t);return{x:r,y:s}}function P0(e,t,n){const r=[];for(let s=0;s<6;s++){const l=60*s-30,o=Math.PI/180*l;r.push({x:e+n*Math.cos(o),y:t+n*Math.sin(o)})}return r}function T0(e,t,n){return P0(e,t,n).map(s=>`${s.x},${s.y}`).join(" ")}function La(e,t,n,r){const{x:s,y:l}=_l(e,t,r),o=60*n-30,c=Math.PI/180*o;return{x:s+r*Math.cos(c),y:l+r*Math.sin(c)}}function I0(e,t,n,r){const s=La(e,t,n,r),l=La(e,t,(n+1)%6,r),o=(s.x+l.x)/2,c=(s.y+l.y)/2,a=Math.atan2(l.y-s.y,l.x-s.x)*(180/Math.PI);return{x:o,y:c,angle:a}}function O0(e){const t=e.match(/^C:(-?\d+),(-?\d+),(\d+)$/);return t?{q:parseInt(t[1]),r:parseInt(t[2]),dir:parseInt(t[3])}:null}function A0(e){const t=e.match(/^E:(-?\d+),(-?\d+),(\d+)$/);return t?{q:parseInt(t[1]),r:parseInt(t[2]),dir:parseInt(t[3])}:null}function L0(e){const t=e.match(/^H:(-?\d+),(-?\d+)$/);return t?{q:parseInt(t[1]),r:parseInt(t[2])}:null}function $0(e,t,n=50){const r=e,s=e,l=_l(-r,-s,t),o=_l(r,s,t),c=l.x-t-n,a=l.y-t-n,u=o.x+t+n,h=o.y+t+n;return{minX:c,minY:a,width:u-c,height:h-a}}function D0(e){return{forest:"#228b22",hills:"#cd853f",pasture:"#90ee90",fields:"#ffd700",mountains:"#708090",desert:"#f4a460"}[e]||"#ccc"}function jl(e){return{red:"#dc2626",blue:"#2563eb",orange:"#ea580c",white:"#f5f5f5"}[e]||"#888"}function ts(e){return`/catan/icons/icon-${e}.svg`}function M0({q:e,r:t,size:n,terrain:r,number:s,hasRobber:l,onClick:o,highlight:c,disabled:a}){const{x:u,y:h}=_l(e,t,n),f=T0(u,h,n),d=D0(r),g=N=>N?6-Math.abs(N-7):0,m=s===6||s===8;return i.jsxs("g",{className:`hex-tile ${c?"highlight":""} ${a?"disabled":""}`,onClick:o,style:{cursor:o?"pointer":"default"},children:[i.jsx("polygon",{points:f,fill:d,stroke:"#5c4033",strokeWidth:2,className:"hex-polygon"}),s&&i.jsxs("g",{children:[i.jsx("circle",{cx:u,cy:h,r:n*.35,fill:"#f5f0e1",stroke:"#5c4033",strokeWidth:1}),i.jsx("text",{x:u,y:h+2,textAnchor:"middle",dominantBaseline:"middle",fontSize:n*.35,fontWeight:"bold",fill:m?"#dc2626":"#333",children:s}),i.jsx("g",{children:Array.from({length:g(s)}).map((N,E)=>i.jsx("circle",{cx:u-(g(s)-1)*4/2+E*4,cy:h+n*.22,r:1.5,fill:m?"#dc2626":"#333"},E))})]}),l&&i.jsxs("g",{transform:`translate(${u}, ${h})`,children:[i.jsx("ellipse",{cx:0,cy:5,rx:n*.15,ry:n*.08,fill:"rgba(0,0,0,0.3)"}),i.jsx("ellipse",{cx:0,cy:0,rx:n*.12,ry:n*.25,fill:"#1a1a1a"}),i.jsx("circle",{cx:0,cy:-n*.2,r:n*.1,fill:"#1a1a1a"})]})]})}function B0({x:e,y:t,building:n,playerColor:r,onClick:s,highlight:l,size:o=10}){const c=r?jl(r):"#888";if(!n&&!l)return null;if(!n&&l)return i.jsx("circle",{cx:e,cy:t,r:o*.8,fill:"rgba(255, 255, 255, 0.3)",stroke:"#fff",strokeWidth:2,strokeDasharray:"4 2",className:"hex-corner highlight",onClick:s,style:{cursor:"pointer"}});if(n==="settlement"){const a=o*1.5,u=o*1.2;return i.jsx("g",{className:"hex-corner settlement",onClick:s,style:{cursor:s?"pointer":"default"},children:i.jsx("path",{d:`M ${e} ${t-u} L ${e+a/2} ${t-u/2} L ${e+a/2} ${t+u/2} L ${e-a/2} ${t+u/2} L ${e-a/2} ${t-u/2} Z`,fill:c,stroke:"#333",strokeWidth:1.5})})}if(n==="city"){const a=o*2,u=o*1.5;return i.jsxs("g",{className:"hex-corner city",onClick:s,style:{cursor:s?"pointer":"default"},children:[i.jsx("rect",{x:e-a/2,y:t-u/3,width:a,height:u*.8,fill:c,stroke:"#333",strokeWidth:1.5}),i.jsx("rect",{x:e-a/4,y:t-u,width:a/2,height:u*.7,fill:c,stroke:"#333",strokeWidth:1.5}),i.jsx("polygon",{points:`${e-a/4},${t-u} ${e},${t-u-o*.4} ${e+a/4},${t-u}`,fill:c,stroke:"#333",strokeWidth:1.5})]})}return null}function U0({x:e,y:t,angle:n,road:r,playerColor:s,onClick:l,highlight:o,size:c=8}){const a=s?jl(s):"#888";return!r&&!o?null:!r&&o?i.jsx("g",{transform:`translate(${e}, ${t}) rotate(${n})`,children:i.jsx("rect",{x:-c*2,y:-c/2,width:c*4,height:c,fill:"rgba(255, 255, 255, 0.3)",stroke:"#fff",strokeWidth:2,strokeDasharray:"4 2",rx:2,className:"hex-edge highlight",onClick:l,style:{cursor:"pointer"}})}):r?i.jsx("g",{transform:`translate(${e}, ${t}) rotate(${n})`,className:"hex-edge road",onClick:l,style:{cursor:l?"pointer":"default"},children:i.jsx("rect",{x:-c*2,y:-c/2,width:c*4,height:c,fill:a,stroke:"#333",strokeWidth:1,rx:2})}):null}function F0({tiles:e,corners:t,edges:n,hexSize:r=50,onTileClick:s,onCornerClick:l,onEdgeClick:o,highlightTiles:c=[],highlightCorners:a=[],highlightEdges:u=[],className:h=""}){const f=w.useMemo(()=>{const m=$0(2,r,60);return`${m.minX} ${m.minY} ${m.width} ${m.height}`},[r]),d=w.useMemo(()=>t.map(m=>{const N=O0(m.id);if(!N)return{...m,x:0,y:0};const E=La(N.q,N.r,N.dir,r);return{...m,...E}}),[t,r]),g=w.useMemo(()=>n.map(m=>{const N=A0(m.id);if(!N)return{...m,x:0,y:0,angle:0};const E=I0(N.q,N.r,N.dir,r);return{...m,...E}}),[n,r]);return i.jsxs("svg",{className:`hex-grid ${h}`,viewBox:f,preserveAspectRatio:"xMidYMid meet",children:[i.jsx("defs",{children:i.jsxs("pattern",{id:"water-pattern",patternUnits:"userSpaceOnUse",width:"20",height:"20",children:[i.jsx("rect",{width:"20",height:"20",fill:"#4169e1"}),i.jsx("path",{d:"M0 10 Q5 5, 10 10 T20 10",stroke:"#5179f1",strokeWidth:"2",fill:"none"})]})}),i.jsx("rect",{x:"-500",y:"-500",width:"1000",height:"1000",fill:"url(#water-pattern)"}),i.jsx("g",{className:"tiles-layer",children:e.map(m=>{const N=L0(m.id);return N?i.jsx(M0,{q:N.q,r:N.r,size:r,terrain:m.terrain,number:m.number,hasRobber:m.hasRobber,onClick:s?()=>s(m.id):null,highlight:c.includes(m.id)},m.id):null})}),i.jsx("g",{className:"edges-layer",children:g.map(m=>{var N;return i.jsx(U0,{x:m.x,y:m.y,angle:m.angle,road:m.road,playerColor:m.playerId?((N=t.find(E=>E.playerId===m.playerId))==null?void 0:N.color)||W0(m):null,onClick:o?()=>o(m.id):null,highlight:u.includes(m.id),size:r*.15},m.id)})}),i.jsx("g",{className:"corners-layer",children:d.map(m=>i.jsx(B0,{x:m.x,y:m.y,building:m.building,playerColor:m.playerId?z0(m):null,onClick:l?()=>l(m.id):null,highlight:a.includes(m.id),size:r*.2},m.id))})]})}function z0(e){return e.color||null}function W0(e,t){return e.color||null}function G0({players:e,currentPlayer:t,myPlayerId:n,longestRoadHolder:r,largestArmy:s}){return i.jsx("div",{className:"catan-player-strip",children:e.map(l=>{var h,f;const o=l.playerId===t,c=l.playerId===n,a=l.playerId===r,u=l.playerId===s;return i.jsxs("div",{className:`catan-player-card ${o?"current-turn":""} ${c?"is-me":""}`,style:{borderColor:jl(l.color)},children:[i.jsx("div",{className:"player-color-indicator",style:{backgroundColor:jl(l.color)}}),i.jsxs("div",{className:"player-info",children:[i.jsxs("div",{className:"player-name",children:[l.displayName,c&&i.jsx("span",{className:"you-badge",children:"(You)"})]}),i.jsxs("div",{className:"player-stats",children:[i.jsxs("span",{className:"stat vp",children:[i.jsx("img",{src:"/catan/icons/icon-victory-point.svg",alt:"VP"}),((h=l.publicScore)==null?void 0:h.publicTotal)??"?"]}),i.jsxs("span",{className:"stat resources",children:[c?Object.values(l.resources||{}).reduce((d,g)=>d+g,0):l.resourceCount??"?"," cards"]}),i.jsxs("span",{className:"stat dev-cards",children:[c?((f=l.devCards)==null?void 0:f.length)??0:l.devCardCount??"?"," dev"]})]}),i.jsxs("div",{className:"player-badges",children:[a&&i.jsx("span",{className:"badge longest-road",title:"Longest Road",children:"LR"}),u&&i.jsx("span",{className:"badge largest-army",title:"Largest Army",children:"LA"})]})]}),i.jsxs("div",{className:"building-counts",children:[i.jsxs("span",{title:"Settlements remaining",children:[i.jsx("img",{src:"/catan/icons/icon-settlement.svg",alt:"S"}),l.settlements]}),i.jsxs("span",{title:"Cities remaining",children:[i.jsx("img",{src:"/catan/icons/icon-city.svg",alt:"C"}),l.cities]}),i.jsxs("span",{title:"Roads remaining",children:["R:",l.roads]})]})]},l.playerId)})})}const V0=["wood","brick","sheep","wheat","ore"];function H0({phase:e,isMyTurn:t,availableActions:n,interactionMode:r,onAction:s,myPlayer:l}){var m,N,E;const o=v=>n.some(p=>p.type===v),c=n.find(v=>v.type==="DISCARD_RESOURCES"),a=(c==null?void 0:c.count)||0,u=(l==null?void 0:l.resources)||{},[h,f]=w.useState({});w.useEffect(()=>{e!=="DISCARD"&&f({})},[e]);const d=w.useMemo(()=>Object.values(h).reduce((v,p)=>v+p,0),[h]),g=(v,p)=>{const _=h[v]||0,x=u[v]||0,k=Math.max(0,Math.min(x,_+p));f({...h,[v]:k})};if(e==="LOBBY")return i.jsx("div",{className:"catan-action-panel waiting",children:i.jsx("p",{children:"Waiting for host to start the game..."})});if(e.startsWith("SETUP_"))return i.jsx("div",{className:"catan-action-panel setup",children:i.jsxs("p",{children:["Click on the board to place your ",e.includes("SETTLEMENT")?"settlement":"road"]})});if(e==="DISCARD")return i.jsx("div",{className:"catan-action-panel discard",children:c?i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["Discard exactly ",a," resources"]}),i.jsx("div",{className:"discard-grid",children:V0.map(v=>{const p=u[v]||0,_=h[v]||0;return i.jsxs("div",{className:"discard-row",children:[i.jsx("img",{src:`/catan/icons/icon-${v}.svg`,alt:""}),i.jsx("span",{className:"discard-name",children:v}),i.jsx("button",{onClick:()=>g(v,-1),disabled:_<=0,children:"-"}),i.jsx("span",{className:"discard-count",children:_}),i.jsx("button",{onClick:()=>g(v,1),disabled:p<=_||d>=a,children:"+"}),i.jsxs("span",{className:"discard-have",children:["/",p]})]},v)})}),i.jsx("button",{className:"action-btn discard-btn",onClick:()=>s({type:"DISCARD_RESOURCES",resources:h}),disabled:d!==a,children:"Discard"})]}):i.jsx("p",{children:"Waiting for other players to discard"})});if(e==="ROBBER_MOVE")return i.jsx("div",{className:"catan-action-panel robber",children:i.jsx("p",{children:"Click on a tile to move the robber"})});if(e==="ROBBER_STEAL"){const v=n.find(p=>p.type==="STEAL_RESOURCE");return i.jsxs("div",{className:"catan-action-panel steal",children:[i.jsx("p",{children:"Select a player to steal from:"}),i.jsx("div",{className:"steal-targets",children:(m=v==null?void 0:v.targets)==null?void 0:m.map(p=>i.jsx("button",{onClick:()=>s({type:"STEAL_RESOURCE",targetPlayerId:p}),children:"Steal"},p))})]})}return e==="FINISHED"?i.jsx("div",{className:"catan-action-panel finished",children:i.jsx("p",{children:"Game Over!"})}):e==="ROLL"&&t?i.jsxs("div",{className:"catan-action-panel roll",children:[i.jsx("button",{className:"action-btn roll-btn",onClick:()=>s("roll"),children:"Roll Dice"}),o("PLAY_DEV_CARD")&&i.jsx("p",{className:"hint",children:"You can play a development card before rolling"})]}):e==="MAIN"&&t?r?i.jsxs("div",{className:"catan-action-panel interaction",children:[i.jsxs("p",{children:[r==="buildRoad"&&"Click on a valid edge to build a road",r==="buildSettlement"&&"Click on a valid corner to build a settlement",r==="buildCity"&&"Click on a settlement to upgrade to city"]}),i.jsx("button",{className:"action-btn cancel-btn",onClick:()=>s("cancel"),children:"Cancel"})]}):i.jsxs("div",{className:"catan-action-panel main",children:[i.jsxs("div",{className:"action-buttons",children:[o("BUILD_ROAD")&&i.jsxs("button",{className:"action-btn build-btn",onClick:()=>s("buildRoad"),title:"Wood + Brick",children:[i.jsx("img",{src:"/catan/icons/icon-wood.svg",alt:""}),"Road"]}),o("BUILD_SETTLEMENT")&&i.jsxs("button",{className:"action-btn build-btn",onClick:()=>s("buildSettlement"),title:"Wood + Brick + Sheep + Wheat",children:[i.jsx("img",{src:"/catan/icons/icon-settlement.svg",alt:""}),"Settlement"]}),o("BUILD_CITY")&&i.jsxs("button",{className:"action-btn build-btn",onClick:()=>s("buildCity"),title:"2 Wheat + 3 Ore",children:[i.jsx("img",{src:"/catan/icons/icon-city.svg",alt:""}),"City"]}),o("BUY_DEV_CARD")&&i.jsx("button",{className:"action-btn dev-btn",onClick:()=>s("buyDevCard"),title:"Sheep + Wheat + Ore",children:"Dev Card"}),o("BANK_TRADE")&&i.jsx("button",{className:"action-btn trade-btn",onClick:()=>s("trade"),children:"Trade"}),o("END_TURN")&&i.jsx("button",{className:"action-btn end-btn",onClick:()=>s("endTurn"),children:"End Turn"})]}),o("PLAY_DEV_CARD")&&((N=l==null?void 0:l.devCards)==null?void 0:N.length)>0&&i.jsx("div",{className:"dev-card-actions",children:i.jsx(Y0,{devCards:l.devCards,availableCards:((E=n.find(v=>v.type==="PLAY_DEV_CARD"))==null?void 0:E.cards)||[],onPlay:s})})]}):t?null:i.jsx("div",{className:"catan-action-panel waiting",children:i.jsx("p",{children:"Waiting for other player..."})})}function Y0({devCards:e,availableCards:t,onPlay:n}){const r=new Set(t);return r.size===0?null:i.jsxs("div",{className:"dev-card-buttons",children:[i.jsx("span",{children:"Play dev card:"}),r.has("knight")&&i.jsxs("button",{onClick:()=>n({type:"PLAY_DEV_CARD",cardType:"knight"}),children:[i.jsx("img",{src:"/catan/icons/icon-knight.svg",alt:""})," Knight"]}),r.has("roadBuilding")&&i.jsxs("button",{onClick:()=>n({type:"PLAY_DEV_CARD",cardType:"roadBuilding"}),children:[i.jsx("img",{src:"/catan/icons/icon-road-building.svg",alt:""})," Roads"]}),r.has("yearOfPlenty")&&i.jsxs("button",{onClick:()=>n({type:"PLAY_DEV_CARD",cardType:"yearOfPlenty"}),children:[i.jsx("img",{src:"/catan/icons/icon-year-of-plenty.svg",alt:""})," Year of Plenty"]}),r.has("monopoly")&&i.jsxs("button",{onClick:()=>n({type:"PLAY_DEV_CARD",cardType:"monopoly"}),children:[i.jsx("img",{src:"/catan/icons/icon-monopoly.svg",alt:""})," Monopoly"]})]})}const K0=["wood","brick","sheep","wheat","ore"];function q0({resources:e,devCards:t}){const n=Object.values(e||{}).reduce((r,s)=>r+s,0);return i.jsxs("div",{className:"catan-resource-hand",children:[i.jsx("div",{className:"resource-cards",children:K0.map(r=>{const s=(e==null?void 0:e[r])||0;return i.jsxs("div",{className:`resource-card ${s===0?"empty":""}`,children:[i.jsx("img",{src:ts(r),alt:r}),i.jsx("span",{className:"count",children:s}),i.jsx("span",{className:"name",children:r})]},r)})}),i.jsxs("div",{className:"hand-summary",children:[i.jsxs("span",{children:[n," cards"]}),t&&t.length>0&&i.jsxs("span",{className:"dev-count",children:[t.length," dev cards"]})]}),t&&t.length>0&&i.jsx("div",{className:"dev-cards-hand",children:t.map((r,s)=>i.jsxs("div",{className:`dev-card ${r.boughtThisTurn?"just-bought":""}`,title:r.boughtThisTurn?"Cannot play this turn":r.type,children:[i.jsx(Q0,{type:r.type}),i.jsx("span",{children:J0(r.type)})]},r.id||s))})]})}function Q0({type:e}){const t={knight:"/catan/icons/icon-knight.svg",roadBuilding:"/catan/icons/icon-road-building.svg",yearOfPlenty:"/catan/icons/icon-year-of-plenty.svg",monopoly:"/catan/icons/icon-monopoly.svg",victoryPoint:"/catan/icons/icon-victory-point.svg"};return i.jsx("img",{src:t[e]||"/catan/icons/icon-wildcard.svg",alt:e})}function J0(e){return{knight:"Knight",roadBuilding:"Road Building",yearOfPlenty:"Year of Plenty",monopoly:"Monopoly",victoryPoint:"VP"}[e]||e}const Ri=["wood","brick","sheep","wheat","ore"];function X0({myResources:e,players:t,availableActions:n,onTrade:r,onClose:s}){const[l,o]=w.useState("bank"),[c,a]=w.useState(null),[u,h]=w.useState(null),[f,d]=w.useState(null),[g,m]=w.useState({}),[N,E]=w.useState({}),v=n.find(j=>j.type==="BANK_TRADE"),p=(v==null?void 0:v.trades)||[],_=j=>{const T=p.find(F=>F.give===j);return(T==null?void 0:T.ratio)||4},x=()=>{c&&u&&c!==u&&r("bank",{give:c,receive:u})},k=()=>{f&&L()&&r("player",{toPlayerId:f,offer:g,request:N})},L=()=>{const j=Object.values(g).reduce((F,O)=>F+O,0),T=Object.values(N).reduce((F,O)=>F+O,0);return j>0&&T>0},y=(j,T)=>{const F=g[j]||0,O=e[j]||0,z=Math.max(0,Math.min(O,F+T));m({...g,[j]:z})},A=(j,T)=>{const F=N[j]||0,O=Math.max(0,F+T);E({...N,[j]:O})};return i.jsx("div",{className:"catan-modal-overlay",onClick:s,children:i.jsxs("div",{className:"catan-trade-modal",onClick:j=>j.stopPropagation(),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{children:"Trade"}),i.jsx("button",{className:"close-btn",onClick:s,children:""})]}),i.jsxs("div",{className:"trade-type-tabs",children:[i.jsx("button",{className:l==="bank"?"active":"",onClick:()=>o("bank"),children:"Bank Trade"}),i.jsx("button",{className:l==="player"?"active":"",onClick:()=>o("player"),children:"Player Trade"})]}),l==="bank"&&i.jsxs("div",{className:"bank-trade-section",children:[i.jsx("p",{children:"Trade with the bank at your best available ratio:"}),i.jsxs("div",{className:"trade-row",children:[i.jsxs("div",{className:"trade-give",children:[i.jsx("h4",{children:"Give"}),i.jsx("div",{className:"resource-select",children:Ri.map(j=>{const T=_(j),F=(e[j]||0)>=T;return i.jsxs("button",{className:`resource-btn ${c===j?"selected":""} ${F?"":"disabled"}`,onClick:()=>F&&a(j),disabled:!F,children:[i.jsx("img",{src:ts(j),alt:j}),i.jsxs("span",{className:"ratio",children:[T,":1"]}),i.jsxs("span",{className:"have",children:["(",e[j]||0,")"]})]},j)})})]}),i.jsx("div",{className:"trade-arrow",children:""}),i.jsxs("div",{className:"trade-receive",children:[i.jsx("h4",{children:"Receive"}),i.jsx("div",{className:"resource-select",children:Ri.map(j=>i.jsx("button",{className:`resource-btn ${u===j?"selected":""} ${j===c?"disabled":""}`,onClick:()=>j!==c&&h(j),disabled:j===c,children:i.jsx("img",{src:ts(j),alt:j})},j))})]})]}),i.jsx("button",{className:"trade-btn",onClick:x,disabled:!c||!u||c===u,children:"Trade"})]}),l==="player"&&i.jsxs("div",{className:"player-trade-section",children:[i.jsxs("div",{className:"player-select",children:[i.jsx("h4",{children:"Trade with:"}),i.jsx("div",{className:"player-buttons",children:t.map(j=>i.jsx("button",{className:f===j.playerId?"selected":"",onClick:()=>d(j.playerId),children:j.displayName},j.playerId))})]}),i.jsxs("div",{className:"trade-row",children:[i.jsxs("div",{className:"trade-offer",children:[i.jsx("h4",{children:"You Offer"}),Ri.map(j=>i.jsxs("div",{className:"resource-counter",children:[i.jsx("img",{src:ts(j),alt:j}),i.jsx("button",{onClick:()=>y(j,-1),disabled:(g[j]||0)<=0,children:"-"}),i.jsx("span",{children:g[j]||0}),i.jsx("button",{onClick:()=>y(j,1),disabled:(g[j]||0)>=(e[j]||0),children:"+"}),i.jsxs("span",{className:"have",children:["/",e[j]||0]})]},j))]}),i.jsx("div",{className:"trade-arrow",children:""}),i.jsxs("div",{className:"trade-request",children:[i.jsx("h4",{children:"You Request"}),Ri.map(j=>i.jsxs("div",{className:"resource-counter",children:[i.jsx("img",{src:ts(j),alt:j}),i.jsx("button",{onClick:()=>A(j,-1),disabled:(N[j]||0)<=0,children:"-"}),i.jsx("span",{children:N[j]||0}),i.jsx("button",{onClick:()=>A(j,1),children:"+"})]},j))]})]}),i.jsx("button",{className:"trade-btn",onClick:k,disabled:!f||!L(),children:"Propose Trade"})]})]})})}function Z0({roll:e}){if(!e)return null;const{die1:t,die2:n,total:r}=e;return i.jsxs("div",{className:"catan-dice",children:[i.jsx(wd,{value:t}),i.jsx(wd,{value:n}),i.jsxs("span",{className:`dice-total ${r===7?"robber":""}`,children:["= ",r,r===7&&" (Robber!)"]})]})}function wd({value:e}){const n={1:[[50,50]],2:[[25,25],[75,75]],3:[[25,25],[50,50],[75,75]],4:[[25,25],[75,25],[25,75],[75,75]],5:[[25,25],[75,25],[50,50],[25,75],[75,75]],6:[[25,25],[75,25],[25,50],[75,50],[25,75],[75,75]]}[e]||[];return i.jsxs("svg",{className:"die",viewBox:"0 0 100 100",width:"40",height:"40",children:[i.jsx("rect",{x:"5",y:"5",width:"90",height:"90",rx:"10",fill:"#f5f0e1",stroke:"#5c4033",strokeWidth:"3"}),n.map(([r,s],l)=>i.jsx("circle",{cx:r,cy:s,r:"10",fill:"#333"},l))]})}function ex({state:e,playerId:t,onAction:n}){var L;const[r,s]=w.useState(null),[l,o]=w.useState(!1),[c,a]=w.useState(null),u=w.useMemo(()=>e.players.find(y=>y.playerId===t),[e.players,t]),h=e.currentPlayer===t,f=w.useMemo(()=>e.board.corners.map(y=>{if(y.playerId){const A=e.players.find(j=>j.playerId===y.playerId);return{...y,color:A==null?void 0:A.color}}return y}),[e.board.corners,e.players]),d=w.useMemo(()=>e.board.edges.map(y=>{if(y.playerId){const A=e.players.find(j=>j.playerId===y.playerId);return{...y,color:A==null?void 0:A.color}}return y}),[e.board.edges,e.players]),m=w.useCallback(()=>{if(!h||!e.availableActions)return{tiles:[],corners:[],edges:[]};const y=[],A=[],j=[];for(const T of e.availableActions)r==="buildSettlement"||r==="placeSettlement"?(T.type==="PLACE_SETTLEMENT"||T.type==="BUILD_SETTLEMENT")&&A.push(...T.validCorners||[]):r==="buildRoad"||r==="placeRoad"?(T.type==="PLACE_ROAD"||T.type==="BUILD_ROAD")&&j.push(...T.validEdges||[]):r==="buildCity"?T.type==="BUILD_CITY"&&A.push(...T.validCorners||[]):r==="moveRobber"&&T.type==="MOVE_ROBBER"&&y.push(...T.validTiles||[]);return{tiles:y,corners:A,edges:j}},[r,h,e.availableActions])(),N=w.useCallback(y=>{r==="moveRobber"&&(n({type:"MOVE_ROBBER",tileId:y}),s(null))},[r,n]),E=w.useCallback(y=>{r==="placeSettlement"?(n({type:"PLACE_SETTLEMENT",cornerId:y}),s(null)):r==="buildSettlement"?(n({type:"BUILD_SETTLEMENT",cornerId:y}),s(null)):r==="buildCity"&&(n({type:"BUILD_CITY",cornerId:y}),s(null))},[r,n]),v=w.useCallback(y=>{r==="placeRoad"?(n({type:"PLACE_ROAD",edgeId:y}),s(null)):r==="buildRoad"&&(n({type:"BUILD_ROAD",edgeId:y}),s(null))},[r,n]);w.useEffect(()=>{if(!h){s(null);return}e.phase==="SETUP_SETTLEMENT_1"||e.phase==="SETUP_SETTLEMENT_2"?s("placeSettlement"):e.phase==="SETUP_ROAD_1"||e.phase==="SETUP_ROAD_2"?s("placeRoad"):e.phase==="ROBBER_MOVE"?s("moveRobber"):r&&!["buildSettlement","buildRoad","buildCity"].includes(r)&&s(null)},[e.phase,h,r]);const p=w.useCallback(y=>{if(y&&typeof y=="object"&&y.type){n(y);return}switch(y){case"roll":n({type:"ROLL_DICE"});break;case"buildRoad":s("buildRoad");break;case"buildSettlement":s("buildSettlement");break;case"buildCity":s("buildCity");break;case"buyDevCard":n({type:"BUY_DEV_CARD"});break;case"trade":o(!0);break;case"endTurn":n({type:"END_TURN"});break;case"cancel":s(null);break}},[n]),_=w.useCallback((y,A)=>{y==="bank"?n({type:"BANK_TRADE",giveResource:A.give,receiveResource:A.receive}):y==="player"&&n({type:"PROPOSE_TRADE",toPlayerId:A.toPlayerId,offer:A.offer,request:A.request}),o(!1)},[n]),x=w.useCallback(y=>{e.tradeOffer&&n({type:y?"ACCEPT_TRADE":"REJECT_TRADE",tradeId:e.tradeOffer.id})},[n,e.tradeOffer]),k=()=>{var j,T;const y=(j=e.players.find(F=>F.playerId===e.currentPlayer))==null?void 0:j.displayName;return{LOBBY:"Waiting for host to start",SETUP_SETTLEMENT_1:`${y}'s turn - Place first settlement`,SETUP_ROAD_1:`${y}'s turn - Place first road`,SETUP_SETTLEMENT_2:`${y}'s turn - Place second settlement`,SETUP_ROAD_2:`${y}'s turn - Place second road`,ROLL:`${y}'s turn - Roll dice`,DISCARD:"Players must discard half their cards",ROBBER_MOVE:`${y}'s turn - Move the robber`,ROBBER_STEAL:`${y}'s turn - Steal a resource`,MAIN:`${y}'s turn`,FINISHED:`Game Over! ${(T=e.players.find(F=>F.playerId===e.winner))==null?void 0:T.displayName} wins!`}[e.phase]||e.phase};return i.jsxs("div",{className:"catan-board",children:[i.jsx(G0,{players:e.players,currentPlayer:e.currentPlayer,myPlayerId:t,longestRoadHolder:e.longestRoadHolder,largestArmy:e.largestArmy}),i.jsxs("div",{className:"catan-phase-indicator",children:[i.jsx("span",{children:k()}),r&&i.jsx("button",{className:"cancel-btn",onClick:()=>s(null),children:"Cancel"})]}),e.lastRoll&&i.jsx(Z0,{roll:e.lastRoll}),i.jsx("div",{className:"catan-board-container",children:i.jsx(F0,{tiles:e.board.tiles,corners:f,edges:d,hexSize:50,onTileClick:r==="moveRobber"?N:null,onCornerClick:["placeSettlement","buildSettlement","buildCity"].includes(r)?E:null,onEdgeClick:["placeRoad","buildRoad"].includes(r)?v:null,highlightTiles:m.tiles,highlightCorners:m.corners,highlightEdges:m.edges})}),u&&i.jsx(q0,{resources:u.resources,devCards:u.devCards}),e.tradeOffer&&e.tradeOffer.to===t&&i.jsxs("div",{className:"catan-trade-offer",children:[i.jsxs("p",{children:[i.jsx("strong",{children:(L=e.players.find(y=>y.playerId===e.tradeOffer.from))==null?void 0:L.displayName})," wants to trade:"]}),i.jsxs("div",{className:"trade-details",children:[i.jsxs("span",{children:["Offers: ",Nd(e.tradeOffer.offer)]}),i.jsxs("span",{children:["Wants: ",Nd(e.tradeOffer.request)]})]}),i.jsxs("div",{className:"trade-buttons",children:[i.jsx("button",{onClick:()=>x(!0),children:"Accept"}),i.jsx("button",{onClick:()=>x(!1),children:"Reject"})]})]}),i.jsx(H0,{phase:e.phase,isMyTurn:h,availableActions:e.availableActions||[],interactionMode:r,onAction:p,myPlayer:u}),l&&i.jsx(X0,{myResources:(u==null?void 0:u.resources)||{},players:e.players.filter(y=>y.playerId!==t),availableActions:e.availableActions||[],onTrade:_,onClose:()=>o(!1)})]})}function Nd(e){if(!e)return"nothing";const t=[];for(const[n,r]of Object.entries(e))r>0&&t.push(`${r} ${n}`);return t.length>0?t.join(", "):"nothing"}const _d={red:"Red",yellow:"Yellow",green:"Green",blue:"Blue",wild:"Wild"},tx={red:"uno-color-red",yellow:"uno-color-yellow",green:"uno-color-green",blue:"uno-color-blue"};function nx({state:e,playerId:t,onAction:n,isHost:r}){var E,v,p,_,x,k,L;const s=e.currentPlayer,l=s===t,o=(E=e.availableActions)==null?void 0:E.find(y=>y.type==="PLAY_CARD"),c=w.useMemo(()=>new Set((o==null?void 0:o.playable)||[]),[o]),a=(v=e.availableActions)==null?void 0:v.find(y=>y.type==="DRAW_CARD"),u=(p=e.availableActions)==null?void 0:p.find(y=>y.type==="PASS"),h=(_=e.availableActions)==null?void 0:_.find(y=>y.type==="CHOOSE_COLOR"),f=(x=e.availableActions)==null?void 0:x.find(y=>y.type==="CALL_UNO"),[d,g]=w.useState(()=>{var y,A,j,T;return{drawThenPlay:((y=e.rules)==null?void 0:y.drawThenPlay)??!0,stacking:((A=e.rules)==null?void 0:A.stacking)??!1,unoCall:((j=e.rules)==null?void 0:j.unoCall)??!0,challengeDraw4:((T=e.rules)==null?void 0:T.challengeDraw4)??!1}});w.useEffect(()=>{e.rules&&g({drawThenPlay:e.rules.drawThenPlay??!0,stacking:e.rules.stacking??!1,unoCall:e.rules.unoCall??!0,challengeDraw4:e.rules.challengeDraw4??!1})},[e.rules]);const m=y=>{c.has(y)&&n({type:"PLAY_CARD",cardId:y})},N=()=>{if(e.phase==="COLOR_CHOICE"){const y=Pi(e,e.pendingColorChoiceFor);return e.pendingColorChoiceFor===t?"Choose a color!":`${y} is choosing a color...`}return e.phase==="FINISHED"?e.winner===t?"You won!":`${Pi(e,e.winner)} wins!`:l?e.pendingDraw>0?`You must draw ${e.pendingDraw} cards!`:"Your turn":`Waiting for ${Pi(e,s)}`};return e.players.filter(y=>y.playerId!==t&&y.hasUno),i.jsxs("div",{className:"uno-board",children:[e.phase==="FINISHED"&&e.winner&&i.jsx("div",{className:"uno-winner-overlay",children:i.jsxs("div",{className:"uno-winner-modal",children:[i.jsx("div",{className:"uno-winner-title",children:e.winner===t?"You Win!":`${Pi(e,e.winner)} Wins!`}),i.jsx("div",{className:"uno-winner-subtitle",children:"Game Over"})]})}),i.jsxs("div",{className:"uno-header",children:[i.jsxs("div",{className:"uno-status",children:[i.jsx("div",{className:`uno-turn-msg ${l?"your-turn":""}`,children:N()}),e.phase!=="LOBBY"&&e.phase!=="FINISHED"&&i.jsxs("div",{className:"uno-direction",children:[i.jsx("span",{className:"uno-direction-label",children:"Direction:"}),i.jsx("span",{className:`uno-direction-arrow ${e.direction===1?"cw":"ccw"}`,children:e.direction===1?"Clockwise":"Counter-clockwise"})]})]}),e.currentColor&&i.jsx("div",{className:`uno-current-color ${tx[e.currentColor]||""}`,children:_d[e.currentColor]})]}),e.pendingDraw>0&&e.phase!=="LOBBY"&&i.jsxs("div",{className:"uno-pending-draw",children:[i.jsxs("span",{className:"uno-pending-icon",children:["+",e.pendingDraw]}),i.jsxs("span",{className:"uno-pending-text",children:[e.pendingDrawType==="draw4"?"Wild Draw Four":"Draw Two"," Stack"]})]}),i.jsxs("div",{className:"uno-table",children:[e.phase==="LOBBY"&&i.jsxs("div",{className:"uno-rules",children:[i.jsx("div",{className:"uno-rules-title",children:"House Rules"}),i.jsxs("label",{className:"uno-rule",children:[i.jsx("input",{type:"checkbox",checked:d.drawThenPlay,onChange:y=>g({...d,drawThenPlay:y.target.checked}),disabled:!r}),"Draw then play (if playable)"]}),i.jsxs("label",{className:"uno-rule",children:[i.jsx("input",{type:"checkbox",checked:d.stacking,onChange:y=>g({...d,stacking:y.target.checked}),disabled:!r}),"Stacking Draw 2 / Draw 4"]}),i.jsxs("label",{className:"uno-rule",children:[i.jsx("input",{type:"checkbox",checked:d.unoCall,onChange:y=>g({...d,unoCall:y.target.checked}),disabled:!r}),"UNO call required"]}),i.jsxs("label",{className:"uno-rule disabled-rule",children:[i.jsx("input",{type:"checkbox",checked:d.challengeDraw4,onChange:y=>g({...d,challengeDraw4:y.target.checked}),disabled:!0}),"Wild Draw 4 challenge (coming soon)"]}),r&&i.jsx("button",{className:"uno-btn uno-btn-rules",onClick:()=>n({type:"SET_RULES",rules:d}),children:"Update Rules"})]}),i.jsx("div",{className:"uno-opponents",children:e.players.filter(y=>y.playerId!==t).map(y=>i.jsxs("div",{className:`uno-opponent ${y.playerId===s?"active":""}`,children:[i.jsxs("div",{className:"uno-opponent-info",children:[i.jsx("span",{className:"uno-opponent-name",children:y.displayName}),i.jsxs("span",{className:"uno-opponent-count",children:[y.handCount," cards"]})]}),y.hasUno&&i.jsx("span",{className:"uno-opponent-uno",children:"UNO!"})]},y.playerId))}),i.jsxs("div",{className:"uno-piles",children:[i.jsxs("div",{className:"uno-pile",children:[i.jsxs("div",{className:"uno-pile-label",children:["Draw (",e.drawCount,")"]}),i.jsx("div",{className:"uno-card back",children:i.jsx("div",{className:"uno-card-back-design",children:"UNO"})})]}),i.jsxs("div",{className:"uno-pile",children:[i.jsx("div",{className:"uno-pile-label",children:"Discard"}),e.discardTop?i.jsx(rx,{card:e.discardTop}):i.jsx("div",{className:"uno-card empty",children:"Empty"})]})]}),i.jsxs("div",{className:"uno-actions",children:[a&&l&&i.jsxs("button",{className:`uno-btn uno-btn-draw ${e.pendingDraw>0?"forced":""}`,onClick:()=>n({type:"DRAW_CARD"}),children:["Draw ",a.count||1]}),u&&l&&i.jsx("button",{className:"uno-btn uno-btn-pass",onClick:()=>n({type:"PASS"}),children:"Pass"}),f&&i.jsx("button",{className:"uno-btn uno-btn-uno",onClick:()=>n({type:"CALL_UNO"}),children:"UNO!"}),h&&i.jsxs("div",{className:"uno-color-picker",children:[i.jsx("div",{className:"uno-color-picker-label",children:"Choose a color:"}),i.jsx("div",{className:"uno-color-buttons",children:h.colors.map(y=>i.jsx("button",{className:`uno-color-btn ${y}`,onClick:()=>n({type:"CHOOSE_COLOR",color:y}),children:_d[y]},y))})]})]})]}),i.jsxs("div",{className:"uno-hand-section",children:[i.jsxs("div",{className:"uno-hand-label",children:["Your Hand (",((k=e.hand)==null?void 0:k.length)||0,")"]}),i.jsxs("div",{className:"uno-hand",children:[(L=e.hand)==null?void 0:L.map(y=>{const A=c.has(y.id)&&l;return i.jsx("button",{className:`uno-card ${y.color} ${A?"playable":""}`,onClick:()=>m(y.id),disabled:!A,children:i.jsx(jp,{card:y})},y.id)}),(!e.hand||e.hand.length===0)&&i.jsx("div",{className:"uno-hand-empty",children:"No cards"})]})]})]})}function jd(e){return e?e.type==="number"?e.value:e.type==="draw2"?"+2":e.type==="draw4"?"+4":e.type==="reverse"?"Rev":e.type==="skip"?"Skip":e.type==="wild"?"Wild":e.value||e.type:""}function Pi(e,t){var n;return((n=e.players.find(r=>r.playerId===t))==null?void 0:n.displayName)||"player"}function rx({card:e}){return i.jsx("div",{className:`uno-card ${e.color}`,children:i.jsx(jp,{card:e})})}function jp({card:e}){const t=sx(e);return t?i.jsx("img",{src:t,alt:jd(e),className:"uno-card-img"}):i.jsx("span",{className:"uno-card-value",children:jd(e)})}function sx(e){if(!e)return null;if(e.type==="wild")return"/uno/cards/others/Xwild.png";if(e.type==="draw4")return"/uno/cards/others/X+4.png";const t=e.color;return t?e.type==="number"?`/uno/cards/${t}/${t}${e.value}.png`:e.type==="draw2"?t==="blue"?"/uno/cards/blue/BluePlus2.png":`/uno/cards/${t}/${t}Plus2.png`:e.type==="reverse"?t==="blue"?"/uno/cards/blue/BlueRev.png":`/uno/cards/${t}/${t}Rev.png`:e.type==="skip"?`/uno/cards/${t}/${t}Skip.png`:null:null}const Vt={LOBBY:"LOBBY",SUBMIT_LIES:"SUBMIT_LIES",VOTE:"VOTE",REVEAL:"REVEAL",SCORE:"SCORE",GAME_END:"GAME_END"};function ix({gameState:e,session:t,players:n,isHost:r,gameFinished:s,onAction:l,onRematch:o,onSwitchGame:c,timeLeft:a}){var I,V;const[u,h]=w.useState(""),[f,d]=w.useState(null),[g,m]=w.useState(""),N=t==null?void 0:t.playerId,E=(e==null?void 0:e.phase)||Vt.LOBBY,v=(e==null?void 0:e.round)||0,p=(e==null?void 0:e.totalRounds)||8,_=e==null?void 0:e.currentQuestion,x=(e==null?void 0:e.choices)||[],k=(e==null?void 0:e.lies)||{},L=(e==null?void 0:e.votes)||{},y=(e==null?void 0:e.scores)||{},A=(e==null?void 0:e.roundScores)||{},j=!!((I=k[N])!=null&&I.submitted),T=!!((V=L[N])!=null&&V.voted),F=U=>{const W=n.find(Q=>Q.playerId===U);return(W==null?void 0:W.displayName)||"Unknown"};w.useEffect(()=>{h(""),d(null),m("")},[E]);const O=()=>{if(!u.trim()){m("Enter a fake answer!");return}m(""),l({type:"SUBMIT_LIE",payload:{text:u.trim()}})},z=()=>{if(!f){m("Select an answer!");return}m(""),l({type:"SUBMIT_VOTE",payload:{choiceId:f}})},C=()=>{l({type:"NEXT_ROUND"})},S=()=>{l({type:"CONTINUE"})},b=()=>{if(!(_!=null&&_.question))return null;const U=_.question.split("<BLANK>");return i.jsxs("div",{className:"fibbage-question",children:[U[0],i.jsx("span",{className:"fibbage-blank",children:"______"}),U[1]]})},$=[...n].map(U=>({...U,score:y[U.playerId]||0})).sort((U,W)=>W.score-U.score),P=()=>{switch(E){case Vt.LOBBY:return i.jsxs("div",{className:"fibbage-lobby",children:[i.jsx("h2",{children:"Fibbage"}),i.jsx("p",{className:"fibbage-description",children:"Write fake answers to fool other players. Pick the truth from the lies!"}),i.jsxs("div",{className:"fibbage-players",children:[i.jsxs("h3",{children:["Players (",n.length,")"]}),n.map(W=>i.jsxs("div",{className:"fibbage-player-item",children:[W.displayName,W.playerId===N&&" (You)"]},W.playerId))]}),n.length<3&&i.jsx("p",{className:"fibbage-warning",children:"Need at least 3 players to start"})]});case Vt.SUBMIT_LIES:return i.jsxs("div",{className:"fibbage-submit",children:[i.jsxs("div",{className:"fibbage-round",children:["Round ",v," / ",p]}),b(),j?i.jsxs("div",{className:"fibbage-waiting",children:[i.jsx("p",{children:"Lie submitted! Waiting for others..."}),i.jsxs("div",{className:"fibbage-submit-status",children:[Object.keys(k).length," / ",n.length," submitted"]})]}):i.jsxs("div",{className:"fibbage-input-area",children:[i.jsx("input",{type:"text",className:"fibbage-input",placeholder:"Enter your fake answer...",value:u,onChange:W=>h(W.target.value),onKeyDown:W=>W.key==="Enter"&&O(),maxLength:100,autoFocus:!0}),i.jsx("button",{className:"fibbage-btn primary",onClick:O,children:"Submit Lie"}),g&&i.jsx("div",{className:"fibbage-error",children:g})]}),a>0&&i.jsxs("div",{className:"fibbage-timer",children:[a,"s remaining"]})]});case Vt.VOTE:return i.jsxs("div",{className:"fibbage-vote",children:[i.jsxs("div",{className:"fibbage-round",children:["Round ",v," / ",p]}),b(),i.jsx("p",{className:"fibbage-instruction",children:"Pick the TRUTH!"}),T?i.jsxs("div",{className:"fibbage-waiting",children:[i.jsx("p",{children:"Vote submitted! Waiting for others..."}),i.jsxs("div",{className:"fibbage-submit-status",children:[Object.keys(L).length," / ",Object.keys(k).length," voted"]})]}):i.jsxs("div",{className:"fibbage-choices",children:[x.map(W=>i.jsx("button",{className:`fibbage-choice ${f===W.id?"selected":""}`,onClick:()=>d(W.id),children:W.text},W.id)),i.jsx("button",{className:"fibbage-btn primary",onClick:z,disabled:!f,children:"Lock In Answer"}),g&&i.jsx("div",{className:"fibbage-error",children:g})]}),a>0&&i.jsxs("div",{className:"fibbage-timer",children:[a,"s remaining"]})]});case Vt.REVEAL:return i.jsxs("div",{className:"fibbage-reveal",children:[i.jsxs("div",{className:"fibbage-round",children:["Round ",v," / ",p]}),b(),i.jsx("div",{className:"fibbage-reveal-list",children:x.map(W=>{const Q=W.ownerId==="__TRUTH__",se=Q?"THE TRUTH":F(W.ownerId),ne=Object.entries(L).filter(([,ue])=>ue===W.id).map(([ue])=>F(ue));return i.jsxs("div",{className:`fibbage-reveal-choice ${Q?"truth":"lie"}`,children:[i.jsx("div",{className:"fibbage-reveal-text",children:W.text}),i.jsx("div",{className:"fibbage-reveal-owner",children:Q?"THE TRUTH!":`Written by: ${se}`}),ne.length>0&&i.jsxs("div",{className:"fibbage-reveal-voters",children:["Fooled: ",ne.join(", ")]})]},W.id)})}),r&&i.jsx("button",{className:"fibbage-btn primary",onClick:S,children:"Continue"})]});case Vt.SCORE:return i.jsxs("div",{className:"fibbage-score",children:[i.jsxs("h2",{children:["Round ",v," Results"]}),i.jsx("div",{className:"fibbage-round-scores",children:$.map((W,Q)=>{const se=A[W.playerId]||0;return i.jsxs("div",{className:"fibbage-score-row",children:[i.jsxs("span",{className:"fibbage-rank",children:["#",Q+1]}),i.jsx("span",{className:"fibbage-name",children:W.displayName}),i.jsxs("span",{className:"fibbage-round-pts",children:["+",se]}),i.jsxs("span",{className:"fibbage-total-pts",children:[W.score," pts"]})]},W.playerId)})}),r&&i.jsx("button",{className:"fibbage-btn primary",onClick:C,children:v>=p?"Final Results":"Next Round"})]});case Vt.GAME_END:const U=$[0];return i.jsxs("div",{className:"fibbage-end",children:[i.jsx("h2",{children:"Game Over!"}),i.jsxs("div",{className:"fibbage-winner",children:[U==null?void 0:U.displayName," wins with ",U==null?void 0:U.score," points!"]}),i.jsx("div",{className:"fibbage-final-scores",children:$.map((W,Q)=>i.jsxs("div",{className:"fibbage-score-row final",children:[i.jsxs("span",{className:"fibbage-rank",children:["#",Q+1]}),i.jsx("span",{className:"fibbage-name",children:W.displayName}),i.jsxs("span",{className:"fibbage-total-pts",children:[W.score," pts"]})]},W.playerId))}),r&&i.jsxs("div",{className:"fibbage-end-actions",children:[i.jsx("button",{className:"fibbage-btn primary",onClick:o,children:"Play Again"}),i.jsx("button",{className:"fibbage-btn secondary",onClick:c,children:"Switch Game"})]})]});default:return i.jsxs("div",{children:["Unknown phase: ",E]})}};return i.jsxs("div",{className:"fibbage-game",children:[E!==Vt.LOBBY&&E!==Vt.GAME_END&&i.jsx("div",{className:"fibbage-scoreboard",children:$.slice(0,4).map(U=>i.jsxs("div",{className:`fibbage-scoreboard-item ${U.playerId===N?"you":""}`,children:[i.jsx("span",{className:"name",children:U.displayName}),i.jsx("span",{className:"pts",children:U.score})]},U.playerId))}),P()]})}const Cd={C:"Clubs",D:"Diamonds",H:"Hearts",S:"Spades"};function lx(e){const t=e.slice(-1),n=e.slice(0,-1);return{suit:t,rank:n}}function ox({state:e,playerId:t,onAction:n}){var v,p,_;const[r,s]=w.useState(null),l=e.players.find(x=>x.playerId===t),o=e.hand||[],c=e.phase==="TURN"&&e.currentPlayer===t,a=(v=e.availableActions)==null?void 0:v.find(x=>x.type==="PLAY_CARD"),u=(p=e.availableActions)==null?void 0:p.find(x=>x.type==="DRAW_CARD"),h=(_=e.availableActions)==null?void 0:_.find(x=>x.type==="PASS"),f=(a==null?void 0:a.playable)||[],d=w.useMemo(()=>c?f.length===0?[]:o.filter(x=>!f.includes(x)):o,[c,o,f]),g=e.players.filter(x=>x.playerId!==t),m=e.winner?e.players.find(x=>x.playerId===e.winner):null,N=x=>{if(!c||f.length>0&&!f.includes(x))return;const{rank:k}=lx(x);if(k==="8"){s(x);return}n({type:"PLAY_CARD",cardId:x})},E=x=>{r&&(n({type:"PLAY_CARD",cardId:r,declaredSuit:x}),s(null))};return i.jsxs(_p,{className:"crazy-eights",children:[i.jsxs("div",{className:"crazy-eights__layout",children:[i.jsxs("header",{className:"crazy-eights__header",children:[i.jsx("div",{className:"crazy-eights__title",children:"Crazy Eights"}),i.jsxs("div",{className:"crazy-eights__status",children:[i.jsxs("span",{className:`crazy-eights__suit suit-${e.currentSuit||"none"}`,children:["Current suit: ",Cd[e.currentSuit]||"None"]}),c?i.jsx("span",{className:"crazy-eights__turn you",children:"Your turn"}):i.jsx("span",{className:"crazy-eights__turn",children:"Waiting..."})]})]}),i.jsx("section",{className:"crazy-eights__opponents",children:g.map(x=>i.jsxs("div",{className:`crazy-eights__opponent ${e.currentPlayer===x.playerId?"active":""}`,children:[i.jsx("div",{className:"crazy-eights__opponent-name",children:x.displayName}),i.jsxs("div",{className:"crazy-eights__opponent-count",children:[x.handCount," cards"]})]},x.playerId))}),i.jsxs("section",{className:"crazy-eights__table",children:[i.jsxs("div",{className:"crazy-eights__pile",children:[i.jsx("div",{className:"crazy-eights__pile-label",children:"Draw"}),i.jsx(Wn,{faceUp:!1,size:"md"}),i.jsxs("div",{className:"crazy-eights__pile-count",children:[e.drawCount," cards"]})]}),i.jsxs("div",{className:"crazy-eights__pile",children:[i.jsx("div",{className:"crazy-eights__pile-label",children:"Discard"}),e.discardTop?i.jsx(Wn,{cardId:e.discardTop,size:"md"}):i.jsx("div",{className:"crazy-eights__empty-pile",children:"Empty"})]})]}),i.jsxs("section",{className:"crazy-eights__actions",children:[i.jsx("button",{className:"crazy-eights__btn",onClick:()=>n({type:"DRAW_CARD"}),disabled:!u||!c,children:"Draw Card"}),i.jsx("button",{className:"crazy-eights__btn secondary",onClick:()=>n({type:"PASS"}),disabled:!h||!c,children:"Pass"})]}),r&&i.jsxs("section",{className:"crazy-eights__suit-picker",children:[i.jsx("div",{className:"crazy-eights__suit-title",children:"Choose a suit"}),i.jsxs("div",{className:"crazy-eights__suit-options",children:[Object.entries(Cd).map(([x,k])=>i.jsx("button",{className:`crazy-eights__suit-btn suit-${x}`,onClick:()=>E(x),children:k},x)),i.jsx("button",{className:"crazy-eights__suit-btn cancel",onClick:()=>s(null),children:"Cancel"})]})]}),i.jsxs("section",{className:"crazy-eights__hand",children:[i.jsx("div",{className:"crazy-eights__hand-label",children:(l==null?void 0:l.displayName)||"You"}),o.length===0?i.jsx("div",{className:"crazy-eights__hand-empty",children:"No cards"}):i.jsx(Aa,{cards:o,faceUp:!0,onCardClick:N,disabledIds:d,overlap:.35,fanAngle:12,size:"md"})]})]}),e.phase==="FINISHED"&&m&&i.jsx("div",{className:"crazy-eights__winner",children:i.jsxs("div",{className:"crazy-eights__winner-card",children:[i.jsx("div",{className:"crazy-eights__winner-title",children:"Game Over"}),i.jsxs("div",{className:"crazy-eights__winner-name",children:[m.displayName," wins!"]})]})})]})}function ax(e){return e!==null?{comment:e,variations:[]}:{variations:[]}}function cx(e,t,n,r,s){const l={move:e,variations:s};return t&&(l.suffix=t),n&&(l.nag=n),r!==null&&(l.comment=r),l}function ux(...e){const[t,...n]=e;let r=t;for(const s of n)s!==null&&(r.variations=[s,...s.variations],s.variations=[],r=s);return t}function dx(e,t){if(t.marker&&t.marker.comment){let n=t.root;for(;;){const r=n.variations[0];if(!r){n.comment=t.marker.comment;break}n=r}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function hx(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function Pr(e,t,n,r){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,Pr.prototype),s.expected=t,s.found=n,s.location=r,s.name="SyntaxError",s}hx(Pr,Error);function Co(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}Pr.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,l=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,o=this.location.source+":"+l.line+":"+l.column;if(n){var c=this.location.end,a=Co("",l.line.toString().length," "),u=n[s.line-1],h=s.line===c.line?c.column:u.length+1,f=h-s.column||1;t+=`
 --> `+o+`
`+a+` |
`+l.line+" | "+u+`
`+a+" | "+Co("",s.column-1," ")+Co("",f,"^")}else t+=`
 at `+o}return t};Pr.buildMessage=function(e,t){var n={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var h=u.parts.map(function(f){return Array.isArray(f)?l(f[0])+"-"+l(f[1]):l(f)});return"["+(u.inverted?"^":"")+h.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+r(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+r(h)})}function l(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+r(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+r(h)})}function o(u){return n[u.type](u)}function c(u){var h=u.map(o),f,d;if(h.sort(),h.length>0){for(f=1,d=1;f<h.length;f++)h[f-1]!==h[f]&&(h[d]=h[f],d++);h.length=d}switch(h.length){case 1:return h[0];case 2:return h[0]+" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}function a(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+c(e)+" but "+a(t)+" found."};function fx(e,t){t=t!==void 0?t:{};var n={},r=t.grammarSource,s={pgn:Wc},l=Wc,o="[",c='"',a="]",u=".",h="O-O-O",f="O-O",d="0-0-0",g="0-0",m="$",N="{",E="}",v=";",p="(",_=")",x="1-0",k="0-1",L="1/2-1/2",y="*",A=/^[a-zA-Z]/,j=/^[^"]/,T=/^[0-9]/,F=/^[.]/,O=/^[a-zA-Z1-8\-=]/,z=/^[+#]/,C=/^[!?]/,S=/^[^}]/,b=/^[^\r\n]/,$=/^[ \t\r\n]/,P=gt("tag pair"),I=Ae("[",!1),V=Ae('"',!1),U=Ae("]",!1),W=gt("tag name"),Q=Lt([["a","z"],["A","Z"]],!1,!1),se=gt("tag value"),ne=Lt(['"'],!0,!1),ue=gt("move number"),oe=Lt([["0","9"]],!1,!1),We=Ae(".",!1),ot=Lt(["."],!1,!1),tt=gt("standard algebraic notation"),Pn=Ae("O-O-O",!1),Tn=Ae("O-O",!1),In=Ae("0-0-0",!1),ge=Ae("0-0",!1),Pe=Lt([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Et=Lt(["+","#"],!1,!1),nn=gt("suffix annotation"),er=Lt(["!","?"],!1,!1),Vl=gt("NAG"),Ws=Ae("$",!1),Gs=gt("brace comment"),Vs=Ae("{",!1),$r=Lt(["}"],!0,!1),Hs=Ae("}",!1),Ys=gt("rest of line comment"),Ks=Ae(";",!1),Dr=Lt(["\r",`
`],!0,!1),qs=gt("variation"),Qs=Ae("(",!1),Js=Ae(")",!1),Xs=gt("game termination marker"),Zs=Ae("1-0",!1),ei=Ae("0-1",!1),ti=Ae("1/2-1/2",!1),ni=Ae("*",!1),ri=gt("whitespace"),Mr=Lt([" ","	","\r",`
`],!1,!1),si=function(R,M){return dx(R,M)},ii=function(R){return Object.fromEntries(R)},li=function(R,M){return[R,M]},ie=function(R,M){return{root:R,marker:M}},ae=function(R,M){return ux(ax(R),...M.flat())},re=function(R,M,B,J,X){return cx(R,M,B,J,X)},vt=function(R){return R},je=function(R){return R.replace(/[\r\n]+/g," ")},tr=function(R){return R.trim()},oi=function(R){return R},Sp=function(R,M){return{result:R,comment:M}},D=t.peg$currPos|0,nr=[{line:1,column:1}],kt=D,ai=t.peg$maxFailExpected||[],H=t.peg$silentFails|0,Br;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');l=s[t.startRule]}function Ae(R,M){return{type:"literal",text:R,ignoreCase:M}}function Lt(R,M,B){return{type:"class",parts:R,inverted:M,ignoreCase:B}}function Rp(){return{type:"end"}}function gt(R){return{type:"other",description:R}}function Fc(R){var M=nr[R],B;if(M)return M;if(R>=nr.length)B=nr.length-1;else for(B=R;!nr[--B];);for(M=nr[B],M={line:M.line,column:M.column};B<R;)e.charCodeAt(B)===10?(M.line++,M.column=1):M.column++,B++;return nr[R]=M,M}function zc(R,M,B){var J=Fc(R),X=Fc(M),he={source:r,start:{offset:R,line:J.line,column:J.column},end:{offset:M,line:X.line,column:X.column}};return he}function K(R){D<kt||(D>kt&&(kt=D,ai=[]),ai.push(R))}function Pp(R,M,B){return new Pr(Pr.buildMessage(R,M),R,M,B)}function Wc(){var R,M,B;return R=D,M=Tp(),B=Ap(),R=si(M,B),R}function Tp(){var R,M,B;for(R=D,M=[],B=Gc();B!==n;)M.push(B),B=Gc();return B=qe(),R=ii(M),R}function Gc(){var R,M,B,J,X,he,On;return H++,R=D,qe(),e.charCodeAt(D)===91?(M=o,D++):(M=n,H===0&&K(I)),M!==n?(qe(),B=Ip(),B!==n?(qe(),e.charCodeAt(D)===34?(J=c,D++):(J=n,H===0&&K(V)),J!==n?(X=Op(),e.charCodeAt(D)===34?(he=c,D++):(he=n,H===0&&K(V)),he!==n?(qe(),e.charCodeAt(D)===93?(On=a,D++):(On=n,H===0&&K(U)),On!==n?R=li(B,X):(D=R,R=n)):(D=R,R=n)):(D=R,R=n)):(D=R,R=n)):(D=R,R=n),H--,R===n&&H===0&&K(P),R}function Ip(){var R,M,B;if(H++,R=D,M=[],B=e.charAt(D),A.test(B)?D++:(B=n,H===0&&K(Q)),B!==n)for(;B!==n;)M.push(B),B=e.charAt(D),A.test(B)?D++:(B=n,H===0&&K(Q));else M=n;return M!==n?R=e.substring(R,D):R=M,H--,R===n&&(M=n,H===0&&K(W)),R}function Op(){var R,M,B;for(H++,R=D,M=[],B=e.charAt(D),j.test(B)?D++:(B=n,H===0&&K(ne));B!==n;)M.push(B),B=e.charAt(D),j.test(B)?D++:(B=n,H===0&&K(ne));return R=e.substring(R,D),H--,M=n,H===0&&K(se),R}function Ap(){var R,M,B;return R=D,M=Vc(),qe(),B=Up(),B===n&&(B=null),qe(),R=ie(M,B),R}function Vc(){var R,M,B,J;for(R=D,M=Hl(),M===n&&(M=null),B=[],J=Hc();J!==n;)B.push(J),J=Hc();return R=ae(M,B),R}function Hc(){var R,M,B,J,X,he,On,ci;if(R=D,qe(),Lp(),qe(),M=$p(),M!==n){for(B=Dp(),B===n&&(B=null),J=[],X=Yc();X!==n;)J.push(X),X=Yc();for(X=qe(),he=Hl(),he===n&&(he=null),On=[],ci=Kc();ci!==n;)On.push(ci),ci=Kc();R=re(M,B,J,he,On)}else D=R,R=n;return R}function Lp(){var R,M,B,J,X,he;for(H++,R=D,M=[],B=e.charAt(D),T.test(B)?D++:(B=n,H===0&&K(oe));B!==n;)M.push(B),B=e.charAt(D),T.test(B)?D++:(B=n,H===0&&K(oe));if(e.charCodeAt(D)===46?(B=u,D++):(B=n,H===0&&K(We)),B!==n){for(J=qe(),X=[],he=e.charAt(D),F.test(he)?D++:(he=n,H===0&&K(ot));he!==n;)X.push(he),he=e.charAt(D),F.test(he)?D++:(he=n,H===0&&K(ot));M=[M,B,J,X],R=M}else D=R,R=n;return H--,R===n&&(M=n,H===0&&K(ue)),R}function $p(){var R,M,B,J,X,he;if(H++,R=D,M=D,e.substr(D,5)===h?(B=h,D+=5):(B=n,H===0&&K(Pn)),B===n&&(e.substr(D,3)===f?(B=f,D+=3):(B=n,H===0&&K(Tn)),B===n&&(e.substr(D,5)===d?(B=d,D+=5):(B=n,H===0&&K(In)),B===n&&(e.substr(D,3)===g?(B=g,D+=3):(B=n,H===0&&K(ge)),B===n))))if(B=D,J=e.charAt(D),A.test(J)?D++:(J=n,H===0&&K(Q)),J!==n){if(X=[],he=e.charAt(D),O.test(he)?D++:(he=n,H===0&&K(Pe)),he!==n)for(;he!==n;)X.push(he),he=e.charAt(D),O.test(he)?D++:(he=n,H===0&&K(Pe));else X=n;X!==n?(J=[J,X],B=J):(D=B,B=n)}else D=B,B=n;return B!==n?(J=e.charAt(D),z.test(J)?D++:(J=n,H===0&&K(Et)),J===n&&(J=null),B=[B,J],M=B):(D=M,M=n),M!==n?R=e.substring(R,D):R=M,H--,R===n&&(M=n,H===0&&K(tt)),R}function Dp(){var R,M,B;for(H++,R=D,M=[],B=e.charAt(D),C.test(B)?D++:(B=n,H===0&&K(er));B!==n;)M.push(B),M.length>=2?B=n:(B=e.charAt(D),C.test(B)?D++:(B=n,H===0&&K(er)));return M.length<1?(D=R,R=n):R=M,H--,R===n&&(M=n,H===0&&K(nn)),R}function Yc(){var R,M,B,J,X;if(H++,R=D,qe(),e.charCodeAt(D)===36?(M=m,D++):(M=n,H===0&&K(Ws)),M!==n){if(B=D,J=[],X=e.charAt(D),T.test(X)?D++:(X=n,H===0&&K(oe)),X!==n)for(;X!==n;)J.push(X),X=e.charAt(D),T.test(X)?D++:(X=n,H===0&&K(oe));else J=n;J!==n?B=e.substring(B,D):B=J,B!==n?R=vt(B):(D=R,R=n)}else D=R,R=n;return H--,R===n&&H===0&&K(Vl),R}function Hl(){var R;return R=Mp(),R===n&&(R=Bp()),R}function Mp(){var R,M,B,J,X;if(H++,R=D,e.charCodeAt(D)===123?(M=N,D++):(M=n,H===0&&K(Vs)),M!==n){for(B=D,J=[],X=e.charAt(D),S.test(X)?D++:(X=n,H===0&&K($r));X!==n;)J.push(X),X=e.charAt(D),S.test(X)?D++:(X=n,H===0&&K($r));B=e.substring(B,D),e.charCodeAt(D)===125?(J=E,D++):(J=n,H===0&&K(Hs)),J!==n?R=je(B):(D=R,R=n)}else D=R,R=n;return H--,R===n&&(M=n,H===0&&K(Gs)),R}function Bp(){var R,M,B,J,X;if(H++,R=D,e.charCodeAt(D)===59?(M=v,D++):(M=n,H===0&&K(Ks)),M!==n){for(B=D,J=[],X=e.charAt(D),b.test(X)?D++:(X=n,H===0&&K(Dr));X!==n;)J.push(X),X=e.charAt(D),b.test(X)?D++:(X=n,H===0&&K(Dr));B=e.substring(B,D),R=tr(B)}else D=R,R=n;return H--,R===n&&(M=n,H===0&&K(Ys)),R}function Kc(){var R,M,B,J;return H++,R=D,qe(),e.charCodeAt(D)===40?(M=p,D++):(M=n,H===0&&K(Qs)),M!==n?(B=Vc(),B!==n?(qe(),e.charCodeAt(D)===41?(J=_,D++):(J=n,H===0&&K(Js)),J!==n?R=oi(B):(D=R,R=n)):(D=R,R=n)):(D=R,R=n),H--,R===n&&H===0&&K(qs),R}function Up(){var R,M,B;return H++,R=D,e.substr(D,3)===x?(M=x,D+=3):(M=n,H===0&&K(Zs)),M===n&&(e.substr(D,3)===k?(M=k,D+=3):(M=n,H===0&&K(ei)),M===n&&(e.substr(D,7)===L?(M=L,D+=7):(M=n,H===0&&K(ti)),M===n&&(e.charCodeAt(D)===42?(M=y,D++):(M=n,H===0&&K(ni))))),M!==n?(qe(),B=Hl(),B===n&&(B=null),R=Sp(M,B)):(D=R,R=n),H--,R===n&&(M=n,H===0&&K(Xs)),R}function qe(){var R,M;for(H++,R=[],M=e.charAt(D),$.test(M)?D++:(M=n,H===0&&K(Mr));M!==n;)R.push(M),M=e.charAt(D),$.test(M)?D++:(M=n,H===0&&K(Mr));return H--,M=n,H===0&&K(ri),R}if(Br=l(),t.peg$library)return{peg$result:Br,peg$currPos:D,peg$FAILED:n,peg$maxFailExpected:ai,peg$maxFailPos:kt};if(Br!==n&&D===e.length)return Br;throw Br!==n&&D<e.length&&K(Rp()),Pp(ai,kt<e.length?e.charAt(kt):null,kt<e.length?zc(kt,kt+1):zc(kt,kt))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const qi=0xffffffffffffffffn;function Eo(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function Ed(e,t){return e*t&qi}function px(e){return function(){let t=BigInt(e&qi),n=BigInt(e>>64n&qi);const r=Ed(Eo(Ed(t,5n),7n),9n);return n^=t,t=(Eo(t,24n)^n^n<<16n)&qi,n=Eo(n,37n),e=n<<64n|t,r}}const Gl=px(0xa187eb39cdcaed8f31c4b365b102e01en),mx=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Gl()))),vx=Array.from({length:8},()=>Gl()),gx=Array.from({length:16},()=>Gl()),ko=Gl(),He="w",at="b",ke="p",$a="n",Qi="b",ns="r",cn="q",Te="k",bo="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Ti{constructor(t,n){ye(this,"color");ye(this,"from");ye(this,"to");ye(this,"piece");ye(this,"captured");ye(this,"promotion");ye(this,"flags");ye(this,"san");ye(this,"lan");ye(this,"before");ye(this,"after");const{color:r,piece:s,from:l,to:o,flags:c,captured:a,promotion:u}=n,h=$e(l),f=$e(o);this.color=r,this.piece=s,this.from=h,this.to=f,this.san=t._moveToSan(n,t._moves({legal:!0})),this.lan=h+f,this.before=t.fen(),t._makeMove(n),this.after=t.fen(),t._undoMove(),this.flags="";for(const d in te)te[d]&c&&(this.flags+=An[d]);a&&(this.captured=a),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(An.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(An.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(An.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(An.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(An.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(An.BIG_PAWN)>-1}}const Be=-1,An={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},te={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Da={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},yx={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},xx={...Da,...yx},Z={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},So={b:[16,32,17,15],w:[-16,-32,-17,-15]},kd={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},wx=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Nx=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],_x={p:1,n:2,b:4,r:8,q:16,k:32},jx="pnbrqkPNBRQK",bd=[$a,Qi,ns,cn],Cx=7,Ex=6,kx=1,bx=0,Ii={[Te]:te.KSIDE_CASTLE,[cn]:te.QSIDE_CASTLE},sn={w:[{square:Z.a1,flag:te.QSIDE_CASTLE},{square:Z.h1,flag:te.KSIDE_CASTLE}],b:[{square:Z.a8,flag:te.QSIDE_CASTLE},{square:Z.h8,flag:te.KSIDE_CASTLE}]},Sx={b:kx,w:Ex},Ro="--";function Gn(e){return e>>4}function Is(e){return e&15}function Cp(e){return"0123456789".indexOf(e)!==-1}function $e(e){const t=Is(e),n=Gn(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function qr(e){return e===He?at:He}function Rx(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(t[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=t[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<s.length;o++){let c=0,a=!1;for(let u=0;u<s[o].length;u++)if(Cp(s[o][u])){if(a)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};c+=parseInt(s[o][u],10),a=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[o][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};c+=1,a=!1}if(c!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const l=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:c}of l){if(!c.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((t[0].match(c)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(s[0]+s[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function Px(e,t){const n=e.from,r=e.to,s=e.piece;let l=0,o=0,c=0;for(let a=0,u=t.length;a<u;a++){const h=t[a].from,f=t[a].to,d=t[a].piece;s===d&&n!==h&&r===f&&(l++,Gn(n)===Gn(h)&&o++,Is(n)===Is(h)&&c++)}return l>0?o>0&&c>0?$e(n):c>0?$e(n).charAt(1):$e(n).charAt(0):""}function ln(e,t,n,r,s,l=void 0,o=te.NORMAL){const c=Gn(r);if(s===ke&&(c===Cx||c===bx))for(let a=0;a<bd.length;a++){const u=bd[a];e.push({color:t,from:n,to:r,piece:s,captured:l,promotion:u,flags:o|te.PROMOTION})}else e.push({color:t,from:n,to:r,piece:s,captured:l,flags:o})}function Sd(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:ke:(t=t.toLowerCase(),t==="o"?Te:t)}function Po(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Tx{constructor(t=bo,{skipValidation:n=!1}={}){ye(this,"_board",new Array(128));ye(this,"_turn",He);ye(this,"_header",{});ye(this,"_kings",{w:Be,b:Be});ye(this,"_epSquare",-1);ye(this,"_halfMoves",0);ye(this,"_moveNumber",0);ye(this,"_history",[]);ye(this,"_comments",{});ye(this,"_castling",{w:0,b:0});ye(this,"_hash",0n);ye(this,"_positionCount",new Map);this.load(t,{skipValidation:n})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:Be,b:Be},this._turn=He,this._castling={w:0,b:0},this._epSquare=Be,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...xx},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let s=t.split(/\s+/);if(s.length>=2&&s.length<6){const c=["-","-","0","1"];t=s.concat(c.slice(-(6-s.length))).join(" ")}if(s=t.split(/\s+/),!n){const{ok:c,error:a}=Rx(t);if(!c)throw new Error(a)}const l=s[0];let o=0;this.clear({preserveHeaders:r});for(let c=0;c<l.length;c++){const a=l.charAt(c);if(a==="/")o+=8;else if(Cp(a))o+=parseInt(a,10);else{const u=a<"a"?He:at;this._put({type:a.toLowerCase(),color:u},$e(o)),o++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=te.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=te.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=te.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=te.QSIDE_CASTLE),this._epSquare=s[3]==="-"?Be:Z[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){var o,c;let n=0,r="";for(let a=Z.a8;a<=Z.h1;a++){if(this._board[a]){n>0&&(r+=n,n=0);const{color:u,type:h}=this._board[a];r+=u===He?h.toUpperCase():h.toLowerCase()}else n++;a+1&136&&(n>0&&(r+=n),a!==Z.h1&&(r+="/"),n=0,a+=8)}let s="";this._castling[He]&te.KSIDE_CASTLE&&(s+="K"),this._castling[He]&te.QSIDE_CASTLE&&(s+="Q"),this._castling[at]&te.KSIDE_CASTLE&&(s+="k"),this._castling[at]&te.QSIDE_CASTLE&&(s+="q"),s=s||"-";let l="-";if(this._epSquare!==Be)if(t)l=$e(this._epSquare);else{const a=this._epSquare+(this._turn===He?16:-16),u=[a+1,a-1];for(const h of u){if(h&136)continue;const f=this._turn;if(((o=this._board[h])==null?void 0:o.color)===f&&((c=this._board[h])==null?void 0:c.type)===ke){this._makeMove({color:f,from:h,to:this._epSquare,piece:ke,captured:ke,flags:te.EP_CAPTURE});const d=!this._isKingAttacked(f);if(this._undoMove(),d){l=$e(this._epSquare);break}}}}return[r,this._turn,s,l,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:n,type:r}=this._board[t],s={w:0,b:1}[n],l={p:0,n:1,b:2,r:3,q:4,k:5}[r];return mx[s][l][t]}_epKey(){return this._epSquare===Be?0n:vx[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return gx[t]}_computeHash(){let t=0n;for(let n=Z.a8;n<=Z.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(t^=this._pieceKey(n))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=ko),t}_updateSetup(t){this._history.length>0||(t!==bo?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(bo)}get(t){return this._board[Z[t]]}findPiece(t){var r;const n=[];for(let s=Z.a8;s<=Z.h1;s++){if(s&136){s+=7;continue}!this._board[s]||((r=this._board[s])==null?void 0:r.color)!==t.color||this._board[s].color===t.color&&this._board[s].type===t.type&&n.push($e(s))}return n}put({type:t,color:n},r){return this._put({type:t,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,n){this._hash^=this._pieceKey(t),this._board[t]=n,this._hash^=this._pieceKey(t)}_put({type:t,color:n},r){if(jx.indexOf(t.toLowerCase())===-1||!(r in Z))return!1;const s=Z[r];if(t==Te&&!(this._kings[n]==Be||this._kings[n]==s))return!1;const l=this._board[s];return l&&l.type===Te&&(this._kings[l.color]=Be),this._set(s,{type:t,color:n}),t===Te&&(this._kings[n]=s),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const n=this.get(t);return this._clear(Z[t]),n&&n.type===Te&&(this._kings[n.color]=Be),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,s,l,o,c,a,u,h,f,d,g,m;this._hash^=this._castlingKey();const t=((r=this._board[Z.e1])==null?void 0:r.type)===Te&&((s=this._board[Z.e1])==null?void 0:s.color)===He,n=((l=this._board[Z.e8])==null?void 0:l.type)===Te&&((o=this._board[Z.e8])==null?void 0:o.color)===at;(!t||((c=this._board[Z.a1])==null?void 0:c.type)!==ns||((a=this._board[Z.a1])==null?void 0:a.color)!==He)&&(this._castling.w&=-65),(!t||((u=this._board[Z.h1])==null?void 0:u.type)!==ns||((h=this._board[Z.h1])==null?void 0:h.color)!==He)&&(this._castling.w&=-33),(!n||((f=this._board[Z.a8])==null?void 0:f.type)!==ns||((d=this._board[Z.a8])==null?void 0:d.color)!==at)&&(this._castling.b&=-65),(!n||((g=this._board[Z.h8])==null?void 0:g.type)!==ns||((m=this._board[Z.h8])==null?void 0:m.color)!==at)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var l,o;if(this._epSquare===Be)return;const t=this._epSquare+(this._turn===He?-16:16),n=this._epSquare+(this._turn===He?16:-16),r=[n+1,n-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||((l=this._board[n])==null?void 0:l.color)!==qr(this._turn)||((o=this._board[n])==null?void 0:o.type)!==ke){this._hash^=this._epKey(),this._epSquare=Be;return}const s=c=>{var a,u;return!(c&136)&&((a=this._board[c])==null?void 0:a.color)===this._turn&&((u=this._board[c])==null?void 0:u.type)===ke};r.some(s)||(this._hash^=this._epKey(),this._epSquare=Be)}_attacked(t,n,r){const s=[];for(let l=Z.a8;l<=Z.h1;l++){if(l&136){l+=7;continue}if(this._board[l]===void 0||this._board[l].color!==t)continue;const o=this._board[l],c=l-n;if(c===0)continue;const a=c+119;if(wx[a]&_x[o.type]){if(o.type===ke){if(c>0&&o.color===He||c<=0&&o.color===at)if(r)s.push($e(l));else return!0;continue}if(o.type==="n"||o.type==="k")if(r){s.push($e(l));continue}else return!0;const u=Nx[a];let h=l+u,f=!1;for(;h!==n;){if(this._board[h]!=null){f=!0;break}h+=u}if(!f)if(r){s.push($e(l));continue}else return!0}}return r?s:!1}attackers(t,n){return n?this._attacked(n,Z[t],!0):this._attacked(this._turn,Z[t],!0)}_isKingAttacked(t){const n=this._kings[t];return n===-1?!1:this._attacked(qr(t),n)}hash(){return this._hash.toString(16)}isAttacked(t,n){return this._attacked(n,Z[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,s=0;for(let l=Z.a8;l<=Z.h1;l++){if(s=(s+1)%2,l&136){l+=7;continue}const o=this._board[l];o&&(t[o.type]=o.type in t?t[o.type]+1:1,o.type===Qi&&n.push(s),r++)}if(r===2)return!0;if(r===3&&(t[Qi]===1||t[$a]===1))return!0;if(r===t[Qi]+2){let l=0;const o=n.length;for(let c=0;c<o;c++)l+=n[c];if(l===0||l===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:n=void 0,piece:r=void 0}={}){const s=this._moves({square:n,piece:r});return t?s.map(l=>new Ti(this,l)):s.map(l=>this._moveToSan(l,s))}_moves({legal:t=!0,piece:n=void 0,square:r=void 0}={}){var g;const s=r?r.toLowerCase():void 0,l=n==null?void 0:n.toLowerCase(),o=[],c=this._turn,a=qr(c);let u=Z.a8,h=Z.h1,f=!1;if(s)if(s in Z)u=h=Z[s],f=!0;else return[];for(let m=u;m<=h;m++){if(m&136){m+=7;continue}if(!this._board[m]||this._board[m].color===a)continue;const{type:N}=this._board[m];let E;if(N===ke){if(l&&l!==N)continue;E=m+So[c][0],this._board[E]||(ln(o,c,m,E,ke),E=m+So[c][1],Sx[c]===Gn(m)&&!this._board[E]&&ln(o,c,m,E,ke,void 0,te.BIG_PAWN));for(let v=2;v<4;v++)E=m+So[c][v],!(E&136)&&(((g=this._board[E])==null?void 0:g.color)===a?ln(o,c,m,E,ke,this._board[E].type,te.CAPTURE):E===this._epSquare&&ln(o,c,m,E,ke,ke,te.EP_CAPTURE))}else{if(l&&l!==N)continue;for(let v=0,p=kd[N].length;v<p;v++){const _=kd[N][v];for(E=m;E+=_,!(E&136);){if(!this._board[E])ln(o,c,m,E,N);else{if(this._board[E].color===c)break;ln(o,c,m,E,N,this._board[E].type,te.CAPTURE);break}if(N===$a||N===Te)break}}}}if((l===void 0||l===Te)&&(!f||h===this._kings[c])){if(this._castling[c]&te.KSIDE_CASTLE){const m=this._kings[c],N=m+2;!this._board[m+1]&&!this._board[N]&&!this._attacked(a,this._kings[c])&&!this._attacked(a,m+1)&&!this._attacked(a,N)&&ln(o,c,this._kings[c],N,Te,void 0,te.KSIDE_CASTLE)}if(this._castling[c]&te.QSIDE_CASTLE){const m=this._kings[c],N=m-2;!this._board[m-1]&&!this._board[m-2]&&!this._board[m-3]&&!this._attacked(a,this._kings[c])&&!this._attacked(a,m-1)&&!this._attacked(a,N)&&ln(o,c,this._kings[c],N,Te,void 0,te.QSIDE_CASTLE)}}if(!t||this._kings[c]===-1)return o;const d=[];for(let m=0,N=o.length;m<N;m++)this._makeMove(o[m]),this._isKingAttacked(c)||d.push(o[m]),this._undoMove();return d}move(t,{strict:n=!1}={}){let r=null;if(typeof t=="string")r=this._moveFromSan(t,n);else if(t===null)r=this._moveFromSan(Ro,n);else if(typeof t=="object"){const l=this._moves();for(let o=0,c=l.length;o<c;o++)if(t.from===$e(l[o].from)&&t.to===$e(l[o].to)&&(!("promotion"in l[o])||t.promotion===l[o].promotion)){r=l[o];break}}if(!r)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&r.flags&te.NULL_MOVE)throw new Error("Null move not allowed when in check");const s=new Ti(this,r);return this._makeMove(r),this._incPositionCount(),s}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,n){this._hash^=this._pieceKey(t),this._board[n]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(n)}_makeMove(t){var s,l,o,c;const n=this._turn,r=qr(n);if(this._push(t),t.flags&te.NULL_MOVE){n===at&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=Be;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&te.EP_CAPTURE&&(this._turn===at?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:n})),this._board[t.to].type===Te){if(this._kings[n]=t.to,t.flags&te.KSIDE_CASTLE){const a=t.to-1,u=t.to+1;this._movePiece(u,a)}else if(t.flags&te.QSIDE_CASTLE){const a=t.to+1,u=t.to-2;this._movePiece(u,a)}this._castling[n]=0}if(this._castling[n]){for(let a=0,u=sn[n].length;a<u;a++)if(t.from===sn[n][a].square&&this._castling[n]&sn[n][a].flag){this._castling[n]^=sn[n][a].flag;break}}if(this._castling[r]){for(let a=0,u=sn[r].length;a<u;a++)if(t.to===sn[r][a].square&&this._castling[r]&sn[r][a].flag){this._castling[r]^=sn[r][a].flag;break}}if(this._hash^=this._castlingKey(),t.flags&te.BIG_PAWN){let a;n===at?a=t.to-16:a=t.to+16,!(t.to-1&136)&&((s=this._board[t.to-1])==null?void 0:s.type)===ke&&((l=this._board[t.to-1])==null?void 0:l.color)===r||!(t.to+1&136)&&((o=this._board[t.to+1])==null?void 0:o.type)===ke&&((c=this._board[t.to+1])==null?void 0:c.color)===r?(this._epSquare=a,this._hash^=this._epKey()):this._epSquare=Be}else this._epSquare=Be;t.piece===ke?this._halfMoves=0:t.flags&(te.CAPTURE|te.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===at&&this._moveNumber++,this._turn=r,this._hash^=ko}undo(){const t=this._hash,n=this._undoMove();if(n){const r=new Ti(this,n);return this._decPositionCount(t),r}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=ko;const r=this._turn,s=qr(r);if(n.flags&te.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:r})),n.captured)if(n.flags&te.EP_CAPTURE){let l;r===at?l=n.to-16:l=n.to+16,this._set(l,{type:ke,color:s})}else this._set(n.to,{type:n.captured,color:s});if(n.flags&(te.KSIDE_CASTLE|te.QSIDE_CASTLE)){let l,o;n.flags&te.KSIDE_CASTLE?(l=n.to+1,o=n.to-1):(l=n.to-2,o=n.to+1),this._movePiece(o,l)}return n}pgn({newline:t=`
`,maxWidth:n=0}={}){const r=[];let s=!1;for(const d in this._header)this._header[d]&&r.push(`[${d} "${this._header[d]}"]`+t),s=!0;s&&this._history.length&&r.push(t);const l=d=>{const g=this._comments[this.fen()];if(typeof g<"u"){const m=d.length>0?" ":"";d=`${d}${m}{${g}}`}return d},o=[];for(;this._history.length>0;)o.push(this._undoMove());const c=[];let a="";for(o.length===0&&c.push(l(""));o.length>0;){a=l(a);const d=o.pop();if(!d)break;if(!this._history.length&&d.color==="b"){const g=`${this._moveNumber}. ...`;a=a?`${a} ${g}`:g}else d.color==="w"&&(a.length&&c.push(a),a=this._moveNumber+".");a=a+" "+this._moveToSan(d,this._moves({legal:!0})),this._makeMove(d)}if(a.length&&c.push(l(a)),c.push(this._header.Result||"*"),n===0)return r.join("")+c.join(" ");const u=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},h=function(d,g){for(const m of g.split(" "))if(m){if(d+m.length>n){for(;u();)d--;r.push(t),d=0}r.push(m),d+=m.length,r.push(" "),d++}return u()&&d--,d};let f=0;for(let d=0;d<c.length;d++){if(f+c[d].length>n&&c[d].includes("{")){f=h(f,c[d]);continue}f+c[d].length>n&&d!==0?(r[r.length-1]===" "&&r.pop(),r.push(t),f=0):d!==0&&(r.push(" "),f++),r.push(c[d]),f+=c[d].length}return r.join("")}header(...t){for(let n=0;n<t.length;n+=2)typeof t[n]=="string"&&typeof t[n+1]=="string"&&(this._header[t[n]]=t[n+1]);return this._header}setHeader(t,n){return this._header[t]=n??Da[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=Da[t]||null,!0):!1}getHeaders(){const t={};for(const[n,r]of Object.entries(this._header))r!==null&&(t[n]=r);return t}loadPgn(t,{strict:n=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(t=t.replace(new RegExp(r,"g"),`
`));const s=fx(t);this.reset();const l=s.headers;let o="";for(const u in l)u.toLowerCase()==="fen"&&(o=l[u]),this.header(u,l[u]);if(!n)o&&this.load(o,{preserveHeaders:!0});else if(l.SetUp==="1"){if(!("FEN"in l))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(l.FEN,{preserveHeaders:!0})}let c=s.root;for(;c;){if(c.move){const u=this._moveFromSan(c.move,n);if(u==null)throw new Error(`Invalid move in PGN: ${c.move}`);this._makeMove(u),this._incPositionCount()}c.comment!==void 0&&(this._comments[this.fen()]=c.comment),c=c.variations[0]}const a=s.result;a&&Object.keys(this._header).length&&this._header.Result!==a&&this.setHeader("Result",a)}_moveToSan(t,n){let r="";if(t.flags&te.KSIDE_CASTLE)r="O-O";else if(t.flags&te.QSIDE_CASTLE)r="O-O-O";else{if(t.flags&te.NULL_MOVE)return Ro;if(t.piece!==ke){const s=Px(t,n);r+=t.piece.toUpperCase()+s}t.flags&(te.CAPTURE|te.EP_CAPTURE)&&(t.piece===ke&&(r+=$e(t.from)[0]),r+="x"),r+=$e(t.to),t.promotion&&(r+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(t,n=!1){let r=Po(t);if(n||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==Ro)return{color:this._turn,from:0,to:0,piece:"k",flags:te.NULL_MOVE};let s=Sd(r),l=this._moves({legal:!0,piece:s});for(let d=0,g=l.length;d<g;d++)if(r===Po(this._moveToSan(l[d],l)))return l[d];if(n)return null;let o,c,a,u,h,f=!1;if(c=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),c?(o=c[1],a=c[2],u=c[3],h=c[4],a.length==1&&(f=!0)):(c=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),c&&(o=c[1],a=c[2],u=c[3],h=c[4],a.length==1&&(f=!0))),s=Sd(r),l=this._moves({legal:!0,piece:o||s}),!u)return null;for(let d=0,g=l.length;d<g;d++)if(a){if((!o||o.toLowerCase()==l[d].piece)&&Z[a]==l[d].from&&Z[u]==l[d].to&&(!h||h.toLowerCase()==l[d].promotion))return l[d];if(f){const m=$e(l[d].from);if((!o||o.toLowerCase()==l[d].piece)&&Z[u]==l[d].to&&(a==m[0]||a==m[1])&&(!h||h.toLowerCase()==l[d].promotion))return l[d]}}else if(r===Po(this._moveToSan(l[d],l)).replace("x",""))return l[d];return null}ascii(){let t=`   +------------------------+
`;for(let n=Z.a8;n<=Z.h1;n++){if(Is(n)===0&&(t+=" "+"87654321"[Gn(n)]+" |"),this._board[n]){const r=this._board[n].type,l=this._board[n].color===He?r.toUpperCase():r.toLowerCase();t+=" "+l+" "}else t+=" . ";n+1&136&&(t+=`|
`,n+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const n=this._moves({legal:!1});let r=0;const s=this._turn;for(let l=0,o=n.length;l<o;l++)this._makeMove(n[l]),this._isKingAttacked(s)||(t-1>0?r+=this.perft(t-1):r++),this._undoMove();return r}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let n=[];for(let r=Z.a8;r<=Z.h1;r++)this._board[r]==null?n.push(null):n.push({square:$e(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(t.push(n),n=[],r+=8);return t}squareColor(t){if(t in Z){const n=Z[t];return(Gn(n)+Is(n))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;t?r.push(new Ti(this,s)):r.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return r}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const n=this._positionCount.get(t)??0;n===1?this._positionCount.delete(t):this._positionCount.set(t,n-1)}_pruneComments(){const t=[],n={},r=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)t.push(this._undoMove());for(r(this.fen());;){const s=t.pop();if(!s)break;this._makeMove(s),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const n=this._comments[t];return delete this._comments[t],{fen:t,comment:n}})}setCastlingRights(t,n){for(const s of[Te,cn])n[s]!==void 0&&(n[s]?this._castling[t]|=Ii[s]:this._castling[t]&=~Ii[s]);this._updateCastlingRights();const r=this.getCastlingRights(t);return(n[Te]===void 0||n[Te]===r[Te])&&(n[cn]===void 0||n[cn]===r[cn])}getCastlingRights(t){return{[Te]:(this._castling[t]&Ii[Te])!==0,[cn]:(this._castling[t]&Ii[cn])!==0}}moveNumber(){return this._moveNumber}}const Ix=["a","b","c","d","e","f","g","h"],Ox=["8","7","6","5","4","3","2","1"],Ax={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"};function Oi(e,t,n){const r=n==="b"?7-e:e,s=n==="b"?7-t:t;return`${Ix[r]}${Ox[s]}`}function Rd(e){if(!e)return"";const t=Ax[e.type];return`/chess/pieces/256h/${e.color==="w"?"w":"b"}_${t}_png_256px.png`}function Lx(e){const t=[];for(let n=0;n<e.length;n+=2)t.push({turn:Math.floor(n/2)+1,white:e[n],black:e[n+1]||""});return t}function $x({state:e,playerId:t,onAction:n}){const[r,s]=w.useState(null),[l,o]=w.useState([]),[c,a]=w.useState(null),u=w.useMemo(()=>e!=null&&e.fen?new Tx(e.fen):null,[e==null?void 0:e.fen]),h=(e==null?void 0:e.myColor)||"w",f=(e==null?void 0:e.phase)==="TURN"&&(e==null?void 0:e.turn)===h,d=u?u.board():[],g=Lx((e==null?void 0:e.moves)||[]),m=e==null?void 0:e.drawOfferBy,N=m&&m!==t,E=m&&m===t,v=(x,k)=>{if(!u||!f)return;const L=Oi(x,k,h),y=u.get(L);if(!y||y.color!==h){s(null),o([]);return}const A=u.moves({square:L,verbose:!0});s(L),o(A.map(j=>j.to))},p=(x,k)=>{if(!u||!r||!f)return;const L=Oi(x,k,h);if(!l.includes(L))return;if(u.moves({square:r,verbose:!0}).filter(j=>j.to===L).some(j=>j.flags.includes("p"))){a({from:r,to:L});return}n({type:"MOVE",from:r,to:L}),s(null),o([])},_=x=>{c&&(n({type:"MOVE",from:c.from,to:c.to,promotion:x}),a(null),s(null),o([]))};return!e||!e.board?i.jsx("div",{className:"chess",children:"Waiting for game..."}):i.jsxs("div",{className:"chess",children:[i.jsxs("header",{className:"chess__header",children:[i.jsxs("div",{children:[i.jsx("div",{className:"chess__title",children:"Chess"}),i.jsx("div",{className:"chess__subtitle",children:f?"Your move":"Waiting for opponent"})]}),i.jsxs("div",{className:"chess__controls",children:[i.jsx("button",{className:"chess__btn",onClick:()=>n({type:"OFFER_DRAW"}),disabled:E,children:E?"Draw offered":"Offer draw"}),i.jsx("button",{className:"chess__btn danger",onClick:()=>n({type:"RESIGN"}),children:"Resign"})]})]}),i.jsxs("div",{className:"chess__layout",children:[i.jsx("div",{className:"chess__board",children:Array.from({length:8}).map((x,k)=>i.jsx("div",{className:"chess__row",children:Array.from({length:8}).map((L,y)=>{var S;const A=h==="b"?7-k:k,j=h==="b"?7-y:y,T=((S=d[A])==null?void 0:S[j])||null,F=Oi(y,k,h),O=r===F,z=l.includes(F),C=(k+y)%2===1;return i.jsx("button",{className:`chess__tile ${C?"dark":"light"} ${O?"selected":""} ${z?"legal":""}`,onClick:()=>{if(!(!f||!u)){if(O){s(null),o([]);return}if(r){if(T&&T.color===h){const b=Oi(y,k,h),$=u.moves({square:b,verbose:!0});s(b),o($.map(P=>P.to));return}p(y,k)}else v(y,k)}},children:T&&i.jsx("img",{src:Rd(T),alt:`${T.color}${T.type}`,className:"chess__piece",draggable:!1})},`${k}-${y}`)})},`row-${k}`))}),i.jsxs("aside",{className:"chess__sidebar",children:[i.jsxs("div",{className:"chess__panel",children:[i.jsx("div",{className:"chess__panel-title",children:"Moves"}),i.jsxs("div",{className:"chess__moves",children:[g.length===0&&i.jsx("div",{className:"chess__empty",children:"No moves yet"}),g.map(x=>i.jsxs("div",{className:"chess__move-row",children:[i.jsxs("span",{className:"turn",children:[x.turn,"."]}),i.jsx("span",{className:"move",children:x.white}),i.jsx("span",{className:"move",children:x.black})]},`turn-${x.turn}`))]})]}),N&&i.jsxs("div",{className:"chess__panel",children:[i.jsx("div",{className:"chess__panel-title",children:"Draw offer"}),i.jsxs("div",{className:"chess__draw-actions",children:[i.jsx("button",{className:"chess__btn",onClick:()=>n({type:"ACCEPT_DRAW"}),children:"Accept"}),i.jsx("button",{className:"chess__btn secondary",onClick:()=>n({type:"DECLINE_DRAW"}),children:"Decline"})]})]})]})]}),c&&i.jsx("div",{className:"chess__modal-overlay",onClick:()=>a(null),children:i.jsxs("div",{className:"chess__modal",onClick:x=>x.stopPropagation(),children:[i.jsx("div",{className:"chess__panel-title",children:"Choose promotion"}),i.jsx("div",{className:"chess__promotion",children:["q","r","b","n"].map(x=>i.jsx("button",{className:"chess__promo-btn",onClick:()=>_(x),children:i.jsx("img",{src:Rd({type:x,color:h}),alt:x,className:"chess__piece"})},x))})]})}),e.phase==="FINISHED"&&i.jsx("div",{className:"chess__modal-overlay",children:i.jsxs("div",{className:"chess__modal",children:[i.jsx("div",{className:"chess__title",children:"Game Over"}),i.jsx("div",{className:"chess__subtitle",children:e.drawReason?`Draw: ${e.drawReason}`:e.winnerColor===h?"You win!":"You lose."})]})})]})}const Wt=5,Os=6;function Dx(e){return String(e||"").toUpperCase().replace(/[^A-Z]/g,"")}function Mx(e,t){const n=Array(Wt).fill("absent"),r={};for(let s=0;s<Wt;s+=1){const l=t[s];e[s]===l?n[s]="correct":r[l]=(r[l]||0)+1}for(let s=0;s<Wt;s+=1){if(n[s]==="correct")continue;const l=e[s];r[l]&&(n[s]="present",r[l]-=1)}return n}function Ep(e,t){const n={};return e.forEach((r,s)=>{const l=t[s]||[];r.split("").forEach((o,c)=>{const a=l[c];a&&(a==="correct"?n[o]="correct":a==="present"&&n[o]!=="correct"?n[o]="present":a==="absent"&&!n[o]&&(n[o]="absent"))})}),n}const Bx=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["ENTER","Z","X","C","V","B","N","M","BACK"]];function Ux({state:e,playerId:t,onAction:n,isHost:r}){var j,T,F,O,z;const[s,l]=w.useState(""),[o,c]=w.useState(!1),[a,u]=w.useState(""),h=(j=e.playerStates)==null?void 0:j[t],f=(h==null?void 0:h.guesses)||[],d=(h==null?void 0:h.results)||[],g=(h==null?void 0:h.status)||"WAITING",m=e.phase==="PLAYING",N=m&&g==="IN_PROGRESS",E=(T=e.ready)==null?void 0:T[t],[v,p]=w.useState(null);w.useEffect(()=>{if(!e.roundEndsAt){p(null);return}const C=()=>{const b=e.roundEndsAt-Date.now();p(Math.max(0,Math.ceil(b/1e3)))};C();const S=setInterval(C,1e3);return()=>clearInterval(S)},[e.roundEndsAt]),w.useEffect(()=>{const C=S=>{if(!N)return;const b=S.key.toUpperCase();if(b==="BACKSPACE"){l($=>$.slice(0,-1));return}if(b==="ENTER"){_();return}/^[A-Z]$/.test(b)&&s.length<Wt&&l($=>$+b)};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[N,s]);const _=()=>{if(s.length!==Wt){c(!0),u("Not enough letters"),setTimeout(()=>{c(!1),u("")},1e3);return}n({type:"GUESS",payload:{guess:s}}),l("")},x=C=>{if(N){if(C==="ENTER"){_();return}if(C==="BACK"){l(S=>S.slice(0,-1));return}s.length<Wt&&/^[A-Z]$/.test(C)&&l(S=>S+C)}},k=Fx(f,s,d,N),L=Ep(f,d);(F=e.players)!=null&&F.filter(C=>C.playerId!==t);const y=w.useMemo(()=>[...e.players||[]].map(C=>{var S;return{...C,score:((S=e.scores)==null?void 0:S[C.playerId])||0}}).sort((C,S)=>S.score-C.score),[e.players,e.scores]),A=()=>{var C,S;if(e.phase==="LOBBY")return"Waiting for players...";if(e.phase==="ROUND_END"){const b=e.currentWord||"???";if(e.roundWinner===t)return`You won this round! Word: ${b}`;if(e.roundWinner){const $=(C=e.players)==null?void 0:C.find(P=>P.playerId===e.roundWinner);return`${($==null?void 0:$.displayName)||"Someone"} won! Word: ${b}`}return`No one got it. Word: ${b}`}if(e.phase==="GAME_END"){const b=Math.max(...Object.values(e.scores||{})),$=((S=e.players)==null?void 0:S.filter(P=>{var I;return(((I=e.scores)==null?void 0:I[P.playerId])||0)===b}))||[];return $.length===1?$[0].playerId===t?"You won the game!":`${$[0].displayName} wins the game!`:"Game over - It's a tie!"}return e.phase==="PLAYING"?g==="WIN"?"Solved! Waiting for others...":g==="LOSE"?"Out of guesses. Waiting for others...":`Round ${e.round}/${e.totalRounds} - Guess the word!`:""};return i.jsxs("div",{className:"wordle-board-container",children:[e.phase==="GAME_END"&&i.jsx("div",{className:"wordle-winner-overlay",children:i.jsxs("div",{className:"wordle-winner-modal",children:[i.jsx("div",{className:"wordle-winner-title",children:(()=>{var b;const C=Math.max(...Object.values(e.scores||{})),S=((b=e.players)==null?void 0:b.filter($=>{var P;return(((P=e.scores)==null?void 0:P[$.playerId])||0)===C}))||[];return S.length===1&&S[0].playerId===t?"You Win!":S.length===1?`${S[0].displayName} Wins!`:"It's a Tie!"})()}),i.jsx("div",{className:"wordle-winner-subtitle",children:"Game Complete"})]})}),i.jsx("div",{className:"wordle-header",children:i.jsxs("div",{className:"wordle-status",children:[i.jsx("div",{className:`wordle-turn-msg ${m&&g==="IN_PROGRESS"?"your-turn":""}`,children:A()}),v!==null&&e.phase==="PLAYING"&&i.jsxs("div",{className:`wordle-timer ${v<=30?"warning":""}`,children:[Math.floor(v/60),":",String(v%60).padStart(2,"0")]})]})}),i.jsx("div",{className:"wordle-scoreboard",children:y.map((C,S)=>{var b,$,P,I,V,U,W;return i.jsxs("div",{className:`wordle-score-entry ${C.playerId===t?"you":""} ${S===0?"leader":""}`,children:[i.jsx("span",{className:"wordle-score-name",children:C.playerId===t?"You":C.displayName}),i.jsx("span",{className:"wordle-score-value",children:C.score}),e.phase==="PLAYING"&&i.jsx("span",{className:`wordle-progress ${(($=(b=e.playerStates)==null?void 0:b[C.playerId])==null?void 0:$.status)||"waiting"}`,children:((I=(P=e.playerStates)==null?void 0:P[C.playerId])==null?void 0:I.guessCount)!==void 0?`${e.playerStates[C.playerId].guessCount}/${Os}`:((W=(U=(V=e.playerStates)==null?void 0:V[C.playerId])==null?void 0:U.guesses)==null?void 0:W.length)!==void 0?`${e.playerStates[C.playerId].guesses.length}/${Os}`:""})]},C.playerId)})}),(e.phase==="LOBBY"||e.phase==="ROUND_END")&&i.jsxs("div",{className:"wordle-lobby",children:[i.jsx("div",{className:"wordle-ready-list",children:(O=e.players)==null?void 0:O.map(C=>{var S,b;return i.jsxs("div",{className:`wordle-ready-item ${(S=e.ready)!=null&&S[C.playerId]?"ready":""}`,children:[i.jsx("span",{children:C.playerId===t?"You":C.displayName}),i.jsx("span",{className:"wordle-ready-status",children:(b=e.ready)!=null&&b[C.playerId]?"Ready":"Not Ready"})]},C.playerId)})}),!E&&i.jsx("button",{className:"wordle-btn wordle-btn-ready",onClick:()=>n({type:"READY"}),children:"Ready Up"}),E&&i.jsx("div",{className:"wordle-waiting",children:"Waiting for others..."}),r&&e.phase==="ROUND_END"&&e.round<e.totalRounds&&i.jsx("button",{className:"wordle-btn wordle-btn-next",onClick:()=>n({type:"NEXT_ROUND"}),children:"Next Round"})]}),(e.phase==="PLAYING"||e.phase==="ROUND_END"||e.phase==="GAME_END")&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"wordle-grid",children:k.map((C,S)=>i.jsx("div",{className:`wordle-row ${o&&S===f.length?"shake":""}`,children:C.map((b,$)=>i.jsx("div",{className:`wordle-cell ${b.status}`,children:b.letter},$))},S))}),a&&i.jsx("div",{className:"wordle-message",children:a}),e.phase==="PLAYING"&&i.jsx("div",{className:"wordle-keyboard",children:Bx.map((C,S)=>i.jsx("div",{className:"wordle-keyboard-row",children:C.map(b=>{const $=L[b]||"unused",P=b==="ENTER"||b==="BACK";return i.jsx("button",{className:`wordle-key ${$} ${P?"special":""}`,onClick:()=>x(b),disabled:!N,children:b==="BACK"?"DEL":b},b)})},S))})]}),((z=e.history)==null?void 0:z.length)>0&&(e.phase==="ROUND_END"||e.phase==="GAME_END")&&i.jsxs("div",{className:"wordle-history",children:[i.jsx("div",{className:"wordle-history-title",children:"Round History"}),e.history.map((C,S)=>{var b,$;return i.jsxs("div",{className:"wordle-history-round",children:[i.jsxs("span",{className:"wordle-history-label",children:["Round ",C.round,": ",C.word]}),i.jsx("span",{className:"wordle-history-winner",children:C.winnerId?C.winnerId===t?"You won":`${(($=(b=e.players)==null?void 0:b.find(P=>P.playerId===C.winnerId))==null?void 0:$.displayName)||"Someone"} won`:"No winner"})]},S)})]})]})}function Fx(e,t,n,r){const s=[];for(let l=0;l<Os;l++){const o=e[l]||(l===e.length&&r?t:""),c=n[l]||[],a=[];for(let u=0;u<Wt;u++)a.push({letter:o[u]||"",status:c[u]||(o[u]?"filled":"empty")});s.push(a)}return s}function zx(){var P;const e=et(),{code:t}=Zn(),n=w.useMemo(()=>mt(),[]),r=String(t||"").toUpperCase(),s=w.useRef(null),[l,o]=w.useState(null),[c,a]=w.useState(!1),[u,h]=w.useState(""),[f,d]=w.useState(0),[g,m]=w.useState(new Map),N=w.useRef(new Map),E=f0(s,n),v=(l==null?void 0:l.players)||[],p=l==null?void 0:l.currentGame,_=p==null?void 0:p.gameKey,x=p==null?void 0:p.state,k=((P=v.find(I=>I.isHost))==null?void 0:P.playerId)===n.playerId,L=(p==null?void 0:p.status)==="FINISHED";w.useEffect(()=>(document.body.classList.add("room-mode"),()=>document.body.classList.remove("room-mode")),[]),w.useEffect(()=>{const I=zt();s.current=I;const V=ne=>{var We;o(ne);const ue=(We=ne==null?void 0:ne.currentGame)==null?void 0:We.state,oe=(ue==null?void 0:ue.roundEndsAt)||(ue==null?void 0:ue.phaseEndsAt);if(oe){const ot=Math.max(0,Math.ceil((oe-Date.now())/1e3));d(ot)}},U=ne=>{q("beep")},W=ne=>{q("invalid"),y((ne==null?void 0:ne.message)||(ne==null?void 0:ne.code)||"Error")},Q=ne=>{y("Game finished!")},se=({playerId:ne,displayName:ue})=>{const oe=N.current.get(ne);oe&&clearTimeout(oe),m(ot=>{const tt=new Map(ot);return tt.set(ne,ue),tt});const We=setTimeout(()=>{m(ot=>{const tt=new Map(ot);return tt.delete(ne),tt}),N.current.delete(ne)},3e3);N.current.set(ne,We)};return I.on("room:state",V),I.on("room:chatMessage",U),I.on("room:error",W),I.on("game:error",W),I.on("game:ended",Q),I.on("room:typing",se),I.emit("room:join",{joinCode:r}),()=>{I.off("room:state",V),I.off("room:chatMessage",U),I.off("room:error",W),I.off("game:error",W),I.off("game:ended",Q),I.off("room:typing",se),N.current.forEach(ne=>clearTimeout(ne)),N.current.clear()}},[r]),w.useEffect(()=>{const I=(x==null?void 0:x.roundEndsAt)||(x==null?void 0:x.phaseEndsAt);if(!I){d(0);return}const V=setInterval(()=>{const U=Math.max(0,Math.ceil((I-Date.now())/1e3));d(U)},500);return()=>clearInterval(V)},[x==null?void 0:x.roundEndsAt,x==null?void 0:x.phaseEndsAt,x==null?void 0:x.phase]);const y=I=>{h(I),setTimeout(()=>h(""),2500)},A=I=>{const V=s.current;!V||!I.trim()||V.emit("room:chat",{message:I})},j=(I,V)=>{ee(),q("beep"),s.current.emit("room:selectGame",{gameKey:I,mode:V})},T=()=>{ee(),q("beep"),s.current.emit("room:startGame")},F=()=>{ee(),q("beep"),s.current.emit("room:rematch")},O=()=>{ee(),q("beep"),s.current.emit("room:switchGame")},z=I=>{s.current.emit("game:action",{action:I})},C=()=>{ee(),q("beep"),s.current.emit("room:leave"),e("/")},S=async()=>{try{ee(),q("beep"),await navigator.clipboard.writeText(`${window.location.origin}/room/${r}`),y("Link copied!")}catch{y("Copy failed")}},b=()=>{if(!p)return i.jsx(v0,{onSelect:j,playerCount:v.length,isHost:k});const I={room:l,gameState:x,session:n,players:v,isHost:k,gameFinished:L,onAction:z,onRematch:F,onSwitchGame:O,timeLeft:f};switch(_){case"reversi":return i.jsx(y0,{...I});case"connect4":return i.jsx(w0,{...I});case"draw":return i.jsx(N0,{...I,socketRef:s});case"charades":return i.jsx(_0,{...I});case"cribbage":return i.jsx(R0,{gameState:x,playerId:n.playerId,players:v,onAction:z,isHost:k});case"catan":return i.jsx(ex,{state:x,playerId:n.playerId,onAction:z});case"uno":return i.jsx(nx,{state:x,playerId:n.playerId,onAction:z,isHost:k});case"crazy_eights":return i.jsx(ox,{state:x,playerId:n.playerId,onAction:z});case"chess":return i.jsx($x,{state:x,playerId:n.playerId,onAction:z});case"fibbage":return i.jsx(ix,{...I});case"wordle":return i.jsx(Ux,{state:x,playerId:n.playerId,onAction:z,isHost:k});default:return i.jsxs("div",{className:"room-message",children:["Unknown game: ",_]})}},$=v.length>=2&&k&&p&&!L&&(x==null?void 0:x.phase)==="LOBBY";return i.jsxs("div",{className:"room-shell",children:[i.jsxs("header",{className:"room-header",children:[i.jsxs("div",{className:"room-title",children:[i.jsxs("span",{className:"room-code",children:["Room ",r]}),_&&i.jsx("span",{className:"room-game-badge",children:_.toUpperCase()})]}),i.jsxs("div",{className:"room-header-actions",children:[f>0&&i.jsxs("div",{className:"room-timer",children:[f,"s"]}),i.jsx("button",{className:"room-btn ghost",onClick:S,children:"Share"}),i.jsxs("button",{className:"room-btn ghost",onClick:()=>a(!c),children:["Chat ",c?"":""]}),i.jsx("button",{className:"room-btn ghost",onClick:C,children:"Leave"})]})]}),i.jsxs("div",{className:"room-body",children:[i.jsxs("aside",{className:"room-sidebar",children:[i.jsxs("div",{className:"room-panel",children:[i.jsxs("div",{className:"room-panel-title",children:["Players (",v.length,")"]}),i.jsxs("div",{className:"room-player-list",children:[v.map(I=>{var V;return i.jsxs("div",{className:`room-player ${I.playerId===n.playerId?"you":""} ${I.isHost?"host":""}`,children:[i.jsx("span",{className:"player-name",children:I.displayName}),I.isHost&&i.jsx("span",{className:"host-badge",children:"HOST"}),((V=x==null?void 0:x.scores)==null?void 0:V[I.playerId])!==void 0&&i.jsx("span",{className:"player-score",children:x.scores[I.playerId]})]},I.playerId)}),v.length===0&&i.jsx("div",{className:"room-empty",children:"No players yet"})]})]}),i.jsx(g0,{isInVoice:E.isInVoice,isMuted:E.isMuted,voicePeers:E.voicePeers,error:E.error,onJoin:E.joinVoice,onLeave:E.leaveVoice,onToggleMute:E.toggleMute,players:v,session:n}),k&&p&&i.jsxs("div",{className:"room-panel host-controls",children:[i.jsx("div",{className:"room-panel-title",children:"Host Controls"}),$&&i.jsx("button",{className:"room-btn primary",onClick:T,children:"Start Game"}),L&&i.jsx("button",{className:"room-btn primary",onClick:F,children:"Play Again"}),i.jsx("button",{className:"room-btn secondary",onClick:O,children:"Switch Game"})]})]}),i.jsx("main",{className:"room-main",children:b()}),i.jsx(p0,{open:c,messages:(l==null?void 0:l.chat)||[],onSend:A,session:n,socketRef:s,typingUsers:g})]}),u&&i.jsx("div",{className:"room-toast",children:u})]})}async function kp({gameKey:e,mode:t}){const n=await fetch("/api/rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameKey:e,mode:t})});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error((r==null?void 0:r.error)||"CREATE_ROOM_FAILED")}return n.json()}function bp(){const[e,t]=w.useState(!0);w.useEffect(()=>{t(ip())},[]);const n=()=>{ee();const r=!e;t(r),lp(r)};return i.jsxs("button",{className:"button secondary",onClick:n,children:["Sound: ",e?"On":"Off"]})}function Wx(){const e=et(),t=w.useMemo(()=>mt(),[]),[n,r]=w.useState(t.displayName),[s,l]=w.useState(""),[o,c]=w.useState(!1),[a,u]=w.useState(""),h=g=>{r(g),zs(g.trim()||"Player")},f=async g=>{u(""),c(!0),ee(),q("beep");try{const m=await kp({gameKey:"reversi",mode:g});e(`/lobby/${m.joinCode}`)}catch(m){u(m.message||"Unable to create room")}finally{c(!1)}},d=()=>{const g=s.trim().toUpperCase();g&&(ee(),q("beep"),e(`/lobby/${g}`))};return i.jsxs("div",{className:"app-shell",children:[i.jsx("header",{className:"reversi-title",children:"REVERSI".split("").map((g,m)=>i.jsx("span",{className:m%2===0?"dark":"light",children:g},g+m))}),i.jsxs("section",{className:"panel",children:[i.jsx("div",{className:"panel-title",children:"Player Setup"}),i.jsxs("div",{className:"menu",children:[i.jsx("input",{className:"input",value:n,onChange:g=>h(g.target.value),placeholder:"Your name"}),i.jsxs("div",{className:"subtle",children:["Welcome, ",n||"Player","!"]}),i.jsx(bp,{})]})]}),i.jsxs("section",{className:"panel",children:[i.jsx("div",{className:"panel-title",children:"Start a Match"}),i.jsxs("div",{className:"menu",children:[i.jsx("button",{className:"button",onClick:()=>f("AI"),disabled:o,children:"Play vs Computer"}),i.jsx("button",{className:"button",onClick:()=>f("PVP"),disabled:o,children:"Play 2-Player"})]})]}),i.jsxs("section",{className:"panel",children:[i.jsx("div",{className:"panel-title",children:"Join Existing Game"}),i.jsxs("div",{className:"menu",children:[i.jsx("input",{className:"input",value:s,onChange:g=>l(g.target.value),placeholder:"Enter code"}),i.jsx("button",{className:"button secondary",onClick:d,children:"Join Game"}),a?i.jsx("div",{className:"subtle",children:a}):null]})]})]})}function Gx(){var f,d;const{code:e}=Zn(),t=et(),n=w.useMemo(()=>String(e||"").toUpperCase(),[e]),[r,s]=w.useState(null),[l,o]=w.useState("");w.useEffect(()=>{const g=zt(),m=v=>{s(v.room),v.room.status==="IN_PROGRESS"&&t(`/game/${v.room.joinCode}`)},N=v=>{o(v.message||""),setTimeout(()=>o(""),2200)},E=v=>{q("invalid"),o((v==null?void 0:v.message)||(v==null?void 0:v.code)||"Error"),setTimeout(()=>o(""),2200)};return g.on("room:state",m),g.on("game:toast",N),g.on("room:error",E),g.emit("room:join",{joinCode:n}),()=>{g.off("room:state",m),g.off("game:toast",N),g.off("room:error",E)}},[n,t]);const c=`${window.location.origin}/lobby/${n}`,a=async()=>{try{ee(),q("beep"),await navigator.clipboard.writeText(c),o("Link copied!"),setTimeout(()=>o(""),2e3)}catch{o("Copy failed. Tap and hold to copy."),setTimeout(()=>o(""),2200)}},u=(f=r==null?void 0:r.players)!=null&&f.black&&r.players.black!=="AI"?r.players.black.displayName:"Waiting...",h=(d=r==null?void 0:r.players)!=null&&d.white&&r.players.white!=="AI"?r.players.white.displayName:(r==null?void 0:r.mode)==="AI"?"Computer":"Waiting...";return i.jsxs("div",{className:"app-shell",children:[i.jsx("header",{className:"reversi-title",children:"LOBBY".split("").map((g,m)=>i.jsx("span",{className:m%2===0?"dark":"light",children:g},g+m))}),i.jsx("section",{className:"panel",children:i.jsxs("div",{className:"lobby-header",children:[i.jsx("div",{className:"panel-title",children:"Room Code"}),i.jsx("div",{className:"join-code",children:n}),i.jsx("div",{className:"subtle",children:"Share this code or link with the next player."}),i.jsxs("div",{className:"share-row",children:[i.jsx("button",{className:"button",onClick:a,children:"Copy Share Link"}),i.jsx("a",{className:"button secondary",href:c,children:"Open Link"})]})]})}),i.jsxs("section",{className:"panel",children:[i.jsx("div",{className:"panel-title",children:"Players"}),i.jsxs("div",{className:"scoreboard",children:[i.jsxs("div",{className:"score-card",children:[i.jsx("div",{className:"score-name",children:"Black"}),i.jsx("div",{className:"score-name",children:u})]}),i.jsxs("div",{className:"score-card",children:[i.jsx("div",{className:"score-name",children:"White"}),i.jsx("div",{className:"score-name",children:h})]})]}),i.jsx("div",{className:"subtle",children:"Waiting for both players to join..."})]}),l?i.jsx("div",{className:"toast",children:l}):null]})}function Vx(){var _,x,k,L;const{code:e}=Zn(),t=et(),n=w.useMemo(()=>String(e||"").toUpperCase(),[e]),r=w.useMemo(()=>mt(),[]),[s,l]=w.useState(null),[o,c]=w.useState("");w.useEffect(()=>{const y=zt(),A=O=>{l(O.room)},j=O=>{c(O.message||""),setTimeout(()=>c(""),2200)},T=O=>{q("invalid"),c((O==null?void 0:O.message)||(O==null?void 0:O.code)||"Error"),setTimeout(()=>c(""),2200)},F=O=>{var C,S;if(!O)return;const z=O.winner==="DRAW"?"Draw":O.winner==="B"?"Black wins":"White wins";c(`${z} (${((C=O.counts)==null?void 0:C.B)??0} - ${((S=O.counts)==null?void 0:S.W)??0})`),setTimeout(()=>c(""),3e3)};return y.on("room:state",A),y.on("game:toast",j),y.on("room:error",T),y.on("game:ended",F),y.emit("room:join",{joinCode:n}),()=>{y.off("room:state",A),y.off("game:toast",j),y.off("room:error",T),y.off("game:ended",F)}},[n]);const a=s==null?void 0:s.state,u=(a==null?void 0:a.board)||[],h=new Set(((a==null?void 0:a.legalMoves)||[]).map(y=>`${y.r}-${y.c}`)),f=(_=s==null?void 0:s.players)!=null&&_.black&&s.players.black!=="AI"?s.players.black:null,d=(x=s==null?void 0:s.players)!=null&&x.white&&s.players.white!=="AI"?s.players.white:null,g=(f==null?void 0:f.playerId)===r.playerId?"B":(d==null?void 0:d.playerId)===r.playerId?"W":null,m=g&&(a==null?void 0:a.turn)===g,N=(y,A)=>{if(!(s!=null&&s.roomId)||!a||!m||!h.has(`${y}-${A}`))return;ee(),q("place"),zt().emit("game:action",{roomId:s.roomId,action:{type:"MOVE",payload:{row:y,col:A}}})},E=()=>{ee(),q("beep"),s!=null&&s.roomId&&zt().emit("room:leave",{roomId:s.roomId}),t("/")},v=`${window.location.origin}/lobby/${n}`,p=async()=>{try{ee(),q("beep"),await navigator.clipboard.writeText(v),c("Link copied!"),setTimeout(()=>c(""),2e3)}catch{c("Copy failed. Tap and hold to copy."),setTimeout(()=>c(""),2200)}};return i.jsxs("div",{className:"app-shell",children:[i.jsx("header",{className:"reversi-title",children:"REVERSI".split("").map((y,A)=>i.jsx("span",{className:A%2===0?"dark":"light",children:y},y+A))}),i.jsxs("section",{className:"panel",children:[i.jsxs("div",{className:"scoreboard",children:[i.jsxs("div",{className:`score-card ${(a==null?void 0:a.turn)==="B"?"active":""}`,children:[i.jsxs("div",{children:[i.jsx("div",{className:"score-name",children:"Black"}),i.jsx("div",{className:"score-name",children:(f==null?void 0:f.displayName)||((s==null?void 0:s.mode)==="AI"?"You":"Waiting...")})]}),i.jsx("div",{className:"score-count",children:((k=a==null?void 0:a.counts)==null?void 0:k.B)??0}),i.jsx("div",{className:"piece black"})]}),i.jsxs("div",{className:`score-card ${(a==null?void 0:a.turn)==="W"?"active":""}`,children:[i.jsxs("div",{children:[i.jsx("div",{className:"score-name",children:"White"}),i.jsx("div",{className:"score-name",children:(d==null?void 0:d.displayName)||((s==null?void 0:s.mode)==="AI"?"Computer":"Waiting...")})]}),i.jsx("div",{className:"score-count",children:((L=a==null?void 0:a.counts)==null?void 0:L.W)??0}),i.jsx("div",{className:"piece white"})]})]}),i.jsx("div",{className:"subtle",children:(a==null?void 0:a.status)==="FINISHED"?"Game complete":m?"Your turn":"Waiting for opponent"})]}),i.jsx("section",{className:"board-frame",children:i.jsx("div",{className:"board",children:u.map((y,A)=>y.map((j,T)=>{var C,S;const F=`${A}-${T}`,O=m&&h.has(F),z=((C=a==null?void 0:a.lastMove)==null?void 0:C.r)===A&&((S=a==null?void 0:a.lastMove)==null?void 0:S.c)===T;return i.jsxs("div",{className:`cell ${O?"legal":""} ${m?"":"disabled"} ${z?"last-move":""}`,onClick:()=>N(A,T),children:[j==="B"?i.jsx("div",{className:"piece black"}):null,j==="W"?i.jsx("div",{className:"piece white"}):null]},F)}))})}),i.jsxs("section",{className:"actions",children:[i.jsx("button",{className:"button secondary",onClick:p,children:"Share Link"}),i.jsx("button",{className:"button",onClick:E,children:"Back to Hub"})]}),o?i.jsx("div",{className:"toast",children:o}):null]})}const Hx={players:[],food:[]};function Yx(){const e=et(),[t,n]=w.useState(!1),[r,s]=w.useState(""),[l,o]=w.useState(0),[c,a]=w.useState([]),[u,h]=w.useState(null),[f,d]=w.useState(ip()),g=w.useRef(null),m=w.useRef(null),N=w.useRef(null),E=w.useRef(null),v=w.useRef(3e3),p=w.useRef(Hx),_=w.useRef({x:0,y:0}),x=w.useRef(1),k=w.useRef(null),L=w.useRef(!1);w.useEffect(()=>(document.body.classList.add("slither-mode"),()=>{document.body.classList.remove("slither-mode")}),[]),w.useEffect(()=>{const O=m.current;if(!O)return;const z=b=>{b.pointerType!=="touch"&&(O.style.left=`${b.clientX}px`,O.style.top=`${b.clientY}px`)},C=b=>{b.pointerType!=="touch"&&O.classList.add("active")},S=b=>{b.pointerType!=="touch"&&O.classList.remove("active")};return document.addEventListener("pointermove",z),document.addEventListener("pointerdown",C),document.addEventListener("pointerup",S),()=>{document.removeEventListener("pointermove",z),document.removeEventListener("pointerdown",C),document.removeEventListener("pointerup",S)}},[]),w.useEffect(()=>{const O=g.current;if(!O)return;const z=()=>{O.width=window.innerWidth,O.height=window.innerHeight};z(),window.addEventListener("resize",z);const C=()=>{const S=O.getContext("2d");if(!S)return;S.fillStyle="#0a0a0a",S.fillRect(0,0,O.width,O.height);const b=E.current,$=p.current,P=$.players.find(U=>U.id===b);if(P&&P.segments.length>0){const U=P.segments[0];_.current.x=U.x,_.current.y=U.y;const W=Math.max(.5,1-P.score/500);x.current+=(W-x.current)*.05}const I=_.current,V=x.current;S.save(),S.translate(O.width/2,O.height/2),S.scale(V,V),S.translate(-I.x,-I.y),qx(S,I,V,O,v.current),$.food.forEach(U=>{S.fillStyle=U.color,S.shadowBlur=15,S.shadowColor=U.color,S.beginPath(),S.arc(U.x,U.y,U.size,0,Math.PI*2),S.fill(),S.shadowBlur=0}),$.players.forEach(U=>{if(!U.dead){for(let W=U.segments.length-1;W>=0;W-=1){const Q=U.segments[W],se=W===0?U.headSize:10,ne=W===0?1:.8;if(S.fillStyle=U.color,S.globalAlpha=ne,W===0){S.shadowBlur=20,S.shadowColor=U.color,S.beginPath(),S.arc(Q.x,Q.y,se,0,Math.PI*2),S.fill(),S.shadowBlur=0;const ue=U.segments[1]||Q,oe=Math.atan2(Q.y-ue.y,Q.x-ue.x);S.fillStyle="#000",S.beginPath(),S.arc(Q.x+Math.cos(oe+.3)*se*.4,Q.y+Math.sin(oe+.3)*se*.4,se*.3,0,Math.PI*2),S.fill(),S.beginPath(),S.arc(Q.x+Math.cos(oe-.3)*se*.4,Q.y+Math.sin(oe-.3)*se*.4,se*.3,0,Math.PI*2),S.fill()}else S.beginPath(),S.arc(Q.x,Q.y,se,0,Math.PI*2),S.fill()}if(S.globalAlpha=1,U.segments.length>0){const W=U.segments[0];S.fillStyle="#00ffff",S.font="bold 16px Rajdhani",S.textAlign="center",S.strokeStyle="#000",S.lineWidth=3,S.strokeText(U.name,W.x,W.y-25),S.fillText(U.name,W.x,W.y-25)}}}),S.restore(),k.current=requestAnimationFrame(C)};return k.current=requestAnimationFrame(C),()=>{k.current&&cancelAnimationFrame(k.current),window.removeEventListener("resize",z)}},[]);const y=()=>{if(t)return;const O=r.trim()||"Anonymous";s(O),n(!0),h(null),L.current=!1,ee(),q("beep"),N.current&&N.current.disconnect();const z=hs("/slither",{transports:["websocket"]});N.current=z,z.on("connect",()=>{z.emit("join",O)}),z.on("init",C=>{E.current=C.id,v.current=C.mapSize}),z.on("gameState",C=>{p.current=C,Kx(C,E.current,a,o,h);const S=C.players.find(b=>b.id===E.current);S!=null&&S.dead&&!L.current?(q("invalid"),L.current=!0):!(S!=null&&S.dead)&&L.current&&(L.current=!1)})},A=()=>{const O=N.current;O&&(ee(),q("place"),h(null),O.emit("respawn",r||"Anonymous"))},j=O=>{var ue,oe;const z=N.current;if(!z||!E.current)return;const C=g.current,S=p.current;if(!C||!S)return;const b=S.players.find(We=>We.id===E.current);if(!b||b.dead)return;const $=C.getBoundingClientRect(),P=O.clientX??(O.touches&&((ue=O.touches[0])==null?void 0:ue.clientX)),I=O.clientY??(O.touches&&((oe=O.touches[0])==null?void 0:oe.clientY));if(P==null||I==null)return;const V=(P-$.left-C.width/2)/x.current+_.current.x,U=(I-$.top-C.height/2)/x.current+_.current.y,W=b.segments[0],Q=V-W.x,se=U-W.y,ne=Math.atan2(se,Q);z.emit("updateAngle",ne)},T=()=>{N.current&&(N.current.disconnect(),N.current=null),q("beep"),e("/")},F=()=>{ee();const O=!f;d(O),lp(O)};return w.useEffect(()=>()=>{N.current&&(N.current.disconnect(),N.current=null)},[]),i.jsxs("div",{className:"slither-root",children:[i.jsx("div",{className:"slither-cursor",ref:m}),i.jsx("canvas",{ref:g,className:"slither-canvas",onPointerMove:j,onTouchMove:j}),!t&&i.jsxs("div",{className:"slither-start",children:[i.jsx("h1",{children:"SERPENT.IO"}),i.jsx("div",{className:"slither-input",children:i.jsx("input",{type:"text",value:r,onChange:O=>s(O.target.value),onKeyDown:O=>{O.key==="Enter"&&y()},placeholder:"ENTER NAME",maxLength:15})}),i.jsxs("div",{className:"slither-start-actions",children:[i.jsx("button",{className:"slither-button",onClick:y,children:"INITIALIZE"}),i.jsx("button",{className:"slither-button alt",onClick:T,children:"EXIT"})]})]}),t&&i.jsxs("div",{className:"slither-hud",children:[i.jsxs("div",{className:"slither-leaderboard",children:[i.jsx("h3",{children:"TOP SERPENTS"}),i.jsx("div",{className:"slither-leaderboard-list",children:c.map(O=>i.jsxs("div",{className:`slither-leaderboard-entry ${O.isYou?"you":""}`,children:[i.jsxs("span",{children:[O.rank,". ",O.name]}),i.jsx("span",{children:O.score})]},O.id))})]}),i.jsxs("div",{className:"slither-hud-section",children:[i.jsx("div",{className:"slither-player-name",children:r||"Anonymous"}),i.jsx("div",{className:"slither-score",children:l})]}),i.jsxs("div",{className:"slither-controls",children:[i.jsx("button",{className:"slither-exit",onClick:T,children:"Exit"}),i.jsxs("button",{className:"slither-exit alt",onClick:F,children:["Sound: ",f?"On":"Off"]})]})]}),u!=null&&i.jsxs("div",{className:"slither-death",children:[i.jsx("h2",{children:"TERMINATED"}),i.jsxs("div",{className:"slither-final-score",children:["FINAL SCORE: ",u]}),i.jsx("button",{className:"slither-button",onClick:A,children:"RESPAWN"})]})]})}function Kx(e,t,n,r,s){const l=e.players||[],a=l.filter(h=>!h.dead).sort((h,f)=>f.score-h.score).slice(0,10).map((h,f)=>({id:h.id,rank:f+1,name:h.name,score:h.score,isYou:h.id===t}));n(a);const u=l.find(h=>h.id===t);u&&(r(u.score),u.dead&&s(u.score))}function qx(e,t,n,r,s){const o=Math.floor((t.x-r.width/(2*n))/50)*50,c=Math.floor((t.y-r.height/(2*n))/50)*50,a=t.x+r.width/(2*n),u=t.y+r.height/(2*n);e.strokeStyle="rgba(0, 255, 255, 0.05)",e.lineWidth=1;for(let h=o;h<a;h+=50)e.beginPath(),e.moveTo(h,c),e.lineTo(h,u),e.stroke();for(let h=c;h<u;h+=50)e.beginPath(),e.moveTo(o,h),e.lineTo(a,h),e.stroke();e.strokeStyle="rgba(255, 0, 255, 0.5)",e.lineWidth=3,e.strokeRect(0,0,s,s)}function Qx(){const e=et(),t=w.useMemo(()=>mt(),[]),[n,r]=w.useState(t.displayName),[s,l]=w.useState(""),[o,c]=w.useState("");El.useEffect(()=>(document.body.classList.add("wordle-mode"),()=>document.body.classList.remove("wordle-mode")),[]);const a=d=>{r(d),zs(d.trim()||"Player")},u=d=>{ee(),q("beep"),e(d)},h=async()=>{c(""),ee(),q("beep");try{const d=await fetch("/api/wordle/vs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rounds:3})}),g=await d.json();if(!d.ok)throw new Error((g==null?void 0:g.error)||"CREATE_FAILED");e(`/wordle/vs/${g.joinCode}`)}catch(d){c(d.message||"Could not create VS room")}},f=()=>{const d=s.trim().toUpperCase();d&&u(`/wordle/vs/${d}`)};return i.jsxs("div",{className:"wordle-root",children:[i.jsx("div",{className:"wordle-ambient"}),i.jsx("div",{className:"wordle-grid"}),i.jsx("div",{className:"wordle-crt"}),i.jsxs("div",{className:"wordle-shell",children:[i.jsxs("header",{className:"wordle-header",children:[i.jsx("h1",{className:"wordle-title",children:"WORDLE_"}),i.jsx("p",{className:"wordle-subtitle",children:"Neon word duels for the LAN."})]}),i.jsxs("section",{className:"wordle-panel",children:[i.jsx("div",{className:"wordle-panel-title",children:"Player"}),i.jsx("input",{className:"wordle-input",value:n,onChange:d=>a(d.target.value),placeholder:"ENTER NAME"})]}),i.jsxs("section",{className:"wordle-panel",children:[i.jsx("div",{className:"wordle-panel-title",children:"Choose Mode"}),i.jsxs("div",{className:"wordle-actions",children:[i.jsx("button",{className:"wordle-button",onClick:()=>u("/wordle/daily"),children:"Daily Wordle"}),i.jsx("button",{className:"wordle-button",onClick:()=>u("/wordle/free"),children:"Free Play"}),i.jsx("button",{className:"wordle-button",onClick:h,children:"VS Room (3 Rounds)"})]})]}),i.jsxs("section",{className:"wordle-panel",children:[i.jsx("div",{className:"wordle-panel-title",children:"Join VS Room"}),i.jsxs("div",{className:"wordle-actions",children:[i.jsx("input",{className:"wordle-input",value:s,onChange:d=>l(d.target.value),placeholder:"ROOM CODE"}),i.jsx("button",{className:"wordle-button secondary",onClick:f,children:"Join Room"})]}),o?i.jsx("div",{className:"wordle-message error",children:o}):null]}),i.jsx("button",{className:"wordle-button ghost",onClick:()=>u("/"),children:"Back to Hub"})]})]})}const Jx=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["ENTER","Z","X","C","V","B","N","M","BACK"]];function To({mode:e}){var Ws,Gs,Vs,$r,Hs,Ys,Ks,Dr,qs,Qs,Js,Xs,Zs,ei,ti,ni,ri,Mr,si,ii,li;const t=et(),{code:n}=Zn(),r=w.useMemo(()=>mt(),[]),s=String(n||"").toUpperCase(),[l,o]=w.useState(""),[c,a]=w.useState(null),[u,h]=w.useState([]),[f,d]=w.useState([]),[g,m]=w.useState(""),[N,E]=w.useState("IN_PROGRESS"),[v,p]=w.useState(""),[_,x]=w.useState(!1),[k,L]=w.useState(null),[y,A]=w.useState(null),[j,T]=w.useState(""),[F,O]=w.useState(null),z=e==="vs",C=w.useRef(null);w.useEffect(()=>(document.body.classList.add("wordle-mode"),()=>document.body.classList.remove("wordle-mode")),[]),w.useEffect(()=>(e==="daily"&&b(),e==="free"&&S(),e==="vs"&&P(),()=>{C.current&&(C.current.off("wordle:state"),C.current.off("wordle:roundEnd"),C.current.off("wordle:error"))}),[e,s]);const S=async()=>{const ae=await(await fetch("/api/wordle/free/word")).json();o(ae.word),a(null),h([]),d([]),m(""),E("IN_PROGRESS"),p(""),T("")},b=async()=>{L(null),p("");const ie=await fetch("/api/wordle/daily/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:r.playerId,displayName:r.displayName})});if(!ie.ok){const re=await ie.json().catch(()=>({}));if((re==null?void 0:re.error)==="ALREADY_PLAYED"){await $(),E("LOCKED"),p("Daily already completed.");return}p((re==null?void 0:re.error)||"Unable to start daily"),E("LOCKED");return}const ae=await ie.json();a(ae.gameId),h([]),d([]),m(""),E("IN_PROGRESS")},$=async()=>{const ie=await fetch(`/api/wordle/daily/status?name=${encodeURIComponent(r.displayName)}&playerId=${r.playerId}`);if(!ie.ok)return;const ae=await ie.json();L(ae)},P=()=>{const ie=zt();C.current=ie;const ae=je=>{var oi;A(je);const tr=(oi=je.state.players)==null?void 0:oi[r.playerId];if(je.room.status==="LOBBY"){E("WAITING");return}if(je.room.status==="FINISHED"){E("FINISHED");return}tr!=null&&tr.status&&tr.status!=="IN_PROGRESS"?E("WAITING"):E("IN_PROGRESS")},re=je=>{je!=null&&je.word&&(T(`Round complete. Word was ${je.word}.`),setTimeout(()=>T(""),4e3))},vt=je=>{p((je==null?void 0:je.message)||(je==null?void 0:je.code)||"Error"),x(!0),setTimeout(()=>x(!1),500)};ie.on("wordle:state",ae),ie.on("wordle:roundEnd",re),ie.on("wordle:error",vt),ie.emit("wordle:join",{joinCode:s})},I=ie=>{if(!ge){if(ie==="ENTER"){V();return}if(ie==="BACK"){m(ae=>ae.slice(0,-1));return}g.length<Wt&&/^[A-Z]$/.test(ie)&&m(ae=>ae+ie)}},V=async()=>{var ie;if(g.length!==Wt){x(!0),setTimeout(()=>x(!1),500);return}if(ee(),q("place"),e==="free"){const ae=Dx(g),re=Mx(ae,l),vt=[...u,ae],je=[...f,re];h(vt),d(je),m(""),ae===l?(E("WIN"),p(" Victory! ")):vt.length>=Os&&(E("LOSE"),p(`Word was ${l}`));return}if(e==="daily"){const ae=await fetch("/api/wordle/daily/guess",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameId:c,guess:g})}),re=await ae.json().catch(()=>({}));if(!ae.ok){p((re==null?void 0:re.error)||"Invalid word"),x(!0),setTimeout(()=>x(!1),500);return}h(re.guesses||[]),d(re.results||[]),m(""),E(re.status||"IN_PROGRESS"),re.status&&re.status!=="IN_PROGRESS"&&(await $(),re.answer&&p(re.status==="WIN"?" Victory! ":`Word: ${re.answer}`));return}if(e==="vs"){const ae=C.current;ae&&(ae.emit("wordle:guess",{roomId:(ie=y==null?void 0:y.room)==null?void 0:ie.roomId,guess:g}),m(""))}},U=()=>{ee(),q("beep"),S()},W=()=>{ee(),q("beep"),t("/wordle")},Q=((Ws=y==null?void 0:y.room)==null?void 0:Ws.players)||{},se=((Gs=y==null?void 0:y.state)==null?void 0:Gs.scores)||{},ne=((Vs=y==null?void 0:y.state)==null?void 0:Vs.currentRound)||1,ue=(($r=y==null?void 0:y.state)==null?void 0:$r.rounds)||3,oe=z?(Ys=(Hs=y==null?void 0:y.state)==null?void 0:Hs.players)==null?void 0:Ys[r.playerId]:null,We=z?((Ks=Q.black)==null?void 0:Ks.playerId)===r.playerId?(Dr=Q.white)==null?void 0:Dr.playerId:(qs=Q.black)==null?void 0:qs.playerId:null,ot=z?((Qs=Q.black)==null?void 0:Qs.playerId)===We?(Js=Q.black)==null?void 0:Js.displayName:(Xs=Q.white)==null?void 0:Xs.displayName:null,tt=z?(Zs=y==null?void 0:y.state)==null?void 0:Zs.roundStatus:null,Pn=z?(oe==null?void 0:oe.guesses)||[]:u,Tn=z?(oe==null?void 0:oe.results)||[]:f,In=z&&(oe==null?void 0:oe.status)||N,ge=In!=="IN_PROGRESS"||z&&tt!=="IN_PROGRESS",Pe=Xx(Pn,g,Tn,In),Et=Ep(Pn,Tn),nn=((ei=y==null?void 0:y.state)==null?void 0:ei.ready)||{},er=!!(nn!=null&&nn[r.playerId]),Vl=We?!!(nn!=null&&nn[We]):!1;return w.useEffect(()=>{const ie=ae=>{const re=ae.key.toUpperCase();if(re==="BACKSPACE"){I("BACK");return}if(re==="ENTER"){I("ENTER");return}/^[A-Z]$/.test(re)&&I(re)};return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[g,ge]),w.useEffect(()=>{var re;if(!z||!((re=y==null?void 0:y.state)!=null&&re.countdownEndsAt)){O(null);return}const ie=()=>{const vt=y.state.countdownEndsAt-Date.now();O(Math.max(0,Math.ceil(vt/1e3)))};ie();const ae=setInterval(ie,200);return()=>clearInterval(ae)},[z,(ti=y==null?void 0:y.state)==null?void 0:ti.countdownEndsAt]),i.jsxs("div",{className:"wordle-root",children:[i.jsx("div",{className:"wordle-ambient"}),i.jsx("div",{className:"wordle-grid"}),i.jsx("div",{className:"wordle-crt"}),i.jsxs("div",{className:"wordle-shell",children:[i.jsxs("header",{className:"wordle-header compact",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"wordle-title",children:"WORDLE_"}),i.jsx("p",{className:"wordle-subtitle",children:e==="daily"?"Daily Wordle":e==="free"?"Free Play":`VS Round ${ne}/${ue}`})]}),i.jsx("button",{className:"wordle-button ghost",onClick:W,children:"Back"})]}),z&&((ni=y==null?void 0:y.room)==null?void 0:ni.status)==="LOBBY"?i.jsxs("div",{className:"wordle-panel",children:[i.jsx("div",{className:"wordle-panel-title",children:"Waiting for opponent..."}),i.jsxs("div",{className:"wordle-message",children:["Share code ",s," to start."]})]}):null,z&&((ri=y==null?void 0:y.room)==null?void 0:ri.status)==="IN_PROGRESS"?i.jsxs("div",{className:"wordle-scoreboard",children:[i.jsxs("div",{children:[i.jsx("div",{className:"wordle-score-label",children:"You"}),i.jsx("div",{className:"wordle-score-value",children:se[r.playerId]||0})]}),i.jsxs("div",{children:[i.jsx("div",{className:"wordle-score-label",children:"Opponent"}),i.jsx("div",{className:"wordle-score-value",children:se[We]||0}),i.jsx("div",{className:"wordle-score-name",children:ot||"Waiting"})]})]}):null,z&&((Mr=y==null?void 0:y.room)==null?void 0:Mr.status)==="IN_PROGRESS"&&tt==="READY"?i.jsxs("div",{className:"wordle-panel",children:[i.jsx("div",{className:"wordle-panel-title",children:"Round Ready"}),i.jsxs("div",{className:"wordle-message",children:["You: ",er?"Ready":"Not ready"," | Opponent: ",Vl?"Ready":"Waiting"]}),i.jsx("div",{className:"wordle-actions",children:i.jsx("button",{className:"wordle-button",onClick:()=>{var ae;const ie=C.current;ie&&((ae=y==null?void 0:y.room)!=null&&ae.roomId)&&ie.emit("wordle:ready",{roomId:y.room.roomId})},disabled:er,children:er?"Ready ":"I'm Ready"})})]}):null,z&&tt==="COUNTDOWN"?i.jsxs("div",{className:"wordle-panel",children:[i.jsx("div",{className:"wordle-panel-title",children:"Starting Round"}),i.jsxs("div",{className:"wordle-message",children:["Round begins in ",F??3,""]})]}):null,i.jsx("div",{className:"wordle-board",children:Pe.map((ie,ae)=>i.jsx("div",{className:`wordle-row ${_&&ae===u.length?"shake":""}`,children:ie.map((re,vt)=>i.jsx("div",{className:`wordle-cell ${re.status||"empty"}`,children:re.letter},`cell-${ae}-${vt}`))},`row-${ae}`))}),v?i.jsx("div",{className:"wordle-message",children:v}):null,j?i.jsx("div",{className:"wordle-message",children:j}):null,N!=="IN_PROGRESS"&&e==="free"?i.jsx("div",{className:"wordle-actions",children:i.jsx("button",{className:"wordle-button",onClick:U,children:"Play Again"})}):null,e==="daily"&&(k!=null&&k.stats)?i.jsxs("section",{className:"wordle-panel",children:[i.jsx("div",{className:"wordle-panel-title",children:"Daily Stats"}),i.jsxs("div",{className:"wordle-leaderboard",children:[i.jsxs("div",{className:"wordle-leaderboard-row",children:[i.jsx("span",{children:"Wins"}),i.jsx("span",{children:k.stats.wins})]}),i.jsxs("div",{className:"wordle-leaderboard-row",children:[i.jsx("span",{children:"Losses"}),i.jsx("span",{children:k.stats.losses})]}),i.jsxs("div",{className:"wordle-leaderboard-row",children:[i.jsx("span",{children:"Streak"}),i.jsx("span",{children:k.stats.streak})]}),i.jsxs("div",{className:"wordle-leaderboard-row",children:[i.jsx("span",{children:"Max streak"}),i.jsx("span",{children:k.stats.maxStreak})]}),i.jsxs("div",{className:"wordle-leaderboard-row",children:[i.jsx("span",{children:"Avg guesses"}),i.jsx("span",{children:k.stats.avgGuesses})]})]})]}):null,e==="daily"&&((si=k==null?void 0:k.leaderboard)!=null&&si.length)?i.jsxs("section",{className:"wordle-panel",children:[i.jsx("div",{className:"wordle-panel-title",children:"Daily Leaderboard"}),i.jsx("div",{className:"wordle-leaderboard",children:k.leaderboard.map((ie,ae)=>i.jsxs("div",{className:"wordle-leaderboard-row",children:[i.jsxs("span",{children:[ae+1,". ",ie.name]}),i.jsxs("span",{children:[ie.guesses," guesses"]})]},ie.playerId))})]}):null,e==="vs"&&N==="FINISHED"&&((li=(ii=y==null?void 0:y.state)==null?void 0:ii.history)!=null&&li.length)?i.jsxs("section",{className:"wordle-panel",children:[i.jsx("div",{className:"wordle-panel-title",children:"Match Result"}),i.jsxs("div",{className:"wordle-leaderboard",children:[i.jsxs("div",{className:"wordle-leaderboard-row",children:[i.jsx("span",{children:"You"}),i.jsxs("span",{children:[se[r.playerId]||0," wins"]})]}),i.jsxs("div",{className:"wordle-leaderboard-row",children:[i.jsx("span",{children:ot||"Opponent"}),i.jsxs("span",{children:[se[We]||0," wins"]})]})]})]}):null,i.jsx("div",{className:"wordle-keyboard",children:Jx.map((ie,ae)=>i.jsx("div",{className:"wordle-keyboard-row",children:ie.map(re=>{const vt=Et[re]||"unused",je=re==="ENTER"||re==="BACK";return i.jsx("button",{className:`wordle-key ${vt} ${je?"special":""}`,onClick:()=>I(re),children:re==="BACK"?"DEL":re},re)})},`kb-${ae}`))})]})]})}function Xx(e,t,n,r){var l;const s=[];for(let o=0;o<Os;o+=1){const c=e[o]||(o===e.length&&r==="IN_PROGRESS"?t:""),a=[];for(let u=0;u<Wt;u+=1)a.push({letter:c[u]||"",status:((l=n[o])==null?void 0:l[u])||(c[u]?"filled":"empty")});s.push(a)}return s}function Zx(){const e=et(),t=w.useMemo(()=>mt(),[]),[n,r]=w.useState(t.displayName),[s,l]=w.useState(""),[o,c]=w.useState("");El.useEffect(()=>(document.body.classList.add("draw-mode"),()=>document.body.classList.remove("draw-mode")),[]);const a=f=>{r(f),zs(f.trim()||"Player")},u=async()=>{c(""),ee(),q("beep");try{const f=await fetch("/api/rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameKey:"draw",mode:"PARTY"})}),d=await f.json();if(!f.ok)throw new Error((d==null?void 0:d.error)||"CREATE_FAILED");e(`/draw/${d.joinCode}`)}catch(f){c(f.message||"Unable to create room")}},h=()=>{const f=s.trim().toUpperCase();f&&(ee(),q("beep"),e(`/draw/${f}`))};return i.jsxs("div",{className:"draw-root",children:[i.jsx("div",{className:"draw-bg"}),i.jsxs("div",{className:"draw-shell",children:[i.jsxs("header",{className:"draw-header",children:[i.jsx("h1",{children:"Draw & Guess"}),i.jsx("p",{children:"Sketch fast. Guess faster. 212 players."})]}),i.jsxs("section",{className:"draw-panel",children:[i.jsx("div",{className:"draw-panel-title",children:"Player"}),i.jsx("input",{className:"draw-input",value:n,onChange:f=>a(f.target.value),placeholder:"Enter name"})]}),i.jsxs("section",{className:"draw-panel",children:[i.jsx("div",{className:"draw-panel-title",children:"Host a Room"}),i.jsx("button",{className:"draw-button",onClick:u,children:"Create Room"})]}),i.jsxs("section",{className:"draw-panel",children:[i.jsx("div",{className:"draw-panel-title",children:"Join a Room"}),i.jsxs("div",{className:"draw-row",children:[i.jsx("input",{className:"draw-input",value:s,onChange:f=>l(f.target.value),placeholder:"Room code"}),i.jsx("button",{className:"draw-button alt",onClick:h,children:"Join"})]}),o?i.jsx("div",{className:"draw-message error",children:o}):null]}),i.jsx("button",{className:"draw-button ghost",onClick:()=>e("/"),children:"Back to Hub"})]})]})}const Pd=["#101820","#F94144","#F3722C","#F9C74F","#43AA8B","#577590","#4D4DFF"];function ew(){const e=et(),{code:t}=Zn(),n=w.useMemo(()=>mt(),[]),r=String(t||"").toUpperCase(),s=w.useRef(null),l=w.useRef(!1),o=w.useRef(null),c=w.useRef(null),[a,u]=w.useState(null),[h,f]=w.useState(""),[d,g]=w.useState(Pd[0]),[m,N]=w.useState(6),[E,v]=w.useState(0),p=(a==null?void 0:a.drawerId)===n.playerId;w.useEffect(()=>(document.body.classList.add("draw-mode"),()=>document.body.classList.remove("draw-mode")),[]),w.useEffect(()=>{const C=zt();c.current=C;const S=P=>{var I,V;if(u({...P.state,roomId:P.roomId}),(I=P.state)!=null&&I.roundEndsAt){const U=Math.max(0,Math.ceil((P.state.roundEndsAt-Date.now())/1e3));v(U)}(V=P.state)!=null&&V.strokes&&z(P.state.strokes)},b=P=>{F(P)},$=()=>{O()};return C.on("draw:state",S),C.on("draw:stroke",b),C.on("draw:clear",$),C.emit("draw:join",{joinCode:r}),()=>{C.off("draw:state",S),C.off("draw:stroke",b),C.off("draw:clear",$)}},[r]),w.useEffect(()=>{if(!(a!=null&&a.roundEndsAt)||a.phase!=="DRAWING"){v(0);return}const C=setInterval(()=>{const S=Math.max(0,Math.ceil((a.roundEndsAt-Date.now())/1e3));v(S)},500);return()=>clearInterval(C)},[a==null?void 0:a.roundEndsAt,a==null?void 0:a.phase]);const _=C=>{!p||(a==null?void 0:a.phase)!=="DRAWING"||(l.current=!0,o.current=T(C))},x=C=>{if(!l.current||!p)return;const S=T(C),b={points:[o.current,S],color:d,size:m};o.current=S,F(b);const $=c.current;$&&(a==null?void 0:a.phase)==="DRAWING"&&$.emit("draw:stroke",{roomId:a==null?void 0:a.roomId,stroke:b})},k=()=>{l.current=!1,o.current=null},L=()=>{const C=h.trim();if(!C)return;ee(),q("beep"),c.current.emit("draw:guess",{roomId:a==null?void 0:a.roomId,guess:C}),f("")},y=()=>{ee(),q("beep");const C=c.current;C&&(a!=null&&a.roomId)&&C.emit("draw:leave",{roomId:a.roomId}),e("/draw")},A=(a==null?void 0:a.players)||[],j=a!=null&&a.word||(a==null?void 0:a.phase)==="REVEAL"?a.word:"????";return i.jsxs("div",{className:"draw-root",children:[i.jsx("div",{className:"draw-bg"}),i.jsxs("div",{className:"draw-arena",children:[i.jsxs("header",{className:"draw-top",children:[i.jsxs("div",{children:[i.jsx("h2",{children:"Draw & Guess"}),i.jsxs("p",{children:["Room ",r]})]}),i.jsx("div",{className:"draw-timer",children:E?`${E}s`:"--"}),i.jsx("button",{className:"draw-button ghost",onClick:y,children:"Back"})]}),i.jsxs("div",{className:"draw-body",children:[i.jsxs("section",{className:"draw-sidebar",children:[i.jsx("div",{className:"draw-panel-title",children:"Players"}),i.jsx("div",{className:"draw-player-list",children:A.map(C=>{var S;return i.jsxs("div",{className:`draw-player ${C.playerId===(a==null?void 0:a.drawerId)?"active":""}`,children:[i.jsx("span",{children:C.displayName}),i.jsx("span",{children:((S=a==null?void 0:a.scores)==null?void 0:S[C.playerId])||0})]},C.playerId)})}),i.jsx("div",{className:"draw-panel-title",children:"Word"}),i.jsx("div",{className:"draw-word",children:j||"WAIT"}),i.jsx("div",{className:"draw-phase",children:(a==null?void 0:a.phase)||"LOBBY"})]}),i.jsx("section",{className:"draw-canvas-wrap",children:i.jsx("canvas",{ref:s,className:"draw-canvas",width:900,height:600,onPointerDown:_,onPointerMove:x,onPointerUp:k,onPointerLeave:k})}),i.jsxs("section",{className:"draw-guess-panel",children:[i.jsx("div",{className:"draw-panel-title",children:"Guesses"}),i.jsx("div",{className:"draw-feed",children:((a==null?void 0:a.feed)||[]).map((C,S)=>i.jsx("div",{className:`draw-feed-item ${C.type}`,children:C.message},`${C.timestamp}-${S}`))}),p?i.jsx("div",{className:"draw-guess-input muted",children:"You are drawing"}):i.jsxs("div",{className:"draw-guess-input",children:[i.jsx("input",{value:h,onChange:C=>f(C.target.value),placeholder:"Type your guess",onKeyDown:C=>{C.key==="Enter"&&L()}}),i.jsx("button",{className:"draw-button",onClick:L,children:"Guess"})]}),p?i.jsxs("div",{className:"draw-tools",children:[i.jsx("div",{className:"draw-colors",children:Pd.map(C=>i.jsx("button",{className:`draw-swatch ${C===d?"active":""}`,style:{backgroundColor:C},onClick:()=>g(C)},C))}),i.jsxs("label",{className:"draw-size",children:["Brush",i.jsx("input",{type:"range",min:"2",max:"16",value:m,onChange:C=>N(Number(C.target.value))})]})]}):null]})]})]})]});function T(C){const S=s.current,b=S.getBoundingClientRect();return{x:(C.clientX-b.left)/b.width*S.width,y:(C.clientY-b.top)/b.height*S.height}}function F(C){const S=s.current;if(!S)return;const b=S.getContext("2d");if(!b)return;const{points:$,color:P,size:I}=C;!$||$.length<2||(b.strokeStyle=P,b.lineWidth=I,b.lineCap="round",b.beginPath(),b.moveTo($[0].x,$[0].y),b.lineTo($[1].x,$[1].y),b.stroke())}function O(){const C=s.current;if(!C)return;const S=C.getContext("2d");S&&S.clearRect(0,0,C.width,C.height)}function z(C){O(),C.forEach(F)}}function tw(){const e=et(),t=w.useMemo(()=>mt(),[]),[n,r]=w.useState(t.displayName),[s,l]=w.useState(""),[o,c]=w.useState(!1),[a,u]=w.useState("");w.useEffect(()=>(document.body.classList.add("connect4-mode"),()=>document.body.classList.remove("connect4-mode")),[]);const h=g=>{r(g),zs(g.trim()||"Player")},f=async g=>{u(""),c(!0),ee(),q("beep");try{const m=await kp({gameKey:"connect4",mode:g});e(`/connect4/${m.joinCode}`)}catch(m){u(m.message||"Unable to create room")}finally{c(!1)}},d=()=>{const g=s.trim().toUpperCase();g&&(ee(),q("beep"),e(`/connect4/${g}`))};return i.jsxs("div",{className:"app-shell connect4-shell",children:[i.jsxs("header",{className:"connect4-title",children:[i.jsxs("span",{className:"connect4-logo",children:[i.jsx("span",{className:"red-disc"}),i.jsx("span",{className:"yellow-disc"})]}),i.jsx("span",{className:"title-text",children:"CONNECT 4"})]}),i.jsxs("section",{className:"panel connect4-panel",children:[i.jsx("div",{className:"panel-title",children:"Player Setup"}),i.jsxs("div",{className:"menu",children:[i.jsx("input",{className:"input",value:n,onChange:g=>h(g.target.value),placeholder:"Your name"}),i.jsxs("div",{className:"subtle",children:["Playing as ",n||"Player"]}),i.jsx(bp,{})]})]}),i.jsxs("section",{className:"panel connect4-panel",children:[i.jsx("div",{className:"panel-title",children:"Start a Match"}),i.jsxs("div",{className:"menu",children:[i.jsx("button",{className:"button connect4-button",onClick:()=>f("AI"),disabled:o,children:"Play vs Computer"}),i.jsx("button",{className:"button connect4-button",onClick:()=>f("PVP"),disabled:o,children:"Play 2-Player"})]})]}),i.jsxs("section",{className:"panel connect4-panel",children:[i.jsx("div",{className:"panel-title",children:"Join Existing Game"}),i.jsxs("div",{className:"menu",children:[i.jsx("input",{className:"input",value:s,onChange:g=>l(g.target.value),placeholder:"Enter code"}),i.jsx("button",{className:"button secondary connect4-button",onClick:d,children:"Join Game"}),a?i.jsx("div",{className:"subtle error",children:a}):null]})]}),i.jsx("footer",{className:"connect4-footer",children:i.jsx("button",{className:"button ghost",onClick:()=>e("/"),children:"Back to Hub"})})]})}const nw=6,Io=7;function rw(){var C,S;const{code:e}=Zn(),t=et(),n=w.useMemo(()=>String(e||"").toUpperCase(),[e]),r=w.useMemo(()=>mt(),[]),[s,l]=w.useState(null),[o,c]=w.useState(""),[a,u]=w.useState(-1),[h,f]=w.useState(null);w.useEffect(()=>(document.body.classList.add("connect4-mode"),()=>document.body.classList.remove("connect4-mode")),[]),w.useEffect(()=>{const b=zt(),$=U=>{var W,Q;if(l(U.room),(Q=(W=U.room)==null?void 0:W.state)!=null&&Q.lastMove){const{col:se,row:ne}=U.room.state.lastMove;f({col:se,row:ne,color:U.room.state.turn==="red"?"yellow":"red"}),setTimeout(()=>f(null),400)}},P=U=>{c(U.message||""),setTimeout(()=>c(""),2200)},I=U=>{q("invalid"),c((U==null?void 0:U.message)||(U==null?void 0:U.code)||"Error"),setTimeout(()=>c(""),2200)},V=U=>{if(!U)return;let W;U.winner==="draw"?W="It's a draw!":W=`${U.winner==="red"?"Red":"Yellow"} wins!`,c(W)};return b.on("room:state",$),b.on("game:toast",P),b.on("connect4:error",I),b.on("game:ended",V),b.emit("connect4:join",{joinCode:n}),()=>{b.off("room:state",$),b.off("game:toast",P),b.off("connect4:error",I),b.off("game:ended",V)}},[n]);const d=s==null?void 0:s.state,g=(d==null?void 0:d.board)||Array(Io).fill([]),m=new Set((d==null?void 0:d.legalMoves)||[]),N=(d==null?void 0:d.winningCells)||[],E=new Set(N.map(b=>`${b.col}-${b.row}`)),v=(C=s==null?void 0:s.players)!=null&&C.red&&s.players.red!=="AI"?s.players.red:null,p=(S=s==null?void 0:s.players)!=null&&S.yellow&&s.players.yellow!=="AI"?s.players.yellow:null,_=(v==null?void 0:v.playerId)===r.playerId?"red":(p==null?void 0:p.playerId)===r.playerId?"yellow":null,x=_&&(d==null?void 0:d.turn)===_,k=(d==null?void 0:d.status)==="FINISHED",L=b=>{if(!(s!=null&&s.roomId)||!d||k||!x||!m.has(b))return;ee(),q("place"),zt().emit("connect4:move",{roomId:s.roomId,col:b})},y=()=>{ee(),q("beep"),t("/connect4")},A=()=>{ee(),q("beep"),t("/connect4")},j=`${window.location.origin}/connect4/${n}`,T=async()=>{try{ee(),q("beep"),await navigator.clipboard.writeText(j),c("Link copied!"),setTimeout(()=>c(""),2e3)}catch{c("Copy failed"),setTimeout(()=>c(""),2200)}},F=()=>{var $;const b=[];for(let P=nw-1;P>=0;P--)for(let I=0;I<Io;I++){const V=(($=g[I])==null?void 0:$[P])||null,U=E.has(`${I}-${P}`),W=a===I&&!V&&x&&!k,Q=(h==null?void 0:h.col)===I&&(h==null?void 0:h.row)===P;b.push(i.jsx("div",{className:`connect4-cell ${W?"hovered":""}`,onClick:()=>L(I),onMouseEnter:()=>u(I),onMouseLeave:()=>u(-1),children:i.jsxs("div",{className:"cell-hole",children:[V&&i.jsx("div",{className:`connect4-piece ${V} ${U?"winning":""} ${Q?"dropping":""}`}),W&&!V&&i.jsx("div",{className:`connect4-piece ${_} preview`})]})},`${I}-${P}`))}return b},O=()=>Array(Io).fill(null).map((b,$)=>{const P=m.has($)&&x&&!k;return i.jsx("div",{className:`column-indicator ${a===$&&P?"active":""}`,onMouseEnter:()=>u($),onMouseLeave:()=>u(-1),onClick:()=>L($),children:P&&a===$&&i.jsx("div",{className:`indicator-piece ${_}`})},$)}),z=()=>{var b,$;if(k){if((d==null?void 0:d.winner)==="draw")return"Game ended in a draw!";const P=(d==null?void 0:d.winner)==="red"?"Red":"Yellow";return(d==null?void 0:d.winner)===_?"You won!":(s==null?void 0:s.mode)==="AI"&&(d==null?void 0:d.winner)==="yellow"?"Computer wins!":`${P} wins!`}return!((b=s==null?void 0:s.players)!=null&&b.red)||!(($=s==null?void 0:s.players)!=null&&$.yellow)?"Waiting for opponent...":x?"Your turn - drop a piece!":(s==null?void 0:s.mode)==="AI"?"Computer is thinking...":"Waiting for opponent..."};return i.jsxs("div",{className:"app-shell connect4-shell",children:[i.jsxs("header",{className:"connect4-title",children:[i.jsxs("span",{className:"connect4-logo",children:[i.jsx("span",{className:"red-disc"}),i.jsx("span",{className:"yellow-disc"})]}),i.jsx("span",{className:"title-text",children:"CONNECT 4"})]}),i.jsxs("section",{className:"panel connect4-panel scoreboard-panel",children:[i.jsxs("div",{className:"connect4-scoreboard",children:[i.jsxs("div",{className:`player-card ${(d==null?void 0:d.turn)==="red"&&!k?"active":""} ${(d==null?void 0:d.winner)==="red"?"winner":""}`,children:[i.jsx("div",{className:"connect4-piece red small"}),i.jsxs("div",{className:"player-info",children:[i.jsx("span",{className:"player-name",children:(v==null?void 0:v.displayName)||((s==null?void 0:s.mode)==="AI"?"You":"Waiting...")}),i.jsx("span",{className:"player-label",children:"Red"})]})]}),i.jsx("div",{className:"vs-divider",children:"VS"}),i.jsxs("div",{className:`player-card ${(d==null?void 0:d.turn)==="yellow"&&!k?"active":""} ${(d==null?void 0:d.winner)==="yellow"?"winner":""}`,children:[i.jsx("div",{className:"connect4-piece yellow small"}),i.jsxs("div",{className:"player-info",children:[i.jsx("span",{className:"player-name",children:(p==null?void 0:p.displayName)||((s==null?void 0:s.mode)==="AI"?"Computer":"Waiting...")}),i.jsx("span",{className:"player-label",children:"Yellow"})]})]})]}),i.jsx("div",{className:"turn-indicator",children:z()})]}),i.jsxs("section",{className:"connect4-board-container",children:[i.jsx("div",{className:"column-indicators",children:O()}),i.jsx("div",{className:"connect4-board",children:F()})]}),i.jsxs("section",{className:"actions connect4-actions",children:[k?i.jsx("button",{className:"button connect4-button",onClick:A,children:"Play Again"}):i.jsx("button",{className:"button secondary connect4-button",onClick:T,children:"Share Link"}),i.jsx("button",{className:"button ghost connect4-button",onClick:y,children:"Leave Game"})]}),o?i.jsx("div",{className:"toast connect4-toast",children:o}):null]})}function sw(){const e=et(),t=w.useMemo(()=>mt(),[]),[n,r]=w.useState(t.displayName),[s,l]=w.useState(""),[o,c]=w.useState("");w.useEffect(()=>(document.body.classList.add("charades-mode"),()=>document.body.classList.remove("charades-mode")),[]);const a=f=>{r(f),zs(f.trim()||"Player")},u=async()=>{c(""),ee(),q("beep");try{const f=await fetch("/api/rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameKey:"charades",mode:"PARTY"})}),d=await f.json();if(!f.ok)throw new Error((d==null?void 0:d.error)||"CREATE_FAILED");e(`/charades/${d.joinCode}`)}catch(f){c(f.message||"Unable to create room")}},h=()=>{const f=s.trim().toUpperCase();f&&(ee(),q("beep"),e(`/charades/${f}`))};return i.jsxs("div",{className:"charades-root",children:[i.jsx("div",{className:"charades-bg"}),i.jsxs("div",{className:"charades-shell",children:[i.jsxs("header",{className:"charades-header",children:[i.jsxs("div",{className:"charades-icon",children:[i.jsx("span",{className:"icon-person",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),i.jsx("span",{className:"icon-sparkle",children:"?"})]}),i.jsx("h1",{children:"Charades"}),i.jsx("p",{children:"Act it out. Guess the answer. 2-12 players."})]}),i.jsxs("section",{className:"charades-panel",children:[i.jsx("div",{className:"charades-panel-title",children:"Player Name"}),i.jsx("input",{className:"charades-input",value:n,onChange:f=>a(f.target.value),placeholder:"Enter your name"})]}),i.jsxs("section",{className:"charades-panel",children:[i.jsx("div",{className:"charades-panel-title",children:"Host a Game"}),i.jsx("button",{className:"charades-button",onClick:u,children:"Create Room"})]}),i.jsxs("section",{className:"charades-panel",children:[i.jsx("div",{className:"charades-panel-title",children:"Join a Game"}),i.jsxs("div",{className:"charades-row",children:[i.jsx("input",{className:"charades-input",value:s,onChange:f=>l(f.target.value),placeholder:"Room code"}),i.jsx("button",{className:"charades-button alt",onClick:h,children:"Join"})]}),o?i.jsx("div",{className:"charades-message error",children:o}):null]}),i.jsx("button",{className:"charades-button ghost",onClick:()=>e("/"),children:"Back to Hub"})]})]})}const iw={MOVIES:"Movies & TV",ACTIONS:"Actions",ANIMALS:"Animals",OCCUPATIONS:"Occupations",SPORTS:"Sports & Activities",OBJECTS:"Objects",FAMOUS:"Famous People",PHRASES:"Phrases & Sayings"};function lw(){var F,O,z;const e=et(),{code:t}=Zn(),n=w.useMemo(()=>mt(),[]),r=String(t||"").toUpperCase(),s=w.useRef(null),[l,o]=w.useState(null),[c,a]=w.useState(""),[u,h]=w.useState(0),[f,d]=w.useState(null),g=(l==null?void 0:l.performerId)===n.playerId,m=(F=l==null?void 0:l.players)==null?void 0:F.find(C=>C.playerId===(l==null?void 0:l.performerId));w.useEffect(()=>(document.body.classList.add("charades-mode"),()=>document.body.classList.remove("charades-mode")),[]),w.useEffect(()=>{const C=zt();s.current=C;const S=$=>{var U,W,Q,se,ne,ue;const P=((U=l==null?void 0:l.guesses)==null?void 0:U.length)||0,I={...$.state,roomId:$.roomId};if(o(I),(W=$.state)!=null&&W.roundEndsAt){const oe=Math.max(0,Math.ceil(($.state.roundEndsAt-Date.now())/1e3));h(oe)}if((((se=(Q=$.state)==null?void 0:Q.guesses)==null?void 0:se.length)||0)>P&&((ue=(ne=$.state)==null?void 0:ne.guesses)==null?void 0:ue.length)>0){const oe=$.state.guesses[$.state.guesses.length-1];d(oe),q("invalid"),setTimeout(()=>d(null),2e3)}},b=$=>{console.error("Charades error:",$)};return C.on("charades:state",S),C.on("charades:error",b),C.emit("charades:join",{joinCode:r}),()=>{C.off("charades:state",S),C.off("charades:error",b)}},[r]),w.useEffect(()=>{if(!(l!=null&&l.roundEndsAt)||l.phase!=="PERFORMING"){h(0);return}const C=setInterval(()=>{const S=Math.max(0,Math.ceil((l.roundEndsAt-Date.now())/1e3));h(S)},500);return()=>clearInterval(C)},[l==null?void 0:l.roundEndsAt,l==null?void 0:l.phase]);const N=()=>{const C=c.trim();if(!C)return;ee(),q("beep"),s.current.emit("charades:guess",{roomId:l==null?void 0:l.roomId,guess:C}),a("")},E=()=>{ee(),q("beep");const C=s.current;C&&(l!=null&&l.roomId)&&C.emit("charades:leave",{roomId:l.roomId}),e("/charades")},v=async()=>{try{ee(),q("beep"),await navigator.clipboard.writeText(`${window.location.origin}/charades/${r}`)}catch{}},p=(l==null?void 0:l.players)||[],_=[...p].sort((C,S)=>(S.score||0)-(C.score||0)),x=(l==null?void 0:l.guesses)||[],k=(l==null?void 0:l.feed)||[],L=iw[(O=l==null?void 0:l.prompt)==null?void 0:O.category]||((z=l==null?void 0:l.prompt)==null?void 0:z.category)||"",y=()=>i.jsx("div",{className:"charades-center-panel",children:i.jsxs("div",{className:"charades-waiting",children:[i.jsx("div",{className:"charades-waiting-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),i.jsx("h2",{children:"Waiting for Players"}),i.jsx("p",{children:"Share the room code to invite friends"}),i.jsx("div",{className:"charades-code-display",children:r}),i.jsx("button",{className:"charades-button",onClick:v,children:"Copy Invite Link"}),i.jsxs("div",{className:"charades-player-count",children:[p.length," player",p.length!==1?"s":""," joined"]}),p.length<2&&i.jsx("div",{className:"charades-hint",children:"Need at least 2 players to start"})]})}),A=()=>{var C;return i.jsxs("div",{className:"charades-center-panel performer",children:[i.jsxs("div",{className:"charades-prompt-card",children:[i.jsx("div",{className:"charades-prompt-label",children:"Act out:"}),i.jsx("div",{className:"charades-prompt-text",children:((C=l==null?void 0:l.prompt)==null?void 0:C.text)||"..."}),i.jsx("div",{className:"charades-prompt-category",children:L})]}),i.jsxs("div",{className:"charades-performer-hint",children:[i.jsx("p",{children:"Act this out without speaking or using props!"}),i.jsx("p",{children:"Other players are guessing..."})]})]})},j=()=>i.jsxs("div",{className:"charades-center-panel guesser",children:[i.jsxs("div",{className:"charades-performing-info",children:[i.jsx("div",{className:"charades-performer-avatar",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),i.jsx("div",{className:"charades-performer-name",children:(m==null?void 0:m.displayName)||"Someone"}),i.jsx("div",{className:"charades-performer-label",children:"is performing"}),i.jsx("div",{className:"charades-category-hint",children:L})]}),i.jsx("div",{className:"charades-wrong-guesses",children:x.slice(-6).map((C,S)=>i.jsxs("div",{className:`charades-wrong-guess ${(f==null?void 0:f.timestamp)===C.timestamp?"new":""}`,children:[i.jsxs("span",{className:"guess-name",children:[C.displayName,":"]}),i.jsx("span",{className:"guess-text",children:C.text})]},`${C.timestamp}-${S}`))}),i.jsxs("div",{className:"charades-guess-form",children:[i.jsx("input",{className:"charades-input large",value:c,onChange:C=>a(C.target.value),placeholder:"Type your guess...",onKeyDown:C=>{C.key==="Enter"&&N()},autoFocus:!0}),i.jsx("button",{className:"charades-button",onClick:N,children:"Guess"})]})]}),T=()=>{var C,S;return i.jsxs("div",{className:"charades-center-panel reveal",children:[i.jsxs("div",{className:"charades-reveal-card",children:[i.jsx("div",{className:"charades-reveal-label",children:"The answer was:"}),i.jsx("div",{className:"charades-reveal-text",children:(C=l==null?void 0:l.prompt)==null?void 0:C.text}),i.jsx("div",{className:"charades-reveal-category",children:L})]}),i.jsx("div",{className:"charades-reveal-message",children:k.length>0&&((S=k[k.length-1])==null?void 0:S.type)==="correct"?i.jsx("span",{className:"success",children:k[k.length-1].message}):i.jsx("span",{className:"timeout",children:"Nobody guessed it!"})})]})};return i.jsxs("div",{className:"charades-root",children:[i.jsx("div",{className:"charades-bg"}),i.jsxs("div",{className:"charades-arena",children:[i.jsxs("header",{className:"charades-top",children:[i.jsxs("div",{className:"charades-top-info",children:[i.jsx("h2",{children:"Charades"}),i.jsxs("p",{children:["Room ",r]})]}),i.jsxs("div",{className:"charades-timer-wrap",children:[(l==null?void 0:l.phase)==="PERFORMING"&&i.jsxs("div",{className:`charades-timer ${u<=10?"warning":""}`,children:[u,"s"]}),(l==null?void 0:l.phase)==="REVEAL"&&i.jsx("div",{className:"charades-timer reveal",children:"REVEAL"})]}),i.jsx("button",{className:"charades-button ghost small",onClick:E,children:"Leave"})]}),i.jsxs("div",{className:"charades-body",children:[i.jsxs("section",{className:"charades-sidebar",children:[i.jsx("div",{className:"charades-panel-title",children:"Scoreboard"}),i.jsx("div",{className:"charades-player-list",children:_.map((C,S)=>i.jsxs("div",{className:`charades-player ${C.playerId===(l==null?void 0:l.performerId)?"performing":""} ${C.playerId===n.playerId?"you":""}`,children:[i.jsx("span",{className:"player-rank",children:S+1}),i.jsxs("span",{className:"player-name",children:[C.displayName,C.playerId===n.playerId&&" (You)"]}),i.jsx("span",{className:"player-score",children:C.score||0})]},C.playerId))}),i.jsx("div",{className:"charades-panel-title",children:"Activity"}),i.jsx("div",{className:"charades-feed",children:k.slice(-8).map((C,S)=>i.jsx("div",{className:`charades-feed-item ${C.type}`,children:C.message},`${C.timestamp}-${S}`))})]}),i.jsxs("section",{className:"charades-main",children:[(l==null?void 0:l.phase)==="LOBBY"&&y(),(l==null?void 0:l.phase)==="PERFORMING"&&g&&A(),(l==null?void 0:l.phase)==="PERFORMING"&&!g&&j(),(l==null?void 0:l.phase)==="REVEAL"&&T()]})]})]})]})}function ow(){return i.jsxs(cy,{children:[i.jsx(Le,{path:"/",element:i.jsx(py,{})}),i.jsx(Le,{path:"/room/:code",element:i.jsx(zx,{})}),i.jsx(Le,{path:"/reversi",element:i.jsx(Wx,{})}),i.jsx(Le,{path:"/lobby/:code",element:i.jsx(Gx,{})}),i.jsx(Le,{path:"/game/:code",element:i.jsx(Vx,{})}),i.jsx(Le,{path:"/slither",element:i.jsx(Yx,{})}),i.jsx(Le,{path:"/wordle",element:i.jsx(Qx,{})}),i.jsx(Le,{path:"/wordle/daily",element:i.jsx(To,{mode:"daily"})}),i.jsx(Le,{path:"/wordle/free",element:i.jsx(To,{mode:"free"})}),i.jsx(Le,{path:"/wordle/vs/:code",element:i.jsx(To,{mode:"vs"})}),i.jsx(Le,{path:"/draw",element:i.jsx(Zx,{})}),i.jsx(Le,{path:"/draw/:code",element:i.jsx(ew,{})}),i.jsx(Le,{path:"/connect4",element:i.jsx(tw,{})}),i.jsx(Le,{path:"/connect4/:code",element:i.jsx(rw,{})}),i.jsx(Le,{path:"/charades",element:i.jsx(sw,{})}),i.jsx(Le,{path:"/charades/:code",element:i.jsx(lw,{})}),i.jsx(Le,{path:"*",element:i.jsx(oy,{to:"/",replace:!0})})]})}const aw=Gf(document.getElementById("root"));aw.render(i.jsx(El.StrictMode,{children:i.jsx(hy,{children:i.jsx(ow,{})})}));
